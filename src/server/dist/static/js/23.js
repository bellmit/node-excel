webpackJsonp([23],{JdDa:function(e,a,t){var s=t("L13J");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("024d8e2e",s,!0)},L13J:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.sealCssBorder {\n  border-top: 1px solid #a8a8a8;\n  padding-top: 10px;\n}\n",""])},RZpx:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.sealCssBorder {\n  border-top: 1px solid #a8a8a8;\n  padding-top: 10px;\n}\n",""])},ePam:function(e,a,t){var s=t("i+DR");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("74615a82",s,!0)},"i+DR":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.sealCssBorder {\n  border-top: 1px solid #a8a8a8;\n  padding-top: 10px;\n}\n",""])},psF8:function(e,a,t){var s=t("wu2b");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("0426188a",s,!0)},tGDW:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("0oES"),i=t("syAl"),r=t("AA3o"),l=t.n(r),o=function e(){l()(this,e),this.data={},this.CommCode="PLEVoucher",this.SceneCode="PerViewEVoucher",this.TransServiceCode="mg-afaservices-paperless/templateManagementPreview"},n={props:{createData:Object},data:function(){return{loading:!1,remoteAFAPdfPath:""}},computed:{},created:function(){this.remoteAFAPdfPath=i.a.get("remoteAFAPdfPath")},mounted:function(){},methods:{query:function(){var e=this;this.loading=!0;var a=new o;a.data.VouStyle=this.createData.VOUSTYLE,a.data.VouImgName=this.createData.uploadFileName,a.data.PdfPath=this.remoteAFAPdfPath,a.data.seallist=[],a.data.signlist=[],a.data.PrintData="电子凭证打印预览",a.data.ReturnType="1",Object(s.a)(a).then(function(a){e.loading=!1,null!=a.RspInfo.pdffile&&void 0!=a.RspInfo.pdffile?"fail;"===a.RspInfo.pdffile.substring(0,5)?e.$aui.message.show({type:"error",message:"生成电子凭证异常！"}):e.$refs.img1.src="data:application/pdf;base64,"+a.RspInfo.pdffile:e.$aui.message.show({type:"error",message:"请求失败，错误码:"+a.SYS_HEAD.ReturnCode+"，错误信息："+a.SYS_HEAD.ReturnMessage})}).catch(function(a){e.loading=!1})},openBranch:function(){this.query()},closeBranch:function(){this.$refs.img1.src=""}}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("aui-dialog",{attrs:{visible:e.createData.isShow,title:"电子凭证预览","close-on-click-modal":!1,width:"1100px"},on:{"update:visible":function(a){e.$set(e.createData,"isShow",a)},hide:e.closeBranch,show:e.openBranch}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("iframe",{ref:"img1",staticStyle:{width:"100%",height:"400px",margin:"0 auto","text-align":"center"}}),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.createData.isShow=!1}}},[e._v("返回")])],1)],1)])],1)},staticRenderFns:[]};var m=t("/Xao")(n,u,!1,function(e){t("JdDa")},null,null).exports,p=t("fCv1"),h=t("pADA"),f=function e(){l()(this,e),this.data={VOUSTYLE:"",VOUMODELDESC:"",STARTDATE:"",VOUIMGNAME:"",CHANELCODE:"",SEALFLAG:"",SEALNUM:"",OPERATETYPE:"1",G_tellerno:"",branch:"",p_workdate:"",p_worktime:""},this.CommCode="PLEVoucher",this.SceneCode="UpdEVouMod",this.TransServiceCode="mg-afaservices-paperless/templateManagement"},c=function e(){l()(this,e),this.data={},this.OpType="",this.Ip="",this.FileNm="",this.FileNm1="",this.TransServiceCode="ib-fileserver/upFileToJS"},g={data:function(){return{currentRow:[],subTableData:[],subDataArr:[],uploadData:{destDir:"/aase/upload/"},pickerEffeDate1:p.c,loading:!1,sealAllIsAble:!0,seal1IsAble:!1,seal2IsAble:!1,seal3IsAble:!0,signAllIsAble:!1,sign1IsAble:!1,sign2IsAble:!1,VOUSTYLE:"",fileUrl:"",urlAddress:"",uploadFileName:"",tureFileName:"",tureFileFullName:"",form:{filename:!1,VOUMODELID:"",VOUMODELDESC:"",STARTDATE:"",VOUIMGNAME:"",paper1:"180",paper2:"20",paper3:"120",paper4:"0",seal1:"0",seal2:"",seal3:"",seal4:"",seal5:"40",seal6:"0",seal7:"40",seal8:"0",sign1:"1",sign2:"",sign3:"",sign4:"",sign5:"40",sign6:"0",sign7:"40",sign8:"0"},dialogList:{elecdocTemplate:m},dialogOption:{isShow:!1},rules:{VOUMODELDESC:[{required:!0,message:"文字描述不能为空",trigger:"blur"},{validator:Object(p.h)(200),trigger:"blur"}],STARTDATE:[{required:!0,message:"请输入生效日期",trigger:"change"}],VOUIMGNAME:[{required:!0,validator:function(e,a,t){!1===a?t(new Error("请选择上传文件")):t()},trigger:"change"}],paper1:[{required:!0,message:"请选择纸张宽度",trigger:"blur"}],paper2:[{required:!0,message:"请选择文字区域横向位移",trigger:"blur"}],paper3:[{required:!0,message:"请选择纸张高度",trigger:"blur"}],paper4:[{required:!0,message:"请选择文字区域纵向位移",trigger:"blur"}],sign1:[{required:!0,message:"请选择签名设置",trigger:"change"}],seal3:[{validator:Object(p.h)(20),trigger:"blur"}],sign3:[{validator:Object(p.h)(20),trigger:"blur"}]},tureOrFalse:[{value:"0",label:"否"},{value:"1",label:"是"}],positionType:[{value:"0",label:"文字"},{value:"1",label:"坐标"}],appearTimes:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"}],absFilePath:"",remoteAFAFilePath:"",plTemplateIp:""}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},created:function(){var e=this;this.$nextTick(function(){e.fileUrl=i.a.get("uploadFileToABSAddress"),e.plTemplateIp=i.a.get("plTemplateIp"),e.absFilePath=i.a.get("absFilePath"),e.remoteAFAFilePath=i.a.get("remoteAFAFilePath")})},mounted:function(){},methods:{itemAdd:function(){var e=this;this.loading=!0;var a=new f;a.data.VOUMODELTYPE="01",a.data.VOUMODELDESC=this.form.VOUMODELDESC,a.data.CHANELCODE="066",a.data.STARTDATE=this.form.STARTDATE,a.data.VOUIMGNAME=this.uploadFileName,a.data.VOUSTYLE=this.VOUSTYLE,a.data.SEALFLAG=this.subTableData.length>0?1:0,a.data.SEALNUM=this.subDataArr.length,a.data.tellerno=this.$store.getters.UserNum,a.data.branch=this.$store.getters.BranchNum,a.data.p_workdate=this.formatDateForResponse(),a.data.p_worktime=this.formatTimeForResponse(),Object(s.a)(a).then(function(a){if("000000"===a.SYS_HEAD.ReturnCode){e.$emit("refreshTable"),e.isShow=!1;e.$aui.message.show({type:"success",message:"创建成功!"})}else e.$aui.message.show({type:"error",message:"请求失败，错误码:"+a.SYS_HEAD.ReturnCode+"，错误信息："+a.SYS_HEAD.ReturnMessage});e.loading=!1,e.isShow=!1}).catch(function(a){e.loading=!1})},itemShow:function(){this.dialogOption.isShow=!0,this.dialogOption.uploadFileName=this.uploadFileName,this.dialogOption.VOUSTYLE=this.VOUSTYLE},itemAddBefore:function(e){var a=this;this.$refs.form.validate(function(t){if(!t)return a.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;if(a.checkData())if(a.calcData(),0==e)a.itemShow();else if(1==e){if(!a.sealAdd(3))return;a.itemAdd()}})},calcData:function(){var e="{";e+='"pdf":"false|200||false|'+this.form.paper1+"#"+this.form.paper3+'",',e+='"print_data_location":"'+this.form.paper2+"#"+this.form.paper4+'",',"1"==this.form.sign1?e+='"sign_image":"[&"'+this.form.sign8+"#"+this.form.sign6+"|"+this.form.sign5+"#"+this.form.sign7+"|||"+this.form.sign2+"|"+this.form.sign4+"#"+this.form.sign3+'&"]",':e+='"sign_image":"[]",',e+='"temp_image":"0#0|'+this.form.paper1+"#"+this.form.paper3+"|"+this.uploadFileName+'",';var a="";if(this.subDataArr.length>0){for(var t=0;t<this.subDataArr.length;t++)a+='&"'+this.subDataArr[t].seal8+"#"+this.subDataArr[t].seal6+"|"+this.subDataArr[t].seal5+"#"+this.subDataArr[t].seal7+"|||"+this.subDataArr[t].seal2+"|"+this.subDataArr[t].seal4+"#"+this.subDataArr[t].seal3+'&",';a=a.substring(0,a.length-1)}e+='"seal_image":"['+a+']"}',this.VOUSTYLE=e},checkData:function(){if(null==this.uploadFileName||""==this.uploadFileName)return this.$aui.message.show({type:"warning",message:"请上传模板图片！"}),!1;if("1"==this.form.sign1){if(void 0==this.form.sign2||""==this.form.sign2)return this.$aui.message.show({type:"warning",message:"请选择签名定位方式！"}),!1;if("1"==this.form.sign2){if(void 0==this.form.sign5||""==this.form.sign5)return this.$aui.message.show({type:"warning",message:"请输入签名区域宽度！"}),!1;if(void 0==this.form.sign7||""==this.form.sign7)return this.$aui.message.show({type:"warning",message:"请输入签名区域高度！"}),!1;void 0!=this.form.sign6&&""!=this.form.sign6||(this.form.sign6="0"),void 0!=this.form.sign8&&""!=this.form.sign8||(this.form.sign8="0")}else{if(void 0==this.form.sign3||""==this.form.sign3)return this.$aui.message.show({type:"warning",message:"请输入签名定位文本！"}),!1;if(void 0==this.form.sign4||""==this.form.sign4)return this.$aui.message.show({type:"warning",message:"请选择签名出现次数！"}),!1}}return!0},sealChange1:function(){"1"==this.form.seal1?(this.sealAllIsAble=!1,this.seal1IsAble=!1,this.seal2IsAble=!1):(this.sealAllIsAble=!0,this.seal1IsAble=!0,this.seal2IsAble=!0,this.subDataArr=[],this.form.seal2="",this.form.seal3="",this.form.seal4="",this.form.seal6="0",this.form.seal8="0"),this.$nextTick(function(){})},sealChange2:function(){"0"==this.form.seal2?(this.seal1IsAble=!1,this.seal2IsAble=!0,this.form.seal6="0",this.form.seal8="0"):(this.form.seal3="",this.form.seal4="",this.form.seal6="55",this.form.seal8="50",this.seal1IsAble=!0,this.seal2IsAble=!1),this.$nextTick(function(){})},signChange1:function(){"1"==this.form.sign1?(this.signAllIsAble=!1,this.sign1IsAble=!1,this.sign2IsAble=!1):(this.signAllIsAble=!0,this.sign1IsAble=!0,this.sign2IsAble=!0,this.form.sign6="0",this.form.sign8="0",this.form.sign2=""),this.$nextTick(function(){})},signChange2:function(){"0"==this.form.sign2?(this.sign1IsAble=!1,this.sign2IsAble=!0,this.form.sign6="0",this.form.sign8="0"):(this.form.sign3="",this.form.sign4="",this.sign1IsAble=!0,this.sign2IsAble=!1),this.$nextTick(function(){})},sealAdd:function(e){if("1"!=this.form.seal1)return!0;if(void 0!=this.form.seal2&&""!=this.form.seal2){if("1"==this.form.seal2){if(void 0==this.form.seal5||""==this.form.seal5)return this.$aui.message.show({type:"warning",message:"请输入印章区域宽度！"}),!1;if(void 0==this.form.seal7||""==this.form.seal7)return this.$aui.message.show({type:"warning",message:"请输入印章区域高度！"}),!1;void 0!=this.form.seal6&&""!=this.form.seal6||(this.form.seal6="0"),void 0!=this.form.seal8&&""!=this.form.seal8||(this.form.seal8="0")}else{if(void 0==this.form.seal3||""==this.form.seal3)return this.$aui.message.show({type:"warning",message:"请输入印章定位文本！"}),!1;if(void 0==this.form.seal4||""==this.form.seal4)return this.$aui.message.show({type:"warning",message:"请选择印章出现次数！"}),!1}var a={};if("1"==this.form.seal2?(a.seal2="1",a.seal3="",a.seal4="",a.seal5=this.form.seal5,a.seal6=this.form.seal6,a.seal7=this.form.seal7,a.seal8=this.form.seal8):(a.seal2="0",a.seal3=this.form.seal3,a.seal4=this.form.seal4,a.seal5=this.form.seal5,a.seal6=this.form.seal6,a.seal7=this.form.seal7,a.seal8=this.form.seal8),1==e){a.pk=this.currentRow.pk;var t=this.sealArrGetObjIndex(this.currentRow.pk);this.subDataArr[t]=a,this.$set(this.subTableData,t,a)}else if(0==e){if(this.subDataArr.length>=5)return this.$aui.message.show({type:"warning",message:"超出允许的最大印章数量！"}),!1;a.pk=h.a.getUUID(),this.subDataArr[this.subDataArr.length]=a,this.$set(this.subTableData,this.subTableData.length,a)}else if(3==e&&this.subTableData.length<=0)return this.$aui.message.show({type:"warning",message:"请选择【添加印章】增加印章！"}),!1;return!0}this.$aui.message.show({type:"warning",message:"请选择印章定位方式！"})},sealDel:function(){this.subDataArr.splice(this.sealArrGetObjIndex(this.currentRow.pk),1),this.subTableData.splice(this.sealArrGetObjIndex(this.currentRow.pk),1)},sealArrGetObjIndex:function(e){var a=-1;if(this.subDataArr.length>0)for(var t=0;t<this.subDataArr.length;t++)if(this.subDataArr[t].pk==e){a=t;break}return a},handleCurrentChange:function(e){this.currentRow=e[0],1==e.length?(this.seal3IsAble=!1,this.form.seal2=this.currentRow.seal2,"1"==this.currentRow.seal2?(this.form.seal3="",this.form.seal4="",this.seal1IsAble=!0,this.seal2IsAble=!1,this.form.seal5=this.currentRow.seal5,this.form.seal6=this.currentRow.seal6,this.form.seal7=this.currentRow.seal7,this.form.seal8=this.currentRow.seal8):(this.seal1IsAble=!1,this.seal2IsAble=!0,this.form.seal3=this.currentRow.seal3,this.form.seal4=this.currentRow.seal4,this.form.seal5="40",this.form.seal6="0",this.form.seal7="30",this.form.seal8="0")):this.seal3IsAble=!0},handleExceed:function(e,a){this.$aui.message.show.warning("只能上传一个文件！")},successCallback:function(e,a,t){var i=this;this.loading=!0;var r=new c;r.OpType="1",r.Ip=this.plTemplateIp,r.FileNm=this.absFilePath+a.name,r.FileNm1=this.remoteAFAFilePath,Object(s.a)(r).then(function(e){i.loading=!1,i.$aui.message.show({type:"success",message:"上传文件成功！"})}).catch(function(e){i.loading=!1,"0"==e.SYS_HEAD.ReturnCode?i.$aui.message.show({type:"success",message:"上传文件成功！"}):i.$aui.message.show({type:"error",message:"请求失败，错误码:"+e.SYS_HEAD.ReturnCode+"，错误信息："+e.SYS_HEAD.ReturnMessage})})},delfile:function(){this.form.filename=!1},fileChange:function(e,a){if(this.uploadFileName=e.name,!(this.uploadFileName.endsWith(".jpg")||this.uploadFileName.endsWith(".jpeg")||this.uploadFileName.endsWith(".png")||this.uploadFileName.endsWith(".bmp")||this.uploadFileName.endsWith(".pdf")))return this.$aui.message.show({type:"warning",message:"附件名称或格式错误！!"}),this.$refs.upload.clearFiles(),this.uploadFileName=null,!1;this.$refs.upload.submit()},initData:function(){this.subTableData=[],this.tureFileFullName="附件上传，支持.jpg,.jpeg,.png,.bmp,.pdf格式文件，最大2M"},closeDialog:function(){this.form.filename=!1,this.$refs.upload.clearFiles(),this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.subDataArr=[]},dataFormat1:function(e,a){for(var t=0;t<this.positionType.length;t++)if(this.positionType[t].value==e[a.property])return this.positionType[t].value+"-"+this.positionType[t].label},formatDateForResponse:function(){var e=new Date,a=e.getFullYear()+"",t=e.getMonth()+1+"",s=e.getDate()+"";return a+(t=t.length<2?0+t:t)+(s=s.length<2?0+s:s)},formatTimeForResponse:function(){var e=new Date,a=String(e.getHours()),t=String(e.getMinutes()),s=String(e.getSeconds());return a=a.length<2?"0"+a:a,t=t.length<2?"0"+t:t,s=s.length<2?"0"+s:s,(a=a.length<2?0+a:a)+t+(s=s.length<2?0+s:s)}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("aui-dialog",{attrs:{title:"电子凭证模板创建",visible:e.isShow,rules:e.rules,width:"1200px"},on:{"update:visible":function(a){e.isShow=a},show:e.initData,hide:e.closeDialog}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("aui-card",[t("aui-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules,"label-width":"140px","label-position":"right"}},[t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"电子凭证模板编号:",prop:"VOUMODELID"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.form.VOUMODELID,callback:function(a){e.$set(e.form,"VOUMODELID",a)},expression:"form.VOUMODELID"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"电子凭证模板名称:",prop:"VOUMODELDESC"}},[t("aui-input",{model:{value:e.form.VOUMODELDESC,callback:function(a){e.$set(e.form,"VOUMODELDESC",a)},expression:"form.VOUMODELDESC"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"生效日期:",prop:"STARTDATE"}},[t("aui-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"生效日期","picker-options":e.pickerEffeDate1},model:{value:e.form.STARTDATE,callback:function(a){e.$set(e.form,"STARTDATE",a)},expression:"form.STARTDATE"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"模板图片路径:",prop:"filename"}},[t("aui-upload",{ref:"upload",attrs:{action:e.fileUrl,"on-change":e.fileChange,limit:1,"on-exceed":e.handleExceed,data:e.uploadData,"on-success":e.successCallback,"on-remove":e.delfile,accept:".jpg,.jpeg,.png,.bmp,.pdf","auto-upload":!1}},[t("aui-button",{attrs:{size:"mini",plain:"",type:"primary"}},[e._v("选择上传文件")])],1),e._v(" "),t("aui-input",{attrs:{disabled:""},model:{value:e.tureFileFullName,callback:function(a){e.tureFileFullName=a},expression:"tureFileFullName"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"纸张宽度:",prop:"paper1"}},[t("aui-input-number",{attrs:{min:1,max:9999},model:{value:e.form.paper1,callback:function(a){e.$set(e.form,"paper1",a)},expression:"form.paper1"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"文字区域横向位移:",prop:"paper2"}},[t("aui-input-number",{attrs:{min:-999,max:999},model:{value:e.form.paper2,callback:function(a){e.$set(e.form,"paper2",a)},expression:"form.paper2"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"纸张高度:",prop:"paper3"}},[t("aui-input-number",{attrs:{min:1,max:9999},model:{value:e.form.paper3,callback:function(a){e.$set(e.form,"paper3",a)},expression:"form.paper3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"文字区域纵向位移:",prop:"paper4"}},[t("aui-input-number",{attrs:{min:-999,max:999},model:{value:e.form.paper4,callback:function(a){e.$set(e.form,"paper4",a)},expression:"form.paper4"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"增加印章:",prop:"seal1"}},[t("aui-select",{attrs:{filterable:""},on:{change:e.sealChange1},model:{value:e.form.seal1,callback:function(a){e.$set(e.form,"seal1",a)},expression:"form.seal1"}},e._l(e.tureOrFalse,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位方式:",prop:"seal2"}},[t("aui-select",{attrs:{disabled:e.sealAllIsAble,filterable:""},on:{change:e.sealChange2},model:{value:e.form.seal2,callback:function(a){e.$set(e.form,"seal2",a)},expression:"form.seal2"}},e._l(e.positionType,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位文本:",prop:"seal3"}},[t("aui-input",{attrs:{disabled:e.seal1IsAble},model:{value:e.form.seal3,callback:function(a){e.$set(e.form,"seal3",a)},expression:"form.seal3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"出现次数:",prop:"seal4"}},[t("aui-select",{attrs:{disabled:e.seal1IsAble,filterable:""},model:{value:e.form.seal4,callback:function(a){e.$set(e.form,"seal4",a)},expression:"form.seal4"}},e._l(e.appearTimes,function(e){return t("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域宽度:",prop:"seal5"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal5,callback:function(a){e.$set(e.form,"seal5",a)},expression:"form.seal5"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域横向位移:",prop:"seal6"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal6,callback:function(a){e.$set(e.form,"seal6",a)},expression:"form.seal6"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域高度:",prop:"seal7"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal7,callback:function(a){e.$set(e.form,"seal7",a)},expression:"form.seal7"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域纵向位移:",prop:"seal8"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal8,callback:function(a){e.$set(e.form,"seal8",a)},expression:"form.seal8"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:4}}),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.sealAllIsAble},on:{click:function(a){e.sealAdd(0)}}},[e._v("添加印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.seal3IsAble},on:{click:e.sealDel}},[e._v("删除印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.seal3IsAble},on:{click:function(a){e.sealAdd(1)}}},[e._v("修改印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}})],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:24}},[t("aui-table",{ref:"table",staticStyle:{"min-height":"140px"},attrs:{data:e.subTableData,border:"","highlight-current-row":""},on:{"selection-change":e.handleCurrentChange}},[t("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),e._e(),e._v(" "),t("aui-table-column",{attrs:{prop:"seal2",formatter:e.dataFormat1,label:"定位方式"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal5",label:"印章区域宽度"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal7",label:"印章区域高度"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal6",label:"印章区域横向位移"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal8",label:"印章区域纵向位移"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal3",label:"印章定位文本"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal4",label:"出现次数"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"增加签名:",prop:"sign1"}},[t("aui-select",{attrs:{filterable:""},on:{change:e.signChange1},model:{value:e.form.sign1,callback:function(a){e.$set(e.form,"sign1",a)},expression:"form.sign1"}},e._l(e.tureOrFalse,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位方式:",prop:"sign2"}},[t("aui-select",{attrs:{disabled:e.signAllIsAble,filterable:""},on:{change:e.signChange2},model:{value:e.form.sign2,callback:function(a){e.$set(e.form,"sign2",a)},expression:"form.sign2"}},e._l(e.positionType,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位文本:",prop:"sign3"}},[t("aui-input",{attrs:{disabled:e.sign1IsAble},model:{value:e.form.sign3,callback:function(a){e.$set(e.form,"sign3",a)},expression:"form.sign3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"出现次数:",prop:"sign4"}},[t("aui-select",{attrs:{disabled:e.sign1IsAble,filterable:""},model:{value:e.form.sign4,callback:function(a){e.$set(e.form,"sign4",a)},expression:"form.sign4"}},e._l(e.appearTimes,function(e){return t("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域宽度:",prop:"sign5"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign5,callback:function(a){e.$set(e.form,"sign5",a)},expression:"form.sign5"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域横向位移:",prop:"sign6"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign6,callback:function(a){e.$set(e.form,"sign6",a)},expression:"form.sign6"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域高度:",prop:"sign7"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign7,callback:function(a){e.$set(e.form,"sign7",a)},expression:"form.sign7"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域纵向位移:",prop:"sign8"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign8,callback:function(a){e.$set(e.form,"sign8",a)},expression:"form.sign8"}})],1)],1)],1)],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.option.isShow=!1}}},[e._v("返回")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.itemAddBefore(0)}}},[e._v("预览")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.itemAddBefore(1)}}},[e._v("确定")])],1)],1)]),e._v(" "),t("keep-alive",[t(e.dialogList.elecdocTemplate,{tag:"component",attrs:{createData:e.dialogOption}})],1)],1)},staticRenderFns:[]};var b=t("/Xao")(g,d,!1,function(e){t("ePam")},null,null).exports,v=function e(){l()(this,e),this.data={VOUSTYLE:"",VOUMODELDESC:"",STARTDATE:"",VOUIMGNAME:"",CHANELCODE:"",SEALFLAG:"",SEALNUM:"",OPERATETYPE:"2",CRTELLER:"",CRTDATE:"",VOUMODELTYPE:"",VOUMODELID:"",G_tellerno:"",branch:"",p_workdate:"",p_worktime:""},this.CommCode="PLEVoucher",this.SceneCode="UpdEVouMod",this.TransServiceCode="mg-afaservices-paperless/templateManagement"},A={data:function(){return{currentRow:[],subTableData:[],subDataArr:[],loading:!1,pickerEffeDate1:p.c,sealAllIsAble:!1,seal1IsAble:!1,seal2IsAble:!1,seal3IsAble:!0,signAllIsAble:!1,sign1IsAble:!1,sign2IsAble:!1,VOUSTYLE:"",form:{VOUMODELID:"",VOUMODELDESC:"",STARTDATE:"",VOUIMGNAME:"",paper1:"210",paper2:"0",paper3:"297",paper4:"0",seal1:"0",seal2:"",seal3:"",seal4:"",seal5:"40",seal6:"0",seal7:"30",seal8:"0",sign1:"1",sign2:"",sign3:"",sign4:"",sign5:"40",sign6:"0",sign7:"30",sign8:"0"},dialogList:{elecdocTemplate:m},dialogOption:{isShow:!1},rules:{VOUMODELDESC:[{required:!0,message:"文字描述不能为空",trigger:"blur"},{validator:Object(p.h)(200),trigger:"blur"}],STARTDATE:[{required:!0,message:"请输入生效日期",trigger:"change"}],VOUIMGNAME:[{required:!0,message:"模板图片路径不能为空",trigger:"blur"}],paper1:[{required:!0,message:"请选择纸张宽度",trigger:"blur"}],paper2:[{required:!0,message:"请选择文字区域横向位移",trigger:"blur"}],paper3:[{required:!0,message:"请选择纸张高度",trigger:"blur"}],paper4:[{required:!0,message:"请选择文字区域纵向位移",trigger:"blur"}],sign1:[{required:!0,message:"请选择签名设置",trigger:"change"}],seal3:[{validator:Object(p.h)(20),trigger:"blur"}],sign3:[{validator:Object(p.h)(20),trigger:"blur"}]},tureOrFalse:[{value:"0",label:"否"},{value:"1",label:"是"}],positionType:[{value:"0",label:"文字"},{value:"1",label:"坐标"}],appearTimes:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"}]}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},created:function(){},mounted:function(){},methods:{itemAdd:function(){var e=this;this.loading=!0;var a=new v;a.data.VOUMODELID=this.option.currentRow.VOUMODELID,a.data.VOUMODELDESC=this.form.VOUMODELDESC,a.data.STARTDATE=this.form.STARTDATE,a.data.CHANELCODE=this.option.currentRow.CHANELCODE,a.data.VOUIMGNAME=this.form.VOUIMGNAME,a.data.VOUSTYLE=this.VOUSTYLE,a.data.VOUMODELTYPE=this.option.currentRow.VOUMODELTYPE,a.data.CRTDATE=this.option.currentRow.CRTDATE,a.data.CRTELLER=this.option.currentRow.CRTELLER,a.data.SEALFLAG=this.subTableData.length>0?1:0,a.data.SEALNUM=this.subDataArr.length,a.data.G_tellerno=this.$store.getters.UserNum,a.data.branch=this.$store.getters.BranchNum,a.data.p_workdate=this.formatDateForResponse(),a.data.p_worktime=this.formatTimeForResponse(),Object(s.a)(a).then(function(a){e.$emit("refreshTable"),e.isShow=!1;e.$aui.message.show({type:"success",message:"修改成功!"}),e.loading=!1,e.isShow=!1}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+a.SYS_HEAD.ReturnCode+"，错误信息："+a.SYS_HEAD.ReturnMessage}),e.isShow=!1})},itemShow:function(){this.dialogOption.isShow=!0,this.dialogOption.uploadFileName=this.form.VOUIMGNAME,this.dialogOption.VOUSTYLE=this.VOUSTYLE},itemAddBefore:function(e){var a=this;this.$refs.form.validate(function(t){if(!t)return a.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;if(a.checkData())if(a.calcData(),0==e)a.itemShow();else if(1==e){if(!a.sealAdd(3))return;a.itemAdd()}})},calcData:function(){var e="{";e+='"pdf":"false|200||false|'+this.form.paper1+"#"+this.form.paper3+'",',e+='"print_data_location":"'+this.form.paper2+"#"+this.form.paper4+'",',"1"==this.form.sign1?e+='"sign_image":"[&"'+this.form.sign8+"#"+this.form.sign6+"|"+this.form.sign5+"#"+this.form.sign7+"|||"+this.form.sign2+"|"+this.form.sign4+"#"+this.form.sign3+'&"]",':e+='"sign_image":"[]",',e+='"temp_image":"0#0|'+this.form.paper1+"#"+this.form.paper3+"|"+this.option.currentRow.CHANELCODE+"_"+this.form.VOUIMGNAME+'",';var a="";if(this.subDataArr.length>0){for(var t=0;t<this.subDataArr.length;t++)a+='&"'+this.subDataArr[t].seal8+"#"+this.subDataArr[t].seal6+"|"+this.subDataArr[t].seal5+"#"+this.subDataArr[t].seal7+"|||"+this.subDataArr[t].seal2+"|"+this.subDataArr[t].seal4+"#"+this.subDataArr[t].seal3+'&",';a=a.substring(0,a.length-1)}e+='"seal_image":"['+a+']"}',this.VOUSTYLE=e},checkData:function(){if("1"==this.form.sign1){if(void 0==this.form.sign2||""==this.form.sign2)return this.$aui.message.show({type:"warning",message:"请选择签名定位方式！"}),!1;if("1"==this.form.sign2){if(void 0==this.form.sign5||""==this.form.sign5)return this.$aui.message.show({type:"warning",message:"请输入签名区域宽度！"}),!1;if(void 0==this.form.sign7||""==this.form.sign7)return this.$aui.message.show({type:"warning",message:"请输入签名区域高度！"}),!1;void 0!=this.form.sign6&&""!=this.form.sign6||(this.form.sign6="0"),void 0!=this.form.sign8&&""!=this.form.sign8||(this.form.sign8="0")}else{if(void 0==this.form.sign3||""==this.form.sign3)return this.$aui.message.show({type:"warning",message:"请输入签名定位文本！"}),!1;if(void 0==this.form.sign4||""==this.form.sign4)return this.$aui.message.show({type:"warning",message:"请选择签名出现次数！"}),!1}}return!0},sealChange1:function(){"1"==this.form.seal1?(this.sealAllIsAble=!1,this.seal1IsAble=!1,this.seal2IsAble=!1):(this.sealAllIsAble=!0,this.seal1IsAble=!0,this.seal2IsAble=!0,this.subDataArr=[],this.form.seal2="",this.form.seal3="",this.form.seal4="",this.form.seal6="0",this.form.seal8="0"),this.$nextTick(function(){})},sealChange2:function(){"0"==this.form.seal2?(this.seal1IsAble=!1,this.seal2IsAble=!0):(this.form.seal3="",this.form.seal4="",this.seal1IsAble=!0,this.seal2IsAble=!1),this.$nextTick(function(){})},signChange1:function(){"1"==this.form.sign1?(this.signAllIsAble=!1,this.sign1IsAble=!1,this.sign2IsAble=!1):(this.signAllIsAble=!0,this.sign1IsAble=!0,this.sign2IsAble=!0,this.form.sign2="",this.form.sign6="0",this.form.sign8="0"),this.$nextTick(function(){})},signChange2:function(){"0"==this.form.sign2?(this.sign1IsAble=!1,this.sign2IsAble=!0,this.form.sign6="0",this.form.sign8="0"):(this.form.sign3="",this.form.sign4="",this.sign1IsAble=!0,this.sign2IsAble=!1),this.$nextTick(function(){})},sealAdd:function(e){if("1"!=this.form.seal1)return!0;if(void 0!=this.form.seal2&&""!=this.form.seal2){if("1"==this.form.seal2){if(void 0==this.form.seal5||""==this.form.seal5)return this.$aui.message.show({type:"warning",message:"请输入印章区域宽度！"}),!1;if(void 0==this.form.seal7||""==this.form.seal7)return this.$aui.message.show({type:"warning",message:"请输入印章区域高度！"}),!1;void 0!=this.form.seal6&&""!=this.form.seal6||(this.form.seal6="0"),void 0!=this.form.seal8&&""!=this.form.seal8||(this.form.seal8="0")}else{if(void 0==this.form.seal3||""==this.form.seal3)return this.$aui.message.show({type:"warning",message:"请输入印章定位文本！"}),!1;if(void 0==this.form.seal4||""==this.form.seal4)return this.$aui.message.show({type:"warning",message:"请选择印章出现次数！"}),!1}var a={};if("1"==this.form.seal2?(a.seal2="1",a.seal3="",a.seal4="",a.seal5=this.form.seal5,a.seal6=this.form.seal6,a.seal7=this.form.seal7,a.seal8=this.form.seal8):(a.seal2="0",a.seal3=this.form.seal3,a.seal4=this.form.seal4,a.seal5=this.form.seal5,a.seal6=this.form.seal6,a.seal7=this.form.seal7,a.seal8=this.form.seal8),1==e){a.pk=this.currentRow.pk;var t=this.sealArrGetObjIndex(this.currentRow.pk);this.subDataArr[t]=a,this.$set(this.subTableData,t,a)}else if(0==e){if(this.subDataArr.length>=5)return this.$aui.message.show({type:"warning",message:"超出允许的最大印章数量！"}),!1;a.pk=this.formatTimeForResponse(),this.subDataArr[this.subDataArr.length]=a,this.$set(this.subTableData,this.subTableData.length,a)}else if(3==e&&this.subTableData.length<=0)return this.$aui.message.show({type:"warning",message:"请选择【添加印章】增加印章！"}),!1;return!0}this.$aui.message.show({type:"warning",message:"请选择印章定位方式！"})},sealDel:function(){this.subDataArr.splice(this.sealArrGetObjIndex(this.currentRow.pk),1),this.subTableData.splice(this.sealArrGetObjIndex(this.currentRow.pk),1)},sealArrGetObjIndex:function(e){var a=-1;if(this.subDataArr.length>0)for(var t=0;t<this.subDataArr.length;t++)if(this.subDataArr[t].pk==e){a=t;break}return a},handleCurrentChange:function(e){this.currentRow=e[0],1==e.length?(this.seal3IsAble=!1,this.form.seal2=this.currentRow.seal2,"1"==this.currentRow.seal2?(this.form.seal3="",this.form.seal4="",this.seal1IsAble=!0,this.seal2IsAble=!1,this.form.seal5=this.currentRow.seal5,this.form.seal6=this.currentRow.seal6,this.form.seal7=this.currentRow.seal7,this.form.seal8=this.currentRow.seal8):(this.seal1IsAble=!1,this.seal2IsAble=!0,this.form.seal3=this.currentRow.seal3,this.form.seal4=this.currentRow.seal4,this.form.seal5="40",this.form.seal6="0",this.form.seal7="30",this.form.seal8="0")):this.seal3IsAble=!0},initData:function(){var e=this.option.currentRow;this.form.VOUMODELID=e.VOUMODELID,this.form.VOUMODELDESC=e.VOUMODELDESC,this.form.VOUIMGNAME=e.VOUIMGNAME,this.form.STARTDATE=e.STARTDATE;var a=JSON.parse(e.VOUSTYLE.replace(/&"/g,""));if(void 0!=a){var t=a.pdf;if((t=t.substring(t.lastIndexOf("|")+1)).indexOf("#")>0){var s=t.split("#");this.form.paper1=s[0],this.form.paper3=s[1]}if((t=a.print_data_location).indexOf("#")>0){var i=t.split("#");this.form.paper2=i[0],this.form.paper4=i[1]}var r=(t=a.sign_image.replace("[","").replace("]","")).substring(0,t.indexOf("|"));if(r.indexOf("#")>0){this.form.sign1="1";var l=r.split("#");this.form.sign8=l[0],this.form.sign6=l[1]}else this.form.sign1="0";if((r=(r=t.substring(t.indexOf("|")+1)).substring(0,r.indexOf("|"))).indexOf("#")>0){var o=r.split("#");this.form.sign5=o[0],this.form.sign7=o[1]}if(r=(r=t.substring(t.indexOf("|||")+3)).substring(0,r.indexOf("|")),this.form.sign2=r,this.signChange2(),(r=t.substring(t.lastIndexOf("|")+1)).indexOf("#")>0){var n=r.split("#");""!=n[0]&&(this.form.sign3=n[0]),""!=n[1]&&(this.form.sign4=n[1])}console.log(a);var u=a.seal_image.replace("[","").replace("]","");if(""==u)this.form.seal1="0";else{this.form.seal1="1",this.subDataArr=[],this.subTableData=[];for(var m=u.split(","),p=0;p<m.length;p++){var h={},f=(t=m[p]).substring(0,t.indexOf("|"));if(f.indexOf("#")>0){var c=f.split("#");h.seal8=c[0],h.seal6=c[1]}if((f=(f=t.substring(t.indexOf("|")+1)).substring(0,f.indexOf("|"))).indexOf("#")>0){var g=f.split("#");h.seal5=g[0],h.seal7=g[1]}if(f=(f=t.substring(t.indexOf("|||")+3)).substring(0,f.indexOf("|")),h.seal2=f,(f=t.substring(t.lastIndexOf("|")+1)).indexOf("#")>0){var d=f.split("#");""!=d[0]&&(h.seal4=d[0]),""!=d[1]&&(h.seal3=d[1])}else h.seal3="",h.seal4="";h.pk=this.formatTimeForResponse()+p,this.subDataArr[this.subDataArr.length]=h,this.$set(this.subTableData,this.subTableData.length,h)}}}},closeDialog:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.subDataArr=[]},dataFormat1:function(e,a){for(var t=0;t<this.positionType.length;t++)if(this.positionType[t].value==e[a.property])return this.positionType[t].value+"-"+this.positionType[t].label},formatDateForResponse:function(){var e=new Date,a=e.getFullYear()+"",t=e.getMonth()+1+"",s=e.getDate()+"";return a+(t=t.length<2?0+t:t)+(s=s.length<2?0+s:s)},formatTimeForResponse:function(){var e=new Date,a=String(e.getHours()),t=String(e.getMinutes()),s=String(e.getSeconds());return a=a.length<2?"0"+a:a,t=t.length<2?"0"+t:t,s=s.length<2?"0"+s:s,(a=a.length<2?0+a:a)+t+(s=s.length<2?0+s:s)}}},D={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("aui-dialog",{attrs:{title:"电子凭证模板修改",visible:e.isShow,rules:e.rules,width:"1200px"},on:{"update:visible":function(a){e.isShow=a},show:e.initData,hide:e.closeDialog}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("aui-card",[t("aui-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules,"label-width":"140px","label-position":"right"}},[t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"电子凭证模板编号:",prop:"VOUMODELID"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.form.VOUMODELID,callback:function(a){e.$set(e.form,"VOUMODELID",a)},expression:"form.VOUMODELID"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"电子凭证模板名称:",prop:"VOUMODELDESC"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.form.VOUMODELDESC,callback:function(a){e.$set(e.form,"VOUMODELDESC",a)},expression:"form.VOUMODELDESC"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"生效日期:",prop:"STARTDATE"}},[t("aui-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"生效日期","picker-options":e.pickerEffeDate1},model:{value:e.form.STARTDATE,callback:function(a){e.$set(e.form,"STARTDATE",a)},expression:"form.STARTDATE"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"模板图片路径:",prop:"VOUIMGNAME"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.form.VOUIMGNAME,callback:function(a){e.$set(e.form,"VOUIMGNAME",a)},expression:"form.VOUIMGNAME"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"纸张宽度:",prop:"paper1"}},[t("aui-input-number",{attrs:{min:1,max:9999},model:{value:e.form.paper1,callback:function(a){e.$set(e.form,"paper1",a)},expression:"form.paper1"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"文字区域横向位移:",prop:"paper2"}},[t("aui-input-number",{attrs:{min:-999,max:999},model:{value:e.form.paper2,callback:function(a){e.$set(e.form,"paper2",a)},expression:"form.paper2"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"纸张高度:",prop:"paper3"}},[t("aui-input-number",{attrs:{min:1,max:9999},model:{value:e.form.paper3,callback:function(a){e.$set(e.form,"paper3",a)},expression:"form.paper3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"文字区域纵向位移:",prop:"paper4"}},[t("aui-input-number",{attrs:{min:-999,max:999},model:{value:e.form.paper4,callback:function(a){e.$set(e.form,"paper4",a)},expression:"form.paper4"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"增加印章:",prop:"seal1"}},[t("aui-select",{attrs:{filterable:""},on:{change:e.sealChange1},model:{value:e.form.seal1,callback:function(a){e.$set(e.form,"seal1",a)},expression:"form.seal1"}},e._l(e.tureOrFalse,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位方式:",prop:"seal2"}},[t("aui-select",{attrs:{disabled:e.sealAllIsAble,filterable:""},on:{change:e.sealChange2},model:{value:e.form.seal2,callback:function(a){e.$set(e.form,"seal2",a)},expression:"form.seal2"}},e._l(e.positionType,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位文本:",prop:"seal3"}},[t("aui-input",{attrs:{disabled:e.seal1IsAble},model:{value:e.form.seal3,callback:function(a){e.$set(e.form,"seal3",a)},expression:"form.seal3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"出现次数:",prop:"seal4"}},[t("aui-select",{attrs:{disabled:e.seal1IsAble,filterable:""},model:{value:e.form.seal4,callback:function(a){e.$set(e.form,"seal4",a)},expression:"form.seal4"}},e._l(e.appearTimes,function(e){return t("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域宽度:",prop:"seal5"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal5,callback:function(a){e.$set(e.form,"seal5",a)},expression:"form.seal5"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域横向位移:",prop:"seal6"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal6,callback:function(a){e.$set(e.form,"seal6",a)},expression:"form.seal6"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域高度:",prop:"seal7"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal7,callback:function(a){e.$set(e.form,"seal7",a)},expression:"form.seal7"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"印章区域纵向位移:",prop:"seal8"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.seal2IsAble},model:{value:e.form.seal8,callback:function(a){e.$set(e.form,"seal8",a)},expression:"form.seal8"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:4}}),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.sealAllIsAble},on:{click:function(a){e.sealAdd(0)}}},[e._v("添加印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.seal3IsAble},on:{click:e.sealDel}},[e._v("删除印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}},[t("aui-button",{attrs:{size:"mini",disabled:e.seal3IsAble},on:{click:function(a){e.sealAdd(1)}}},[e._v("修改印章")])],1),e._v(" "),t("aui-col",{attrs:{span:5}})],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:24}},[t("aui-table",{ref:"table",staticStyle:{"min-height":"140px"},attrs:{data:e.subTableData,border:"","highlight-current-row":""},on:{"selection-change":e.handleCurrentChange}},[t("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"pk",label:"主键"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal2",formatter:e.dataFormat1,label:"定位方式"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal5",label:"印章区域宽度"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal7",label:"印章区域高度"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal6",label:"印章区域横向位移"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal8",label:"印章区域纵向位移"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal3",label:"印章定位文本"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"seal4",label:"出现次数"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"增加签名:",prop:"sign1"}},[t("aui-select",{attrs:{filterable:""},on:{change:e.signChange1},model:{value:e.form.sign1,callback:function(a){e.$set(e.form,"sign1",a)},expression:"form.sign1"}},e._l(e.tureOrFalse,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位方式:",prop:"sign2"}},[t("aui-select",{attrs:{disabled:e.signAllIsAble,filterable:""},on:{change:e.signChange2},model:{value:e.form.sign2,callback:function(a){e.$set(e.form,"sign2",a)},expression:"form.sign2"}},e._l(e.positionType,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"定位文本:",prop:"sign3"}},[t("aui-input",{attrs:{disabled:e.sign1IsAble},model:{value:e.form.sign3,callback:function(a){e.$set(e.form,"sign3",a)},expression:"form.sign3"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:6}},[t("aui-form-item",{attrs:{label:"出现次数:",prop:"sign4"}},[t("aui-select",{attrs:{disabled:e.sign1IsAble,filterable:""},model:{value:e.form.sign4,callback:function(a){e.$set(e.form,"sign4",a)},expression:"form.sign4"}},e._l(e.appearTimes,function(e){return t("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域宽度:",prop:"sign5"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign5,callback:function(a){e.$set(e.form,"sign5",a)},expression:"form.sign5"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域横向位移:",prop:"sign6"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign6,callback:function(a){e.$set(e.form,"sign6",a)},expression:"form.sign6"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域高度:",prop:"sign7"}},[t("aui-input-number",{attrs:{min:1,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign7,callback:function(a){e.$set(e.form,"sign7",a)},expression:"form.sign7"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"签名区域纵向位移:",prop:"sign8"}},[t("aui-input-number",{attrs:{min:-999,max:999,disabled:e.sign2IsAble},model:{value:e.form.sign8,callback:function(a){e.$set(e.form,"sign8",a)},expression:"form.sign8"}})],1)],1)],1)],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.option.isShow=!1}}},[e._v("返回")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.itemAddBefore(0)}}},[e._v("预览")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.itemAddBefore(1)}}},[e._v("确定")])],1)],1)]),e._v(" "),t("keep-alive",[t(e.dialogList.elecdocTemplate,{tag:"component",attrs:{createData:e.dialogOption}})],1)],1)},staticRenderFns:[]};var E=t("/Xao")(A,D,!1,function(e){t("xHYi")},null,null).exports,w=function e(){l()(this,e),this.data={CHANELCODE:"",VOUMODELID:"",VOUMODELDESC:"",currpage:1,pagerownum:10,pageflag:4},this.CommCode="PLEVoucher",this.SceneCode="QryEVouMod",this.TransServiceCode="mg-afaservices-paperless/templateManagementQuery"},O=function e(){l()(this,e),this.data={CHANELCODE:"",VOUMODELTYPE:"",VOUMODELID:"",OPERATETYPE:"3",VOUMODELDESC:"",VOUIMGNAME:"",VOUSTYLE:"",SEALFLAG:"",SEALNUM:""},this.CommCode="PLEVoucher",this.SceneCode="UpdEVouMod",this.TransServiceCode="mg-afaservices-paperless/templateManagement"},T={data:function(){return{currentRow:[],tableData:[],QueryForm:{voumodelid:""},SEALFLAG:{0:"0-否",1:"1-是"},total:0,loading:!1,checkedPost:!1,dialogList:{elecdocTemplateAdd:b,elecdocTemplateUpdate:E,elecdocTemplate:m},dialogOptions:{isShow:!1},dialogUpdateOptions:{isShow:!1},dialogOption:{isShow:!1},currentPage:1,pageSize:void 0,VOUSTYLEData:""}},created:function(){this.pageSize=i.a.get("PageSize")},computed:{},methods:{dataFormat:function(e,a){return"SEALFLAG"==a.property?this.SEALFLAG[e[a.property]]:"SIGNFLAG"==a.property?"0"==e[a.property]?"0-否":"1-是":void 0},clickUpdate:function(){this.dialogUpdateOptions.isShow=!0,this.dialogUpdateOptions.currentRow=this.currentRow},clickDel:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该电子凭证模板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.sureDel()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},sureDel:function(){var e=this;this.loading=!0;var a=new O;a.data.CHANELCODE=this.currentRow.CHANELCODE,a.data.VOUMODELTYPE=this.currentRow.VOUMODELTYPE,a.data.VOUMODELID=this.currentRow.VOUMODELID,a.data.VOUMODELDESC=this.currentRow.VOUMODELDESC,a.data.VOUIMGNAME=this.currentRow.VOUIMGNAME,a.data.VOUSTYLE=this.currentRow.VOUSTYLE,a.data.SEALFLAG=this.currentRow.SEALFLAG,a.data.SEALNUM=this.currentRow.SEALNUM,Object(s.a)(a).then(function(a){e.loading=!1,e.$aui.message.show({type:"success",message:"电子凭证模板删除成功!"}),e.query()}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage})})},clickAdd:function(){this.dialogOptions.isShow=!0,this.dialogOptions.CHANELCODE=this.QueryForm.chanelcode},clickView:function(){this.dialogOption.isShow=!0,this.dialogOption.uploadFileName=this.currentRow.VOUIMGNAME,this.dialogOption.VOUSTYLE=this.currentRow.VOUSTYLE},resetForm:function(e){this.$refs[""+e].resetFields(),this.query()},changePage:function(e){this.currentPage=e,this.query()},query:function(){var e=this;this.loading=!0;var a=new w;a.data.VOUMODELID=this.QueryForm.voumodelid,a.data.VOUMODELDESC=this.QueryForm.voumodeldes,a.data.pagerownum=this.pageSize,a.data.currpage=this.currentPage,Object(s.a)(a).then(function(a){if(e.loading=!1,a.RspInfo.struct){console.log(a.RspInfo.struct);for(var t=a.RspInfo.struct||[],s=0;s<t.length;s++){JSON.parse(t[s].VOUSTYLE.replace(/&"/g,"")).sign_image.indexOf("#")>0?t[s].SIGNFLAG="1":t[s].SIGNFLAG="0"}e.tableData=t,e.total=a.RspInfo.TotalNum||0}else e.$aui.message.show({type:"warning",message:"没有满足条件得记录!"})}).catch(function(a){console.log(a),e.tableData=[],e.total=0,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),e.loading=!1})},handleCurrentChange:function(e){this.currentRow=e[0],1==e.length?this.checkedPost=!0:e.length>1?this.$refs.table.toggleRowSelection(e[0]):this.checkedPost=!1}}},S={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-card",[t("aui-form",{ref:"QueryForm",attrs:{model:e.QueryForm,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:12,lg:6}},[t("aui-form-item",{attrs:{prop:"voumodeldes",label:"凭证模板名称模糊查询"}},[t("aui-input",{attrs:{placeholder:"请输入凭证模板名称"},model:{value:e.QueryForm.voumodeldes,callback:function(a){e.$set(e.QueryForm,"voumodeldes",a)},expression:"QueryForm.voumodeldes"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:12,lg:6}},[t("aui-form-item",{attrs:{prop:"voumodelid",label:"电子凭证模板编号"}},[t("aui-input",{attrs:{placeholder:"请输入凭证模板编号"},model:{value:e.QueryForm.voumodelid,callback:function(a){e.$set(e.QueryForm,"voumodelid",a)},expression:"QueryForm.voumodelid"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:function(a){e.resetForm("QueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{staticStyle:{"margin-top":"10px"}},[t("aui-row",[t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",disabled:e.checkedPost,icon:"el-icon-plus"},on:{click:e.clickAdd}},[e._v("新增")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",disabled:!e.checkedPost},on:{click:e.clickUpdate}},[e._v("修改")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:!e.checkedPost},on:{click:e.clickDel}},[e._v("删除")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-tickets",disabled:!e.checkedPost},on:{click:e.clickView}},[e._v("预览")])],1)],1),e._v(" "),t("aui-table",{ref:"table",staticClass:"tableMarginTop",staticStyle:{"min-height":"390px"},attrs:{data:e.tableData,border:"","highlight-current-row":"","header-row-class-name":"tableHeaderClass"},on:{"selection-change":e.handleCurrentChange}},[t("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"VOUMODELID",label:"电子凭证模板编号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"SEALFLAG",formatter:e.dataFormat,label:"是否有电子印章"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"SIGNFLAG",formatter:e.dataFormat,label:"是否签名"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"VOUMODELDESC",label:"电子凭证模板名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CRTELLER",label:"创建柜员"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CRTDATE",label:"创建日期"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"UPDTELLER",label:"最后维护柜员"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"UPDDATE",label:"最后维护日期"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"STARTDATE",label:"生效日期"}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:this.tableData,expression:"this.tableData"}],staticStyle:{"text-align":"right","margin-top":"20px"}},[t("aui-pagination",{attrs:{"current-page":e.currentPage,background:"","page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.changePage}})],1)],1)],1),e._v(" "),t("keep-alive",[t(e.dialogList.elecdocTemplateAdd,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.query}})],1),e._v(" "),t("keep-alive",[t(e.dialogList.elecdocTemplateUpdate,{tag:"component",attrs:{option:e.dialogUpdateOptions},on:{refreshTable:e.query}})],1),e._v(" "),t("keep-alive",[t(e.dialogList.elecdocTemplate,{tag:"component",attrs:{createData:e.dialogOption}})],1)],1)},staticRenderFns:[]};var _=t("/Xao")(T,S,!1,function(e){t("psF8")},"data-v-efa331d8",null);a.default=_.exports},wu2b:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},xHYi:function(e,a,t){var s=t("RZpx");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("739c8528",s,!0)}});