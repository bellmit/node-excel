webpackJsonp([86],{"+akD":function(t,a,e){"use strict";var i=e("AA3o");e.n(i)},"8XPw":function(t,a,e){(t.exports=e("BkJT")(!1)).push([t.i,"\n.cardStyle {\n  margin: 5px 0;\n}\n.listEdit {\n  text-align: right;\n}\n.listEdit a {\n    margin: 5px;\n}\n.demo-table-expand .aui-form-item {\n  margin-bottom: 0;\n}\n",""])},"dM/Z":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("0oES"),r=e("AA3o"),n=e.n(r),s=function t(){n()(this,t),this.data={BusiOper:"Q",Description_cn:"",PriorityLevel:"",Orgno:"",AppNum:""},this.BusiDataKey="anno_quy",this.TransServiceCode="ib-dbcomm/dbComm"},o=function t(){n()(this,t),this.data={NoticeId:""},this.CommCode="TEAuxiModu",this.SceneCode="delAnnounce",this.TransServiceCode="mg-afaservices-bas/noticeRelease"},l=e("3cXf"),c=e.n(l),u=e("IHPB"),d=e.n(u),h=e("a3Yh"),p=e.n(h),m=e("B+2e"),g=function t(){n()(this,t),this.data={BusiOper:"A",appNum:"",RecvBrno:"",MtlExcn:"",TlrGnd:"",Detail_cn:"",Status:"",NoticeType:"",Description_cn:"",Prioritylevel:"",Orgno:"",ReleaseDate:"",ReleaseTime:"",SendType:""},this.BusiDataKey="anno_add",this.TransServiceCode="ib-dbcomm/dbComm"},b=function t(){n()(this,t),this.data={Brno:""},this.CommCode="TEAuxiModu",this.SceneCode="Announce",this.TransServiceCode="mg-afaservices-bas/noticeRelease"},f=function t(){n()(this,t),this.data={BusiOper:"M",Grd:"",Dt2:"",Time:"",Abst:"",Cntnt:"",Status:""},this.BusiDataKey="anno_mod",this.TransServiceCode="ib-dbcomm/dbComm"},v=(e("+akD"),e("syAl")),y=function t(){n()(this,t),this.data={OperType:"Q",PostNum:"",PostName:"",UserNum:"",AppNum:"",LegalPersonNum:"",length:"99999",start:"0",draw:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt",this.QueryRowNum="",this.QueryPageNo=""},D=e("tzsN"),_=e("0VOF"),w=e("fCv1"),N=e("pADA"),S={components:{selectTree:D.a},props:{createData:Object},data:function(){var t;return t={data:!1},p()(t,"data",!1),p()(t,"dt",!1),p()(t,"seq_no",""),p()(t,"branch1",!1),p()(t,"post",!1),p()(t,"isDisabled",!1),p()(t,"num",!1),p()(t,"PriorityLevelList",[]),p()(t,"pageSize",void 0),p()(t,"currentPage",1),p()(t,"brnoList",[]),p()(t,"noticetypeList",[]),p()(t,"RecvPostList",[]),p()(t,"NoticeModelist",[]),p()(t,"appList",[]),p()(t,"branchnum",[]),p()(t,"loading",!1),p()(t,"branch",{Grd:"",PntOfTm:"",Time2:"",Dt1:"",Tp1:"",appNum:"",BrahNum2C:[],Abst:"",Cntnt:"",SerialNum:"",Noticeid:"",RecvPost:[]}),p()(t,"rules",{appNum:[{required:!0,message:"应用编号不能为空！",trigger:"change"}],BrahNum2C:[{type:"array",required:!0,message:"机构号不能为空！",trigger:"change"}],Abst:[{required:!0,message:"公告标题不能为空！",trigger:"change"},{validator:w.l,trigger:"blur"},{validator:Object(w.h)(60),trigger:"blur"}],Cntnt:[{required:!0,message:"公告内容不能为空！",trigger:"change"},{validator:w.l,trigger:"blur"},{validator:Object(w.h)(2e3),trigger:"blur"}],SerialNum:[{required:!0,message:"公告编号不能为空！",trigger:"change"}],RecvPost:[{type:"array",required:!0,message:"岗位不能为空！",trigger:"change"}],Tp1:[{required:!0,message:"公告类型不能为空！",trigger:"change"}],PntOfTm:[{required:!0,message:"发布方式不能为空！",trigger:"change"}],Grd:[{required:!0,message:"公告级别不能为空！",trigger:"change"}],Dt1:[{required:!0,message:"发布日期不能为空！",trigger:"change"}],Time2:[{required:!0,message:"发布时间不能为空！",trigger:"change"}]}),t},created:function(){this.pageSize=v.a.get("PageSize")},methods:{Send:function(){"1"==this.branch.PntOfTm?(this.data=!0,this.data=!0):(this.data=!1,this.data=!1)},dateChange:function(){this.branch.Dt1<N.a.getNowTime(0)?(this.$aui.message.show({type:"warning",message:"发布日期不能小于当前日期"}),this.branch.Dt1=N.a.getNowTime(0)):this.branch.Dt1==N.a.getNowTime(0)&&this.branch.Time2<N.a.getDateTime("time")&&(this.$aui.message.show({type:"warning",message:"发布时间不能小于当前时间"}),this.branch.Time2=N.a.getDateTime("time"))},NoticPrty:function(){var t=this;this.loading=!0;var a=new m.a;a.data.DataKey="NoticPrty",Object(i.a)(a).then(function(a){t.loading=!1,t.PriorityLevelList=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1})},NoticeType:function(){var t=this;this.loading=!0;var a=new m.a;a.data.DataKey="NoticeType",Object(i.a)(a).then(function(a){t.loading=!1,t.noticetypeList=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1})},NoticeMode:function(){var t=this;this.loading=!0;var a=new m.a;a.data.DataKey="NoticeMode",Object(i.a)(a).then(function(a){t.loading=!1,t.NoticeModelist=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1})},devFormChange:function(){var t=this;this.loading=!0;var a=new y;a.data.UserNum=this.$store.getters.UserNum,a.data.LegalPersonNum=this.$store.getters.LegalPersonNum,Object(i.a)(a).then(function(a){t.loading=!1,t.RecvPostList=a.RspInfo.pageList||[];var e=t.createData.appList.map(function(t){return{id:t.AppNum,name:t.AppNum+"-"+t.AppName,pid:"0"}}),i=t.RecvPostList.map(function(t){return{id:t.postid,name:t.postnum+"-"+t.postname,pid:t.appnum}}),r=[].concat(d()(e),d()(i));t.RecvPostList=N.a.formatTreeData(r,"id","pid"),t.loading=!1}).catch(function(a){t.loading=!1})},openBranch:function(){var t=this;this.NoticPrty(),this.NoticeType(),this.NoticeMode(),this.$nextTick(function(){t.isDisabled=!1,"2"==t.createData.logo?(t.branch1=!1,t.post=!1,t.num=!0,t.branch=JSON.parse(c()(t.createData.currentRow)),"0"==t.createData.currentRow.PntOfTm&&(t.isDisabled=!0),t.Send()):"1"==t.createData.logo&&(t.devFormChange(),t.data=!1,t.dt=!1,t.branch1=!0,t.post=!0,t.num=!1)})},closeBranch:function(){this.$refs.branch.clearValidate(),this.$refs.branch.resetFields()},addArea:function(){var t=this;this.$refs.branch.validate(function(a){if(a){t.loading=!0;var e="1"==t.createData.logo?new g:new f;if(e.data.Status="0",t.seq_no=N.a.getDateTime("date")+N.a.getDateTime("time")+t.$store.getters.BranchNum,"1"==t.createData.logo){e.data.SEQ_NO=t.seq_no,e.data.RecvBrno=t.branch.BrahNum2C.toString(),e.data.Description_cn=t.branch.Abst,e.data.Detail_cn=t.branch.Cntnt,e.data.Tlid=t.$store.getters.UserNum;for(var r=[],n=[],s=0;s<t.branch.RecvPost.length;s++){var o=t.branch.RecvPost[s];/[0-9]/.test(o)?n.push(o):r.push(o)}e.data.RecvPost=n.toString(),e.data.appNum=r.toString(),e.data.Orgno=t.$store.getters.BranchNum,e.data.Prioritylevel=t.branch.Grd}"2"==t.createData.logo&&(e.data.SEQ_NO=t.createData.currentRow.SerialNum,e.data.Abst=t.branch.Abst,e.data.Cntnt=t.branch.Cntnt,e.data.Grd=t.branch.Grd,e.data.NoticeId=t.branch.SerialNum),"1"==t.branch.PntOfTm?(e.data.ReleaseDate=t.branch.Dt1,e.data.ReleaseTime=t.branch.Time2):(e.data.ReleaseDate=N.a.getDateTime("date"),e.data.ReleaseTime=N.a.getDateTime("time")),e.data.SendType=t.branch.PntOfTm,e.data.NoticeType=t.branch.Tp1,Object(i.a)(e).then(function(a){console.log("------",a),t.loading=!1,t.createData.isShow=!1,t.Release()}).catch(function(a){t.loading=!1,t.$aui.message.show({type:"error",message:a.SYS_HEAD.ReturnMessage+"!"})})}})},Release:function(){var t=this,a=new b;a.data.Seq_No=this.seq_no,a.data.Brno=this.branch.BrahNum2C.toString(),"1"==this.branch.PntOfTm?(a.data.ReleaseDate=this.branch.Dt1,a.data.ReleaseTime=this.branch.Time2):(a.data.ReleaseDate=N.a.getDateTime("date"),a.data.ReleaseTime=N.a.getDateTime("time")),Object(i.a)(a).then(function(a){t.$emit("refreshTable"),t.$aui.message.show({type:"success",message:"公告发布成功!"})}).catch(function(a){t.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage+"!"})})}}},T={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("aui-dialog",{attrs:{visible:t.createData.isShow,width:"800px",title:t.createData.title,"close-on-click-modal":!1},on:{"update:visible":function(a){t.$set(t.createData,"isShow",a)},hide:t.closeBranch,show:t.openBranch}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("aui-card",{staticStyle:{overflow:"visible"}},[e("aui-form",{ref:"branch",attrs:{model:t.branch,size:"mini",rules:t.rules,"label-width":"90px","label-position":"right"}},[e("aui-row",{attrs:{gutter:20}},[t.num?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告编号:",prop:"SerialNum"}},[e("aui-input",{attrs:{disabled:t.createData.isDisabled,placeholder:"请输入公告标题"},model:{value:t.branch.SerialNum,callback:function(a){t.$set(t.branch,"SerialNum",a)},expression:"branch.SerialNum"}})],1)],1):t._e(),t._v(" "),t.post?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"接收岗位",prop:"RecvPost"}},[e("select-tree",{staticStyle:{width:"170px"},attrs:{"is-strictly":!1,props:{id:"id",label:"name",children:"children"},"tree-data":t.RecvPostList,placeholder:"请选择岗位"},model:{value:t.branch.RecvPost,callback:function(a){t.$set(t.branch,"RecvPost",a)},expression:"branch.RecvPost"}})],1)],1):t._e(),t._v(" "),t.branch1?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"接收机构",prop:"BrahNum2C"}},[e("select-tree",{staticStyle:{width:"170px"},attrs:{"is-strictly":!1,props:{id:"orgno",label:"cname",children:"children"},"tree-data":t.createData.branchNum,placeholder:"请选择机构"},model:{value:t.branch.BrahNum2C,callback:function(a){t.$set(t.branch,"BrahNum2C",a)},expression:"branch.BrahNum2C"}})],1)],1):t._e(),t._v(" "),t.dt?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"发布日期:",prop:"Dt1"}},[e("aui-input",{attrs:{disabled:t.createData.isDisabled},model:{value:t.branch.Dt1,callback:function(a){t.$set(t.branch,"Dt1",a)},expression:"branch.Dt1"}})],1)],1):t._e()],1),t._v(" "),e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告标题:",prop:"Abst"}},[e("aui-input",{attrs:{placeholder:"请输入公告标题"},model:{value:t.branch.Abst,callback:function(a){t.$set(t.branch,"Abst",a)},expression:"branch.Abst"}})],1)],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告类型",prop:"Tp1"}},[e("aui-select",{attrs:{placeholder:"请选择公告类型"},model:{value:t.branch.Tp1,callback:function(a){t.$set(t.branch,"Tp1",a)},expression:"branch.Tp1"}},t._l(t.noticetypeList,function(t){return e("aui-option",{key:t.DataKeyVal,attrs:{label:t.DataKeyVal+"-"+t.Meaning,value:t.DataKeyVal}})}))],1)],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告级别:",prop:"Grd"}},[e("aui-select",{attrs:{placeholder:"请选择公告级别"},model:{value:t.branch.Grd,callback:function(a){t.$set(t.branch,"Grd",a)},expression:"branch.Grd"}},t._l(t.PriorityLevelList,function(t){return e("aui-option",{key:t.DataKeyVal,attrs:{label:t.DataKeyVal+"-"+t.Meaning,value:t.DataKeyVal}})}))],1)],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"发送方式:",prop:"PntOfTm"}},[e("aui-select",{attrs:{placeholder:"请选择发送方式",disabled:t.isDisabled},on:{change:t.Send},model:{value:t.branch.PntOfTm,callback:function(a){t.$set(t.branch,"PntOfTm",a)},expression:"branch.PntOfTm"}},t._l(t.NoticeModelist,function(t){return e("aui-option",{key:t.DataKeyVal,attrs:{label:t.DataKeyVal+"-"+t.Meaning,value:t.DataKeyVal}})}))],1)],1),t._v(" "),t.data?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"发布日期",prop:"Dt1"}},[e("aui-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.branch.Dt1,callback:function(a){t.$set(t.branch,"Dt1",a)},expression:"branch.Dt1"}})],1)],1):t._e(),t._v(" "),t.data?e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"发布时间:",prop:"Time2"}},[e("aui-time-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"HHmmss",placeholder:"请选择时间"},on:{change:t.dateChange},model:{value:t.branch.Time2,callback:function(a){t.$set(t.branch,"Time2",a)},expression:"branch.Time2"}})],1)],1):t._e()],1),t._v(" "),e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:24}},[e("aui-form-item",{attrs:{label:"公告内容:",prop:"Cntnt"}},[e("aui-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入公告内容"},model:{value:t.branch.Cntnt,callback:function(a){t.$set(t.branch,"Cntnt",a)},expression:"branch.Cntnt"}})],1)],1)],1)],1)],1),t._v(" "),e("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[e("aui-button",{attrs:{size:"mini"},on:{click:function(a){t.createData.isShow=!1}}},[t._v("取消")]),t._v(" "),e("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addArea}},[t._v("确认")])],1)],1)])],1)},staticRenderFns:[]},P=e("/Xao")(S,T,!1,null,null,null).exports,C={props:{detailData:Object},data:function(){return{enum:{1:"1-一般公告",2:"2-紧急公告"},enum1:{0:"0-未发布",1:"1-已发布"},enum2:{},brnoMap:{},brnoList:[],RecvPostList:[],loading:!1,branch:{Time:"",noticetype:"",appNum:"",BrahNum2C:"",branchnum:"",Abst:"",Cntnt:"",Prioritylevel:"",SerialNum:"",Status1C:"",Noticeid:"",RecvPost:""},rules:{},brnoText:""}},created:function(){},methods:{formate:function(t){return this.enum[t]},formate1:function(t){return this.enum1[t]},formate2:function(t){return this.enum2[t]},formate3:function(t){if(this.detailData.brnoMap){t=t.split(",");for(var a=0;a<t.length;a++){var e=t[a];this.brnoText+=this.detailData.brnoMap[e]+"，"}this.brnoText=this.brnoText.slice(0,-1)}else this.brnoText="暂无数据"},openBranch:function(){this.branch=JSON.parse(c()(this.detailData.currentRow)),this.formate3(this.branch.BrahNum2C)},closeBranch:function(){this.branch={Time:"",noticetype:"",appNum:"",BrahNum2C:"",branchnum:"",Abst:"",Cntnt:"",Prioritylevel:"",SerialNum:"",Status1C:"",Noticeid:"",RecvPost:""},this.brnoText="",this.$refs.branch.clearValidate(),this.$refs.branch.resetFields()}}},R={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("aui-dialog",{attrs:{visible:t.detailData.isShow,width:"800px",title:"查看详情","close-on-click-modal":!1},on:{"update:visible":function(a){t.$set(t.detailData,"isShow",a)},hide:t.closeBranch,show:t.openBranch}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("aui-card",{staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("公告信息")])]),t._v(" "),e("aui-form",{ref:"branch",attrs:{model:t.branch,size:"mini","label-width":"115px","label-position":"right"}},[e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"接收机构:",prop:"BrahNum2C"}},[e("aui-popover",{attrs:{placement:"top",trigger:"hover",content:t.brnoText}},[e("aui-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("移入鼠标查看")])],1)],1)],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告编号:",prop:"SerialNum"}},[e("span",[t._v(t._s(t.branch.SerialNum))])])],1)],1),t._v(" "),e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告标题:",prop:"Abst"}},[e("span",[t._v(t._s(t.branch.Abst))])])],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告级别:",prop:"Grd"}},[e("span",[t._v(t._s(t.formate(t.branch.Grd)))])])],1)],1),t._v(" "),e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"公告状态:",prop:"Status1C"}},[e("span",[t._v(t._s(t.formate1(t.branch.Status1C)))])])],1),t._v(" "),e("aui-col",{attrs:{span:12}},[e("aui-form-item",{attrs:{label:"发布日期:",prop:"Dt1"}},[e("span",[t._v(t._s(t.branch.Dt1))])])],1)],1),t._v(" "),e("aui-row",{attrs:{gutter:20}},[e("aui-col",{attrs:{span:24}},[e("aui-form-item",{attrs:{label:"公告内容:",prop:"Cntnt"}},[e("aui-input",{attrs:{type:"textarea",rows:20,disabled:""},model:{value:t.branch.Cntnt,callback:function(a){t.$set(t.branch,"Cntnt",a)},expression:"branch.Cntnt"}})],1)],1)],1)],1)],1),t._v(" "),e("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[e("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.detailData.isShow=!1}}},[t._v("确认")])],1)],1)])],1)},staticRenderFns:[]},L=e("/Xao")(C,R,!1,null,null,null).exports,x=e("qfSh"),O={components:{selectTree:D.a},data:function(){return{brnoMap:{},total:0,pageSize:void 0,appList:[],currentPage:1,tableDateList:[],Status1CList:{},PriorityLevelList:[],brnoList:[],queryForm:{appNum:"",noticetype:"",PriorityLevel:"",Description_cn:"",branchId:[]},currentRow:[],loading:!1,dialogList:{update:P,particulars:L},dialogOptions:{isShow:!1},dialogOptionsDetail:{isShow:!1},rules:{Description_cn:[{validator:Object(w.h)(60),trigger:"blur"},{validator:w.l,trigger:"blur"}]}}},created:function(){this.loading=!0,this.initPage(),this.initList(),this.NoticPrty(),this.pageSize=v.a.get("PageSize"),this.Status1CList=v.a.get("Status1CList"),this.GrdList=v.a.get("GrdList")},methods:{initPage:function(){var t=this,a=new x.a;a.data.UserNum=this.$store.getters.UserNum,Object(i.a)(a).then(function(a){t.appList=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1,console.error("查询错误",a)})},initList:function(){var t=this;this.loading=!0;var a=new _.a;a.data.orgno=this.$store.getters.BranchNum,Object(i.a)(a).then(function(a){t.loading=!1;var e=a.RspInfo.Result||[];t.brnoMap=a.RspInfo.orgMap||{},t.brnoList=N.a.formatTreeData(e,"orgno","superno"),t.queryForm.branchId.push(t.brnoList[0].orgno)}).catch(function(a){t.loading=!1,t.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},particulars:function(){this.dialogOptionsDetail.isShow=!0,this.dialogOptionsDetail.currentRow=this.currentRow[0],this.dialogOptionsDetail.brnoMap=this.brnoMap},propFormat:function(t,a){return"Orgno"==a.property?t[a.property]+"-"+this.brnoMap[t[a.property]]:"Status1C"==a.property?this.Status1CList[t[a.property]]:"Grd"==a.property?this.GrdList[t[a.property]]:void 0},handleCurrentChange:function(t){this.currentPage=t,this.tableQuery()},handleCurrentChangeTable:function(t){this.currentRow=t,t.length>1&&this.$refs.tableDateList.toggleRowSelection(t[0])},clearForm:function(t){this.tableDateList=[],this.total=0,this.$refs.queryForm.resetFields()},refreshTable:function(){this.tableQuery()},tableQuery:function(){var t=this;this.loading=!0;var a=new s;a.data.Description_cn=this.queryForm.Description_cn,a.data.PriorityLevel=this.queryForm.PriorityLevel,a.data.AppNum=this.queryForm.appNum,a.data.Orgno=this.queryForm.branchId[0],a.data.CurtPage=this.currentPage,a.data.PageSize=this.pageSize,a.data.StartRows=(this.currentPage-1)*this.pageSize,Object(i.a)(a).then(function(a){t.total=a.RspInfo.totalNum||0,t.tableDateList=a.RspInfo.Result||[],t.loading=!1}).catch(function(a){t.total=0,t.tableDateList=[],t.loading=!1,t.$aui.message.show({type:"warming",message:a.SYS_HEAD.ReturnMessage+"!"})})},Del:function(){var t=this;this.loading=!0;for(var a=function(a){var e=new o;e.data.NoticeId=t.currentRow[a].SerialNum,Object(i.a)(e).then(function(e){a==t.currentRow.length-1&&(t.$aui.message.show({type:"success",message:"公告信息删除成功!"}),t.refreshTable())}).catch(function(a){t.loading=!1,t.$aui.message.show({type:"error",message:a.SYS_HEAD.ReturnMessage+"!"})})},e=0;e<this.currentRow.length;e++)a(e)},NoticPrty:function(){var t=this,a=new m.a;a.data.DataKey="NoticPrty",Object(i.a)(a).then(function(a){t.PriorityLevelList=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1})},Update:function(){this.dialogOptions.isShow=!0,this.dialogOptions.currentRow=this.currentRow[0],this.dialogOptions.title="修改公告信息",this.dialogOptions.isDisabled=!0,this.dialogOptions.logo="2",this.dialogOptions.appList=this.appList,this.dialogOptions.branchNum=this.brnoList},Add:function(){this.dialogOptions.isShow=!0,this.dialogOptions.title="添加公告信息",this.dialogOptions.isDisabled=!1,this.dialogOptions.logo="1",this.dialogOptions.appList=this.appList,this.dialogOptions.branchNum=this.brnoList,this.dialogOptions.noticetypeList=this.noticetypeList},del:function(){var t=this;this.$aui.confirm.show("此操作将永久删除该公告信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.Del()}).catch(function(){t.$aui.message.show({type:"info",message:"已取消删除"})})}}},A={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"branch-manage",attrs:{"element-loading-text":"加载中。。。"}},[e("aui-card",[e("aui-form",{ref:"queryForm",attrs:{model:t.queryForm,size:"mini",rules:t.rules,"label-position":"top"}},[e("aui-row",{attrs:{gutter:10}},[e("aui-col",{attrs:{lg:4,md:6}},[e("aui-form-item",{attrs:{label:"应用编号",prop:"appNum"}},[e("aui-select",{attrs:{placeholder:"请选择应用"},model:{value:t.queryForm.appNum,callback:function(a){t.$set(t.queryForm,"appNum",a)},expression:"queryForm.appNum"}},t._l(t.appList,function(t){return e("aui-option",{key:t.value,attrs:{label:t.AppNum+"-"+t.AppName,value:t.AppNum,disabled:t.disabled}})}))],1)],1),t._v(" "),e("aui-col",{attrs:{lg:4,md:6}},[e("aui-form-item",{attrs:{label:"发布机构",prop:"branchId"}},[e("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":t.brnoList,placeholder:"请发布机构"},model:{value:t.queryForm.branchId,callback:function(a){t.$set(t.queryForm,"branchId",a)},expression:"queryForm.branchId"}})],1)],1),t._v(" "),e("aui-col",{attrs:{lg:4,md:6}}),t._v(" "),e("aui-col",{attrs:{lg:4,md:6}},[e("aui-form-item",{attrs:{label:"公告级别",prop:"PriorityLevel"}},[e("aui-select",{attrs:{filterable:"",placeholder:"请选择业务分类"},model:{value:t.queryForm.PriorityLevel,callback:function(a){t.$set(t.queryForm,"PriorityLevel",a)},expression:"queryForm.PriorityLevel"}},t._l(t.PriorityLevelList,function(t){return e("aui-option",{key:t.DataKeyVal,attrs:{label:t.DataKeyVal+"-"+t.Meaning,value:t.DataKeyVal}})}))],1)],1),t._v(" "),e("aui-col",{attrs:{md:6,lg:4}},[e("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"标题关键字",prop:"Description_cn"}},[e("aui-input",{attrs:{placeholder:"支持模糊查询"},model:{value:t.queryForm.Description_cn,callback:function(a){t.$set(t.queryForm,"Description_cn",a)},expression:"queryForm.Description_cn"}})],1)],1),t._v(" "),e("aui-col",{attrs:{lg:2,md:3}},[e("aui-button",{staticClass:"searchBtnMarginTop",attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:t.tableQuery}},[t._v("查询")])],1),t._v(" "),e("aui-col",{attrs:{lg:2,md:3}},[e("aui-button",{staticClass:"searchBtnMarginTop",attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(a){t.clearForm("queryForm")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),e("aui-card",{staticStyle:{"margin-top":"10px"}},[e("aui-row",[e("aui-col",{attrs:{lg:2,md:3}},[t.btnPermission("Button_DevBrand_Add")?e("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:0!=t.currentRow.length},on:{click:function(a){t.Add()}}},[t._v("添加")]):t._e()],1),t._v(" "),e("aui-col",{attrs:{lg:2,md:3}},[t.btnPermission("Button_DevBrand_Add")?e("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:1!=t.currentRow.length},on:{click:function(a){t.Update()}}},[t._v("修改")]):t._e()],1),t._v(" "),e("aui-col",{attrs:{lg:2,md:3}},[t.btnPermission("Button_DevBrand_Add")?e("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:t.currentRow.length<1},on:{click:function(a){t.del()}}},[t._v("删除")]):t._e()],1),t._v(" "),e("aui-col",{attrs:{lg:2,md:3}},[t.btnPermission("Button_DevBrand_Add")?e("aui-button",{attrs:{type:"primary",size:"mini",disabled:1!=t.currentRow.length},on:{click:function(a){t.particulars()}}},[t._v("查看详情")]):t._e()],1)],1),t._v(" "),e("aui-table",{ref:"tableDateList",staticClass:"tableMarginTop",attrs:{data:t.tableDateList,border:"","max-height":"400",width:"100%","header-row-class-name":"tableHeaderClass","highlight-current-row":""},on:{"selection-change":t.handleCurrentChangeTable}},[e("aui-table-column",{attrs:{type:"selection",width:"40px"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Orgno",label:"发布机构",formatter:t.propFormat}}),t._v(" "),e("aui-table-column",{attrs:{prop:"SerialNum",label:"公告编号"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Abst",label:"公告标题"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Cntnt",label:"公告内容","min-width":"300px"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Grd",label:"公告级别",formatter:t.propFormat}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Status1C",label:"公告状态",formatter:t.propFormat}}),t._v(" "),e("aui-table-column",{attrs:{prop:"Dt1",label:"发布日期"}})],1),t._v(" "),e("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[e("aui-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),e("keep-alive",[e(t.dialogList.update,{tag:"component",attrs:{createData:t.dialogOptions},on:{refreshTable:t.refreshTable}})],1),t._v(" "),e("keep-alive",[e(t.dialogList.particulars,{tag:"component",attrs:{detailData:t.dialogOptionsDetail}})],1)],1)},staticRenderFns:[]};var B=e("/Xao")(O,A,!1,function(t){e("lTsW")},null,null);a.default=B.exports},lTsW:function(t,a,e){var i=e("8XPw");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("8bSs")("5a2623e3",i,!0)}});