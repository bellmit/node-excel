webpackJsonp([139],{LJW1:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.aui-date-editor.aui-input {\n  width: 100% !important;\n}\n.aui-card {\n  overflow: inherit;\n}\n",""])},SfJC:function(t,e,a){var n=a("LJW1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("cc1eded6",n,!0)},p0b8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("syAl"),r=a("0oES"),o=(a("qfSh"),a("AA3o")),i=a.n(o),l=function t(){i()(this,t),this.data={BusiOper:"Q"},this.BusiDataKey="appInfoByCnl_quy",this.TransServiceCode="ib-dbcomm/dbComm"},s=a("pADA"),u=a("tzsN"),p=a("0VOF"),d={components:{selectTree:u.a},data:function(){return{pickerOptionsStart:{disabledDate:function(t){(new Date).getTime();return t.getTime()>Date.now()}},dlwth_stus_dec:[{label:"0-未处理",value:"0"},{label:"1-已处理",value:"1"}],busiTypeList:[{label:"0-全部",value:"0"},{label:"2-个人业务",value:"2"},{label:"1-对公业务",value:"1"}],loading:!1,isCanExport:!1,tableData:[],list1:[],brnoMap:{},filename:"评价流水查询导出",bookType:"xlsx",autoWidth:!0,tableTotal:0,currentPage:1,brnoList:[],formInline:{branchId:[],startdate:"",enddate:"",tellerno:"",busiType:"0"},reatincarddealflagtype:n.a.get("reatincarddealflagtype"),reatincardtypetype:n.a.get("reatincardtypetype"),rules:{branchId:[{required:!0,message:"请选择机构编号",trigger:"change"}]}}},created:function(){this.formInline.startdate=s.a.getNowTime(7),this.formInline.enddate=s.a.getNowTime(0),this.pageSize=n.a.get("PageSize"),this.initBrno()},mounted:function(){},methods:{dateChange:function(){this.formInline.startdate>this.formInline.enddate&&(this.$aui.message.show({type:"warning",message:"开始日期不能大于结束日期"}),this.formInline.startdate=s.a.getNowTime(29),this.formInline.enddate=s.a.getNowTime(0))},dFormat:function(t,e){return s.a.timeFormat2Date(t[e.property])},tFormat:function(t,e){return s.a.timeFormat2Time(t[e.property])},statusFormat:function(t,e){if("4"!=t.APPRAISETLVL)return"";for(var a=0;a<this.dlwth_stus_dec.length;a++)if(t[e.property]==this.dlwth_stus_dec[a].value)return this.dlwth_stus_dec[a].label},reatincarddealflagFormat:function(t,e){return this.reatincarddealflagtype[t[e.property]]},reatincardtypeFormat:function(t,e){return this.reatincardtypetype[t[e.property]]},appQueryInit:function(){},initBrno:function(){var t=this;this.loading=!0;var e=new p.a;e.data.orgno=this.$store.getters.BranchNum,Object(r.a)(e).then(function(e){t.loading=!1,t.brnoList=e.RspInfo.Result||[],t.brnoMap=e.RspInfo.orgMap||{},t.brnoList=s.a.formatTreeData(t.brnoList,"orgno","superno"),t.formInline.branchId.push(t.brnoList[0].orgno)}).catch(function(e){t.loading=!1,console.error("错误信息",e)})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.currentPage=t,this.queryInfoList(),console.log("当前页: "+t)},handleDownload:function(){var t=this;a.e(169).then(a.bind(null,"FNRk")).then(function(e){var a=t.list1,n=t.formatJson(["ORGNO","BizType","APPRAISEDATE","APPRAISETIME","APPRAISEID","TELLERNO","APPRAISECHANNEL","CUSIDENTNO","CUSIDENTYPE","CUSTERMNO","CUSNAME","APPRAISECONTENT"],a);e.export_json_to_excel({header:["机构号","业务类型","评价日期","评价时间","评价编号","柜员号","评价类型","证件类型","证件号码","客户号","客户姓名","评价内容"],data:n,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType})})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?parseTime(e[t]):e[t]})})},dataFormat:function(t,e){if("ORGNO"==e.property)return t[e.property]+"-"+this.brnoMap[t[e.property]];if("BizType"==e.property)for(var a=0;a<this.busiTypeList.length;a++)if(t[e.property]==this.busiTypeList[a].value)return this.busiTypeList[a].label},queryInfoList:function(){var t=this;this.$refs.formInline.validate(function(e){if(e){t.loading=!0;var a=new l;a.data.Brno=t.formInline.branchId[0],a.data.BusiType="0"==t.formInline.busiType?"":t.formInline.busiType,a.data.APPRAISECHANNEL="TE",a.data.STARTDATE=t.formInline.startdate,a.data.ENDDATE=t.formInline.enddate,a.data.TELLERNO=t.formInline.tellerno,a.data.CurtPage=t.currentPage+"",a.data.PageSize=t.pageSize+"",a.data.StartRows=(t.currentPage-1)*t.pageSize+"",Object(r.a)(a).then(function(e){console.log(e),t.loading=!1,e.RspInfo.Result?(t.tableData=e.RspInfo.Result||[],t.tableTotal=e.RspInfo.totalNum||0,t.isCanExport=!1):(t.tableData=[],t.tableTotal=0,t.isCanExport=!0,t.$aui.message.show({type:"warning",message:"没有满足条件得记录!"}))}).catch(function(e){t.$aui.message.show({type:"warning",message:"请求失败，错误码:"+e.SYS_HEAD.ReturnCode+"，错误信息："+e.SYS_HEAD.ReturnMessage}),t.loading=!1,console.error("查询错误",e)})}})},export_CardboxInfo:function(){var t=this;this.$refs.formInline.validate(function(e){if(e){t.loading=!0;var a=new l;a.data.Brno=t.formInline.branchId[0],a.data.BusiType="0"==t.formInline.busiType?"":t.formInline.busiType,a.data.APPRAISECHANNEL="TE",a.data.Brno=t.formInline.branchId[0],a.data.STARTDATE=t.formInline.sTime,a.data.ENDDATE=t.formInline.eTime,a.data.TELLERNO=t.formInline.tellerno,a.data.CurtPage="1",a.data.PageSize="50000000",a.data.StartRows="",Object(r.a)(a).then(function(e){t.loading=!1,"000000"==e.SYS_HEAD.ReturnCode?(t.list1=e.RspInfo.Result||[],t.handleDownload()):t.$aui.message.show({type:"warning",message:"导出失败"+e.SYS_HEAD.ReturnMessage})})}})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"by-evaluate-channel",attrs:{"element-loading-text":"加载中。。。"}},[a("div",[a("aui-card",{staticClass:"type-info-box-card"},[a("aui-form",{ref:"formInline",attrs:{model:t.formInline,rules:t.rules,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"机构号",prop:"branchId"}},[a("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":t.brnoList,placeholder:"请选择机构"},model:{value:t.formInline.branchId,callback:function(e){t.$set(t.formInline,"branchId",e)},expression:"formInline.branchId"}})],1)],1),t._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"业务类型",prop:"busiType"}},[a("aui-select",{attrs:{placeholder:"请选择业务类型"},model:{value:t.formInline.busiType,callback:function(e){t.$set(t.formInline,"busiType",e)},expression:"formInline.busiType"}},t._l(t.busiTypeList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"柜员号",prop:"tellerno"}},[a("aui-input",{attrs:{placeholder:"请输入柜员号"},model:{value:t.formInline.tellerno,callback:function(e){t.$set(t.formInline,"tellerno",e)},expression:"formInline.tellerno"}})],1)],1),t._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"开始日期",prop:"startdate"}},[a("aui-date-picker",{attrs:{editable:!1,"picker-options":t.pickerOptionsStart,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:t.dateChange},model:{value:t.formInline.startdate,callback:function(e){t.$set(t.formInline,"startdate",e)},expression:"formInline.startdate"}})],1)],1),t._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"结束日期",prop:"enddate"}},[a("aui-date-picker",{attrs:{editable:!1,"picker-options":t.pickerOptionsStart,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:t.dateChange},model:{value:t.formInline.enddate,callback:function(e){t.$set(t.formInline,"enddate",e)},expression:"formInline.enddate"}})],1)],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:t.queryInfoList}},[t._v("查询")])],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t.btnPermission("Button_RunRateRep_Export")?a("aui-button",{staticClass:"b-button",attrs:{type:"primary",size:"mini",icon:"aui-icon-download",disabled:t.isCanExport},on:{click:t.export_CardboxInfo}},[t._v("导出")]):t._e()],1)],1)],1)],1),t._v(" "),a("aui-card",{staticClass:"type-info-bottom"},[a("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:t.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[a("aui-table-column",{attrs:{prop:"ORGNO",label:"机构号",formatter:t.dataFormat}}),t._v(" "),a("aui-table-column",{attrs:{prop:"BizType",label:"业务类型",formatter:t.dataFormat}}),t._v(" "),a("aui-table-column",{attrs:{prop:"APPRAISEDATE",label:"评价日期",formatter:t.dFormat}}),t._v(" "),a("aui-table-column",{attrs:{prop:"APPRAISETIME",label:"评价时间",formatter:t.tFormat}}),t._v(" "),a("aui-table-column",{attrs:{prop:"APPRAISEID",label:"评价编号"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"CUSNAME",label:"客户名称"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"CUSTERMNO",label:"客户号"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"APPRAISECONTENT",label:"评价内容"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"TELLERNO",label:"柜员号"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"DLWTH_STUS",label:"处理状态",formatter:t.statusFormat}}),t._v(" "),a("aui-table-column",{attrs:{prop:"DLWTH_PERSON",label:"处理人"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"DLWTH_DT",label:"处理日期"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"DLWTH_TM",label:"处理时间"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"DLWTH_CONTENT",label:"处理记录"}})],1),t._v(" "),a("div",{staticClass:"box"},[a("aui-pagination",{attrs:{background:"","current-page":t.currentPage,layout:"total, prev, pager, next, jumper",total:t.tableTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)])},staticRenderFns:[]};var m=a("/Xao")(d,c,!1,function(t){a("SfJC")},null,null);e.default=m.exports}});