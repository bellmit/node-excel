webpackJsonp([82],{KW7d:function(e,t,a){var i=a("wRXW");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("f849e9ce",i,!0)},PEM0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),r=a.n(i),n=(a("syAl"),a("0oES")),s=a("qfSh"),o=a("AA3o"),l=a.n(o),u=function e(){l()(this,e),this.data={},this.CommCode="TEParaManage",this.SceneCode="TransactAttributeMaintain",this.TransServiceCode="mg-afaservices-om/transactAttributeMaintain"},c=function e(){l()(this,e),this.data={},this.BusiDataKey="TranParamQry",this.TransServiceCode="ib-dbcomm/dbComm"},d=a("aYJl"),m=a("6pzS"),p=a("B+2e"),f={data:function(){return{currentRow:void 0,filterText:"",form:{MenuNum:"",MenuName:"",BIZ_TYP_CD:"",STRK_BAL_FLG:"",TX_PR_CD:"",EXANTE_COLTFE_NM:"",IF_MAKE_SGNIN:"",SON_TX_CD:""},list1:[{value:"0",label:"0-不允许抹账"},{value:"1",label:"1-允许抹账"}],list2:[{value:"0",label:"0-不允许补打"},{value:"1",label:"1-允许补打"}],list3:[{value:"0",label:"0-不需要收费"},{value:"1",label:"1-需要收费"}],list4:[{value:"0",label:"0-不需要"},{value:"1",label:"1-需要"}],list5:[{value:"0",label:"0-子交易"},{value:"1",label:"1-父交易"}],businessTypeList:[],addTradeGroup:!1,isShowMenu:!1,tradeTreeData:[],QueryForm:{appId:"",menuView:""},appId:[],menuView:[],loading:!1,rules:{MenuNum:[{required:!0,message:"请输入交易分组ID",trigger:"blur"}],MenuName:[{required:!0,message:"请输入交易名称",trigger:"blur"}]},queryRules:{appId:[{required:!0,message:"请应用编号",trigger:"change"}],menuView:[{required:!0,message:"请选择菜单视图",trigger:"change"}]}}},created:function(){this.queryAppId(),this.queryBranchNum()},directives:{clickoutside:{bind:function(e,t,a){function i(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e.__vueClickOutside__=i,document.addEventListener("click",i)},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}}},methods:{appChange:function(){this.menuView=[],this.QueryForm.menuView="",this.queryMenuView()},queryMenuView:function(){var e=this;this.loading=!0;var t=new m.a;t.data.AppNum=this.QueryForm.appId,t.data.length=99999,t.data.start=0,Object(n.a)(t).then(function(t){e.loading=!1,e.menuView=t.RspInfo.pageList||[]}).catch(function(t){e.loading=!1,e.$aui.message.show.error(t.SYS_HEAD.ReturnMessage)})},queryBranchNum:function(){var e=this,t=new p.a;t.data.DataKey="BusinessType",Object(n.a)(t).then(function(t){e.businessTypeList=t.RspInfo.Result||[]}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),console.error("查询错误",t)})},queryAppId:function(){var e=this;this.loading=!0;var t=new s.a;t.data.UserNum=this.$store.getters.UserNum,Object(n.a)(t).then(function(t){e.loading=!1,e.appId=t.RspInfo.Result||[]}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"error",message:t.SYS_HEAD.ReturnMessage})})},clickEvent:function(){this.isShowMenu=!1},handleClose:function(e){this.isShowMenu=!1},sure:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var a=new u;a.data=r()({},e.form),a.data.APP_NO=e.QueryForm.appId,a.data.MENU_VIEW_NO=e.QueryForm.menuView,a.data.TX_NO=e.form.MenuNum,Object(n.a)(a).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"保存成功!"}),e.addTradeGroup=!1,e.$refs.form.resetFields(),e.$refs.form.clearValidate()}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"error",message:t.SYS_HEAD.ReturnMessage+"!"})})}})},addTradGroup:function(){this.isShowMenu=!1,this.form=r()({},this.currentRow),this.qryTradeParam()},qryTradeParam:function(){var e=this;this.loading=!0;var t=new c;t.data.APP_NO=this.QueryForm.appId,t.data.MENU_VIEW_NO=this.QueryForm.menuView,t.data.TX_NO=this.form.MenuNum,Object(n.a)(t).then(function(t){if(e.loading=!1,t.RspInfo.Result){var a=t.RspInfo.Result[0];e.form.BIZ_TYP_CD=a.BIZ_TYP_CD,e.form.STRK_BAL_FLG=a.STRK_BAL_FLG,e.form.EXANTE_COLTFE_NM=a.EXANTE_COLTFE_NM,e.form.SON_TX_CD=a.SON_TX_CD,e.form.TX_PR_CD=a.TX_PR_CD,e.form.IF_MAKE_SGNIN=a.IF_MAKE_SGNIN}else e.$aui.message.show({type:"warning",message:"交易未配置参数!"});e.addTradeGroup=!0}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"error",message:t.SYS_HEAD.ReturnMessage+"!"})})},returnMes:function(){this.$refs.form.resetFields(),this.$refs.form.clearValidate(),this.addTradeGroup=!1},rightClick:function(e,t,a,i){this.currentRow=t,"0"!=t.MenuNum&&"01"!=t.MenuType&&(this.isShowMenu=!0,e.clientY+200>document.body.clientHeight?(this.$refs.rightClickLog.style.top=document.body.clientHeight-200+"px",this.$refs.rightClickLog.style.left=e.clientX+"px"):(this.$refs.rightClickLog.style.top=e.clientY+"px",this.$refs.rightClickLog.style.left=e.clientX+"px"))},resetForm:function(){this.filterText="",this.$refs.QueryForm.resetFields()},queryDeal:function(){var e=this;this.$refs.QueryForm.validate(function(t){if(t){e.tradeTreeData=[],e.addTradeGroup=!1,e.isDisabledDel=!1,e.loading=!0;var a=new d.a;a.data.AppNum=e.QueryForm.appId,a.data.MenuViewNum=e.QueryForm.menuView,Object(n.a)(a).then(function(t){e.loading=!1;var a=t.RspInfo.menuTreeDict||[],i=[{MenuNum:"0",SupMenuNo:"",MenuName:"主菜单",Children:[]}];i[0].Children=a,e.tradeTreeData=i,e.loading=!1}).catch(function(t){e.tradeTreeData=[],e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),e.loading=!1})}})},filterNode:function(e,t){return!e||(-1!==t.MenuNum.indexOf(e)||-1!==t.MenuName.indexOf(e))}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",[a("aui-form",{ref:"QueryForm",attrs:{model:e.QueryForm,rules:e.queryRules,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"应用编号",prop:"appId"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择应用编号"},on:{change:e.appChange},model:{value:e.QueryForm.appId,callback:function(t){e.$set(e.QueryForm,"appId",t)},expression:"QueryForm.appId"}},e._l(e.appId,function(e){return a("aui-option",{key:e.AppNum,attrs:{label:e.AppNum+"-"+e.AppName,value:e.AppNum,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"菜单视图",prop:"menuView"}},[a("aui-select",{attrs:{placeholder:"请选择菜单视图"},model:{value:e.QueryForm.menuView,callback:function(t){e.$set(e.QueryForm,"menuView",t)},expression:"QueryForm.menuView"}},e._l(e.menuView,function(e){return a("aui-option",{key:e.menuviewnum+"-"+e.appnum,attrs:{label:e.menuviewnum+"-"+e.menuviewname,value:e.menuviewnum,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.queryDeal}},[e._v("查询")])],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(t){e.resetForm("QueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:8}},[a("aui-card",{staticClass:"itemHeight tree"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("交易树")]),e._v(" "),a("span",{staticClass:"treeTitle"},[e._v("右击交易进行操作")])]),e._v(" "),a("div",{staticClass:"trade-tree-menu-body"},[a("aui-tree",{ref:"tree2",attrs:{data:e.tradeTreeData,"node-key":"MenuNum",props:{label:"MenuName",children:"Children"},"filter-node-method":e.filterNode},on:{"node-click":e.clickEvent,"node-contextmenu":e.rightClick}})],1)])],1),e._v(" "),a("aui-col",{attrs:{span:16}},[a("aui-card",{staticClass:"itemHeight"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("交易属性维护")])]),e._v(" "),e.addTradeGroup?a("div",{staticStyle:{height:"500px",overflow:"auto"}},[a("aui-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"130px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"交易编号:",prop:"MenuNum"}},[a("span",[e._v(e._s(e.form.MenuNum))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"交易名称:",prop:"MenuName"}},[a("span",[e._v(e._s(e.form.MenuName))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"业务类型:",prop:"BIZ_TYP_CD"}},[a("aui-select",{attrs:{placeholder:"请选择业务类型"},model:{value:e.form.BIZ_TYP_CD,callback:function(t){e.$set(e.form,"BIZ_TYP_CD",t)},expression:"form.BIZ_TYP_CD"}},e._l(e.businessTypeList,function(e){return a("aui-option",{key:e.DataKeyVal,attrs:{label:e.DataKeyVal+"-"+e.Meaning,value:e.DataKeyVal}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"交易抹账标识:",prop:"STRK_BAL_FLG"}},[a("aui-select",{attrs:{placeholder:"请选择交易抹账标识"},model:{value:e.form.STRK_BAL_FLG,callback:function(t){e.$set(e.form,"STRK_BAL_FLG",t)},expression:"form.STRK_BAL_FLG"}},e._l(e.list1,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"事前收费标识:",prop:"EXANTE_COLTFE_NM"}},[a("aui-select",{attrs:{placeholder:"请选择事前收费标识"},model:{value:e.form.EXANTE_COLTFE_NM,callback:function(t){e.$set(e.form,"EXANTE_COLTFE_NM",t)},expression:"form.EXANTE_COLTFE_NM"}},e._l(e.list3,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"子交易标识:",prop:"SON_TX_CD"}},[a("aui-select",{attrs:{placeholder:"请选择事前收费标识"},model:{value:e.form.SON_TX_CD,callback:function(t){e.$set(e.form,"SON_TX_CD",t)},expression:"form.SON_TX_CD"}},e._l(e.list5,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"交易补打印标识:",prop:"TX_PR_CD"}},[a("aui-select",{attrs:{placeholder:"请选择交易补打印标识"},model:{value:e.form.TX_PR_CD,callback:function(t){e.$set(e.form,"TX_PR_CD",t)},expression:"form.TX_PR_CD"}},e._l(e.list2,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"是否需要签到办理:",prop:"IF_MAKE_SGNIN"}},[a("aui-select",{attrs:{placeholder:"请选择交易补打印标识"},model:{value:e.form.IF_MAKE_SGNIN,callback:function(t){e.$set(e.form,"IF_MAKE_SGNIN",t)},expression:"form.IF_MAKE_SGNIN"}},e._l(e.list4,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1),e._v(" "),a("aui-row",{staticStyle:{margin:"20px 0","text-align":"center"}},[a("aui-button",{attrs:{size:"mini"},on:{click:e.returnMes}},[e._v("返回")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确定")])],1)],1):e._e()])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"},{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"rightClickLog",staticClass:"rightStyle"},[a("ul",{staticClass:"rightClickParent"},[a("li",{staticClass:"rightClickChildren"},[a("aui-button",{attrs:{size:"mini",type:"text"},on:{click:e.addTradGroup}},[e._v("修改")])],1)])])],1)},staticRenderFns:[]};var _=a("/Xao")(f,h,!1,function(e){a("KW7d")},"data-v-fcab56c6",null);t.default=_.exports},aYJl:function(e,t,a){"use strict";var i=a("AA3o"),r=a.n(i);t.a=function e(){r()(this,e),this.data={AppNum:"",MenuViewNum:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="QueryMenuTree",this.TransServiceCode="mg-afaservices-upm/queryMenuTree"}},wRXW:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n@-webkit-keyframes myfirst-data-v-fcab56c6 {\n0% {\n    right: 0;\n}\n25% {\n    right: -144px;\n}\n50% {\n    right: 0;\n}\n75% {\n    right: -144px;\n}\n100% {\n    right: 0;\n}\n}\n@keyframes myfirst-data-v-fcab56c6 {\n0% {\n    right: 0;\n}\n25% {\n    right: -144px;\n}\n50% {\n    right: 0;\n}\n75% {\n    right: -144px;\n}\n100% {\n    right: 0;\n}\n}\n.clearfix[data-v-fcab56c6] {\n  position: relative;\n  overflow: hidden;\n}\n.treeTitle[data-v-fcab56c6] {\n  position: absolute;\n  right: 0;\n  color: #ccc;\n}\n.itemHeight[data-v-fcab56c6] {\n  height: 550px;\n}\n.rightStyle[data-v-fcab56c6] {\n  position: fixed;\n  background: #fff;\n  z-index: 20000;\n}\n.rightClickParent[data-v-fcab56c6] {\n  padding: 10px 0;\n  margin: 5px 0;\n  background-color: #fff;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n          box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n.rightClickChildren[data-v-fcab56c6] {\n  list-style: none;\n  line-height: 36px;\n  padding: 0 20px;\n  margin: 0;\n  font-size: 14px;\n  color: #606266;\n  cursor: pointer;\n  outline: none;\n}\n.rightClickChildren[data-v-fcab56c6]:hover {\n  background-color: #ecf5ff;\n  color: #66b1ff;\n}\n.dialog-text[data-v-fcab56c6] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.trade-tree-menu-body[data-v-fcab56c6] {\n  height: 458px;\n  overflow: auto;\n}\n",""])}});