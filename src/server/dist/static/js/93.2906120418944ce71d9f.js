webpackJsonp([93],{QvvJ:function(e,a,t){var n=t("u4cA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("8bSs")("164ca798",n,!0)},Z8Ju:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("lC5x"),r=t.n(n),o=t("J0Oq"),i=t.n(o),s=t("syAl"),u=t("tzsN"),c=t("0oES"),l=t("0VOF"),d=t("AA3o"),m=t.n(d),g=function e(){m()(this,e),this.data={branchId:""},this.TransServiceCode="aums.v044.devopenrate_poi"},p=function e(){m()(this,e),this.data={branchId:""},this.QueryRowNum="",this.QueryPageNo="",this.TransServiceCode="aums.v054.devopenrate_view"},h={name:"dev-number-form-manage",components:{selectTree:u.a},data:function(){return{loading:!1,brno:[],branchNum:[],queryForm:{branchId:[]},devNumberTableData:[],currentPage:1,tableTotal:0,pageSize:s.a.get("PageSize"),dialogOptions:{isShow:!1}}},mounted:function(){this.queryModel()},watch:{queryForm:{handler:function(e,a){this.currentPage=1},deep:!0}},methods:{clearForm:function(e){this.$refs[""+e].resetFields()},detailInfo:function(){console.log("应该做点什么")},queryModel:function(){var e=this;return i()(r.a.mark(function a(){var t,n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new p).data.branchId=e.queryForm.branchId,t.QueryPageNo=e.currentPage,t.QueryRowNum=e.pageSize,a.next=7,Object(c.a)(t);case 7:n=a.sent,e.loading=!1,"000000"==n.SYS_HEAD.ReturnCode?(o=n.RSP_BODY.resultSet,e.devNumberTableData=o,console.log(e.devNumberTableData),e.tableTotal=n.RSP_BODY.total||n.QUERY_INFO_HEAD.QueryAllDataCount):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+n.SYS_HEAD.ReturnCode+"，错误信息："+n.SYS_HEAD.ReturnMessage});case 10:case"end":return a.stop()}},a,e)}))()},getExcel:function(){var e=this;return i()(r.a.mark(function a(){var t,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new g).data.branchId=e.queryForm.branchId[0],a.next=5,Object(c.a)(t);case 5:n=a.sent,e.loading=!1,"000000"==n.SYS_HEAD.ReturnCode?e.downloadFile(n.RSP_BODY.fileName):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+n.SYS_HEAD.ReturnCode+"，错误信息："+n.SYS_HEAD.ReturnMessage});case 8:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(){this.queryModel()},handleCurrentChange:function(){this.queryModel()}},created:function(){var e=this;return i()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.loading=!0,(t=new l.a).data.orgno=e.$store.getters.BranchNum,Object(c.a)(t).then(function(a){e.loading=!1,e.branchNum=a.RspInfo.Result||[],e.brno=toolBox.formatTreeData(e.branchNum,"orgno","superno"),e.queryForm.branchId.push(e.brnoList[0].orgno),e.queryModel()}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)});case 4:case"end":return a.stop()}},a,e)}))()}},b={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dev-number-form-manage",attrs:{"element-loading-text":"加载中。。。"}},[e.dialogOptions.isShow?e._e():t("div",[t("aui-card",{staticClass:"type-info-box-card"},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"机构编号",prop:"branchId"}},[t("select-tree",{ref:"tree",staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.brno,placeholder:"请选择机构"},model:{value:e.queryForm.branchId,callback:function(a){e.$set(e.queryForm,"branchId",a)},expression:"queryForm.branchId"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.queryModel}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(a){e.clearForm("queryForm")}}},[e._v("重置")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[e.btnPermission("Button_DevNumRep_Export")?t("aui-button",{staticClass:"b-button",attrs:{type:"primary",size:"mini",icon:"aui-icon-download"},on:{click:e.getExcel}},[e._v("导出")]):e._e()],1)],1)],1)],1),e._v(" "),t("aui-card",{staticClass:"type-info-bottom"},[t("aui-table",{ref:"devNumberTableData",staticClass:"tableMarginTop",attrs:{data:e.devNumberTableData,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{prop:"BRANDNAME",label:"设备品牌"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DEVTYPE",label:"设备类型"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DEVMODEL",label:"设备型号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"SUMDEVID",label:"设备数量"}})],1),e._v(" "),t("div",{staticClass:"box"},[t("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.tableTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.currentPage=a}}})],1)],1)],1)])},staticRenderFns:[]};var f=t("/Xao")(h,b,!1,function(e){t("QvvJ")},null,null);a.default=f.exports},u4cA:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.aui-card {\n  overflow: inherit;\n}\n",""])}});