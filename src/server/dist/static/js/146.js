webpackJsonp([146],{FcsP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("tzsN"),r=a("0oES"),i=a("pADA"),o=a("syAl"),l=a("Luip"),s=a("AA3o"),c=a.n(s),u=function e(){c()(this,e),this.data={startdate:"",enddate:"",branchNo:"",tellerNo:"",expdealstatus:"",channeltype:""},this.TransServiceCode="aums.v124_query_exception_record",this.QueryRowNum="",this.QueryPageNo=""},d=function e(){c()(this,e),this.data={startdate:"",enddate:"",branchNo:"",tellerNo:"",expdealstatus:"",channeltype:""},this.TransServiceCode="aums.v135_query_exception_record",this.QueryRowNum="",this.QueryPageNo=""},p={components:{selectTree:n.a},data:function(){return{pickerOptionsStart:{disabledDate:function(e){(new Date).getTime();return e.getTime()>Date.now()}},brnoList:[],formInline:{startdate:"",enddate:"",selBrno:[],tellerNo:void 0,expdealstatus:void 0,channeltype:void 0},currentPage:1,loading:!1,tableData:[],expflagSpinner:[{label:"系统",value:"A"},{label:"人工",value:"M"}],operatetype:o.a.get("operatetype"),expflag:o.a.get("expflag")}},created:function(){this.formInline.startdate=i.a.getNowTime(29),this.formInline.enddate=i.a.getNowTime(0),this.pageSize=o.a.get("PageSize"),this.initBrno(),this.queryInfoList()},watch:{formInline:{handler:function(e,t){this.currentPage=1},deep:!0}},methods:{dFormat:function(e,t){return i.a.timeFormat2Date(e[t.property])},tFormat:function(e,t){return i.a.timeFormat2Time(e[t.property])},dateChange:function(){this.formInline.startdate>this.formInline.enddate?(this.$aui.message.show({type:"warning",message:"开始日期不能大于结束日期"}),this.formInline.startdate=i.a.getNowTime(29),this.formInline.enddate=i.a.getNowTime(0)):this.formInline.startdate<i.a.getNowTime(365)&&(this.$aui.message.show({type:"warning",message:"开始日期不能超过当日前12个月"}),this.formInline.startdate=i.a.getNowTime(365))},initBrno:function(){var e=this,t=new l.a;t.data.spinnerList=[{spinnerName:"branch"}],Object(r.a)(t).then(function(t){e.brnoList=t.RSP_BODY.branchSpinner}).catch(function(e){console.error("查询错误",e)})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},expflagFormat:function(e,t){return this.expflag[e[t.property]]},operatetypeFormat:function(e,t){return this.operatetype[e[t.property]]},queryInfoList:function(){var e=this;this.loading=!0;var t=new u;t.data.startdate=this.formInline.startdate,t.data.enddate=this.formInline.enddate,t.data.branchNo=this.formInline.selBrno[0],t.data.tellerNo=this.formInline.tellerNo,t.data.expdealstatus=this.formInline.expdealstatus,t.data.channeltype=this.formInline.channeltype,t.QueryRowNum=o.a.get("PageSize"),t.QueryPageNo=this.currentPage,Object(r.a)(t).then(function(t){e.loading=!1,e.tableData=t.RSP_BODY.expinfoList||[]}).catch(function(t){e.tableData=[],e.loading=!1,console.log(t)})},exportList:function(){var e=this,t=new d;t.data.startdate=this.formInline.startdate,t.data.enddate=this.formInline.enddate,t.data.branchNo=this.formInline.selBrno[0],t.data.tellerNo=this.formInline.tellerNo,t.data.expdealstatus=this.formInline.expdealstatus,t.data.channeltype=this.formInline.channeltype,t.QueryRowNum=o.a.get("PageSize"),t.QueryPageNo=this.currentPage,Object(r.a)(t).then(function(t){e.downloadFile(t.RSP_BODY.fileName)}).catch(function(e){console.log(e)})},resetForm:function(e){this.formInline.selBrno=[],this.$refs[e].resetFields()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("aui-card",{staticStyle:{"margin-bottom":"10px",overflow:"visible"}},[a("aui-form",{ref:"formInline",attrs:{model:e.formInline,"label-position":"top",size:"mini"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"机构",prop:"branchNo"}},[a("select-tree",{attrs:{"tree-data":e.brnoList,"single-check":!0,"node-key":"branchId",props:{id:"branchId",label:"branchName",children:"childBranch"}},model:{value:e.formInline.selBrno,callback:function(t){e.$set(e.formInline,"selBrno",t)},expression:"formInline.selBrno"}})],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"开始日期",prop:"startdate"}},[a("aui-date-picker",{attrs:{editable:!1,"picker-options":e.pickerOptionsStart,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.formInline.startdate,callback:function(t){e.$set(e.formInline,"startdate",t)},expression:"formInline.startdate"}})],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"结束日期",prop:"enddate"}},[a("aui-date-picker",{attrs:{editable:!1,"picker-options":e.pickerOptionsStart,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.formInline.enddate,callback:function(t){e.$set(e.formInline,"enddate",t)},expression:"formInline.enddate"}})],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"柜员号",prop:"tellerNo"}},[a("aui-input",{attrs:{placeholder:"请输入柜员号"},model:{value:e.formInline.tellerNo,callback:function(t){e.$set(e.formInline,"tellerNo",t)},expression:"formInline.tellerNo"}})],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"处理标志",prop:"expflag"}},[a("aui-select",{attrs:{placeholder:"请选择处理标志"},model:{value:e.formInline.expflag,callback:function(t){e.$set(e.formInline,"expflag",t)},expression:"formInline.expflag"}},e._l(e.expflagSpinner,function(e){return a("aui-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"渠道编号",prop:"channeltype"}},[a("aui-input",{attrs:{placeholder:"请输入渠道编号"},model:{value:e.formInline.channeltype,callback:function(t){e.$set(e.formInline,"channeltype",t)},expression:"formInline.channeltype"}})],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-form-item",[a("aui-button",{attrs:{type:"primary",icon:"aui-icon-search"},on:{click:e.queryInfoList}},[e._v("查询")])],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-form-item",[a("aui-button",{attrs:{type:"warning",icon:"aui-icon-refresh"},on:{click:function(t){e.resetForm("formInline")}}},[e._v("重置")])],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-form-item",[e.btnPermission("Button_ErrorInfoQue_Export")?a("aui-button",{attrs:{type:"primary",icon:"aui-icon-download"},on:{click:e.exportList}},[e._v("导出")]):e._e()],1)],1)],1)],1)],1),e._v(" "),a("aui-card",[a("aui-table",{staticStyle:{},attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[a("aui-table-column",{attrs:{fixed:"",prop:"agentserialno",label:"异常流水号",width:"120"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"workdate",formatter:e.dFormat,label:"异常日期",width:"100"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"channeltype",label:"渠道号",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"devid",label:"设备编号",width:"100"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"exptype",label:"异常类型",width:"100"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"branchNo",label:"机构号",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"tellerNo",label:"柜员号",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"expflag",formatter:e.expflagFormat,label:"处理标志",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"operatetype",formatter:e.operatetypeFormat,label:"处理类型",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"exptrytimes",label:"重复次数",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"expdealstatus",label:"处理状态",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"operaterecord",label:"处理信息","min-width":"150"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"explevel",label:"异常级别",width:"80"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"expdesc",label:"异常场景描述",width:"130"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"expbegintime",label:"异常开始时间",width:"180"}})],1),e._v(" "),a("aui-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":e.currentPage,background:"",layout:"total, prev, pager, next, jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var h=a("/Xao")(p,m,!1,function(e){a("P6L6")},null,null);t.default=h.exports},P6L6:function(e,t,a){var n=a("tGNI");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("5a45e87c",n,!0)},tGNI:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.aui-date-editor.aui-input,\n.aui-date-editor.el-input__inner {\n  width: 100%;\n}\n\n",""])}});