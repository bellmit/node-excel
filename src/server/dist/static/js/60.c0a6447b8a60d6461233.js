webpackJsonp([60],{"1n1P":function(e,a,t){var i=t("Broy");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("16314db7",i,!0)},"55CA":function(e,a,t){var i=t("mEwV");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("128d05c3",i,!0)},Broy:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},Yqh5:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("0oES"),o=t("pADA"),r=t("syAl"),l=t("B+2e"),s=t("djZp"),n=t("AA3o"),u=t.n(n),c=function e(){u()(this,e),this.data={BusiOper:"A",Brno:"",DeviceType:"",PlayRuleType:"",AdNo:"",PlayStyle:"",FileSpaceTime:"",AdSpaceTime:"",HomePlayFlag:"",HomeSpaceTime:"",DefaultFlag:"",Remark:"",Purpose:"",SerialNum:"",PictureStyle:"",VideoStyle:"",WordStyle:"",VoiceStyle:""},this.BusiDataKey="AdtPlayRule_Add",this.TransServiceCode="ib-dbcomm/dbComm"},p=function e(){u()(this,e),this.data={BusiOper:"M",PlayRuleID:"",Brno:"",DeviceType:"",PlayRuleType:"",AdNo:"",PlayStyle:"",FileSpaceTime:"",AdSpaceTime:"",HomePlayFlag:"",HomeSpaceTime:"",DefaultFlag:"",Remark:"",Purpose:"",SerialNum:"",PictureStyle:"",VideoStyle:"",WordStyle:"",VoiceStyle:""},this.BusiDataKey="AdtPlayRule_Mod",this.TransServiceCode="ib-dbcomm/dbComm"},d=function e(){u()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="SelBranchAD",this.TransServiceCode="ib-dbcomm/dbComm"},m=t("tzsN"),y=t("0VOF"),f=t("fCv1"),h={components:{selectTree:m.a},props:{option:Object},data:function(){var e=this;return{deviceTypeDisabled:"",loading:!1,adPurposeList:[],deviceTypeList:[],adTypeList:[],pictureStyleList:[],wordStyleList:[],playStyleList:[],defaultFlagList:[],adNoList:[],branchNum:[],form:{ruleId:"",brno:[],adPurpose:"",deviceType:"",sort:"1",adType:"",adNo:[],pictureStyle:"0",voiceStyle:"",videoStyle:"",wordStyle:"0",playStyle:"1",fileSpaceTime:"",adSpaceTime:"",homePlayFlag:"1",homeSpaceTime:"",defaultFlag:"1",message:""},rules:{brno:[{required:!0,message:"请选择机构编号",trigger:"change"}],adPurpose:[{required:!0,message:"请选择广告应用途",trigger:"change"}],sort:[{required:!0,message:"请输入位置序号",trigger:"blur"}],deviceType:[{required:!0,message:"请选择设备类型",trigger:"change"}],adNo:[{type:"array",required:!0,message:"请选择广告编号",trigger:"change"},{validator:function(a,t,i){"P"==e.form.adType?t.length>3&&i(new Error("播放规则最多绑定3个图片广告信息")):t.length>1&&i(new Error("播放规则最多绑定1个视频或文字广告信息")),i()},trigger:"change"}],message:[{validator:Object(f.h)(200),trigger:"blur"}]}}},created:function(){this.adTypeList=o.a.objToArray(r.a.get("adType")),this.pictureStyleList=o.a.objToArray(r.a.get("PictureStyle")),this.playStyleList=o.a.objToArray(r.a.get("PlayStyle")),this.defaultFlagList=o.a.objToArray(r.a.get("IsReserve")),this.wordStyleList=o.a.objToArray(r.a.get("WordStyle"))},methods:{openUpdate:function(){var e=this;this.loading=!0,this.adPurposeLoad(),this.$nextTick(function(){"2"==e.option.mark?(e.setData(),e.adInfoQuery(),e.form.adNo=e.option.currentRow.AdNo.split(",")):e.$refs.form&&e.$refs.form.clearValidate()}),this.loading=!1},adInfoQuery:function(e){var a=this;if(this.loading=!0,""==this.form.brno||""==this.form.adType)return this.loading=!1,!1;e&&(this.form.voiceStyle="",this.form.videoStyle="",this.form.wordStyle="0",this.form.pictureStyle="0"),this.form.adNo=[];var t=new s.a;t.data.Brno=this.form.brno[0],t.data.AdType=this.form.adType,t.data.QueryPageNo="1",t.data.QueryRowNum="99999",Object(i.a)(t).then(function(e){a.adNoList=e.RspInfo.resultSet||[],a.loading=!1}).catch(function(e){a.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage}),a.loading=!1,console.error("查询错误",e)})},adPurposeLoad:function(){var e=this;this.loading=!0;var a=new l.a;a.data.DataKey="Purpose",Object(i.a)(a).then(function(a){e.loading=!1,e.adPurposeList=a.RspInfo.Result||[]}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},setData:function(){this.form.brno.push(this.option.currentRow.Brno),this.form.message=this.option.currentRow.Remark,this.form.deviceType=this.option.currentRow.DeviceType,this.form.adType=this.option.currentRow.PlayRuleType,this.form.playStyle=this.option.currentRow.PlayStyle,this.form.fileSpaceTime=this.option.currentRow.FileSpaceTime,this.form.adSpaceTime=this.option.currentRow.AdSpaceTime,this.form.homePlayFlag=this.option.currentRow.HomePlayFlag,this.form.homeSpaceTime=this.option.currentRow.HomeSpaceTime,this.form.defaultFlag=this.option.currentRow.DefaultFlag,this.form.adPurpose=this.option.currentRow.Purpose,this.form.sort=this.option.currentRow.SerialNum,this.form.pictureStyle=this.option.currentRow.PictureStyle,this.form.videoStyle=this.option.currentRow.VideoStyle,this.form.wordStyle=this.option.currentRow.WordStyle,this.form.voiceStyle=this.option.currentRow.VoiceStyle,this.form.ruleId=this.option.currentRow.PlayRuleID},closeUpdete:function(){this.$refs.form.resetFields(),this.$refs.form.clearValidate()},resetHomeTime:function(){"0"==this.form.homePlayFlag&&(this.form.homeSpaceTime="")},ItemUpdate:function(){var e=this;this.$refs.form.validate(function(a){if(!a)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;e.loading=!0;var t="1"==e.option.mark?new c:new p;t.data.PlayRuleID=e.form.ruleId,t.data.Brno=e.form.brno[0],t.data.Remark=e.form.message,t.data.DeviceType=e.form.deviceType,t.data.AdNo=e.form.adNo.join(","),t.data.PlayRuleType=e.form.adType,t.data.PlayStyle=e.form.playStyle,t.data.FileSpaceTime=e.form.fileSpaceTime,t.data.AdSpaceTime=e.form.adSpaceTime,t.data.HomePlayFlag=e.form.homePlayFlag,t.data.HomeSpaceTime=e.form.homeSpaceTime,t.data.DefaultFlag=e.form.defaultFlag,t.data.Purpose=e.form.adPurpose,t.data.SerialNum=e.form.sort,t.data.PictureStyle=e.form.pictureStyle,t.data.VideoStyle=e.form.videoStyle,t.data.WordStyle=e.form.wordStyle,t.data.VoiceStyle=e.form.voiceStyle,Object(i.a)(t).then(function(a){e.$emit("refreshTable"),e.option.isShow=!1;var t="1"==e.option.mark?"创建":"修改";e.$aui.message.show({type:"success",message:t+"成功!"}),e.loading=!1}).catch(function(a){e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1})})},checkInfo:function(){var e=this;this.$refs.form.validate(function(a){if(a){e.loading=!0;var t=new d;t.data.BranchNum=e.form.brno[0],t.data.EQUIP_TYP_NO=e.form.deviceType,Object(i.a)(t).then(function(a){e.loading=!1,a.RspInfo.Result?(e.form.deviceType="",e.$aui.message.show({type:"warning",message:"该机构下已维护过此广告编号!"})):e.ItemUpdate()}).catch(function(a){e.loading=!1})}})},ruleManage:function(){"1"==this.option.mark?(this.deviceTypeDisabled=!1,this.checkInfo()):(this.deviceTypeDisabled=!0,this.ItemUpdate())}}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("aui-dialog",{attrs:{title:e.option.title,visible:e.option.isShow,width:"820px","close-on-click-modal":!1},on:{"update:visible":function(a){e.$set(e.option,"isShow",a)},show:e.openUpdate,hide:e.closeUpdete}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("aui-card",[t("aui-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules,"label-width":"150px","label-position":"right"}},[t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[e.option.isDisabled?t("aui-form-item",{attrs:{label:"播放规则ID:",prop:"ruleId"}},[t("aui-input",{attrs:{disabled:!0},model:{value:e.form.ruleId,callback:function(a){e.$set(e.form,"ruleId",a)},expression:"form.ruleId"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"机构编号:",prop:"brno"}},[t("select-tree",{staticStyle:{width:"170px"},attrs:{props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.option.branchNum,"single-check":!0,placeholder:"请选择机构",disabled:e.option.isDisabled},model:{value:e.form.brno,callback:function(a){e.$set(e.form,"brno",a)},expression:"form.brno"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"广告用途:",prop:"adPurpose"}},[t("aui-select",{attrs:{placeholder:"请选择广告用途"},model:{value:e.form.adPurpose,callback:function(a){e.$set(e.form,"adPurpose",a)},expression:"form.adPurpose"}},e._l(e.adPurposeList,function(e){return t("aui-option",{key:e.DataKeyVal,attrs:{label:e.Meaning,value:e.DataKeyVal,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"设备类型",prop:"deviceType"}},[t("aui-select",{attrs:{placeholder:"请选择设备类型",disabled:e.option.isDisabled},model:{value:e.form.deviceType,callback:function(a){e.$set(e.form,"deviceType",a)},expression:"form.deviceType"}},e._l(e.option.deviceTypeList,function(e){return t("aui-option",{key:e.DataKeyVal,attrs:{label:e.DataKeyVal+"-"+e.Meaning,value:e.DataKeyVal,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"位置序号:",prop:"sort"}},[t("aui-input-number",{attrs:{min:1,placeholder:"请输入位置序号"},model:{value:e.form.sort,callback:function(a){e.$set(e.form,"sort",a)},expression:"form.sort"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"广告类型",prop:"adType"}},[t("aui-select",{attrs:{placeholder:"请选择广告类型"},on:{change:function(a){e.adInfoQuery("1")}},model:{value:e.form.adType,callback:function(a){e.$set(e.form,"adType",a)},expression:"form.adType"}},e._l(e.adTypeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"广告编号",prop:"adNo"}},[t("aui-select",{attrs:{multiple:"",placeholder:"请选择广告编号"},model:{value:e.form.adNo,callback:function(a){e.$set(e.form,"adNo",a)},expression:"form.adNo"}},e._l(e.adNoList,function(a){return t("aui-option",{key:a.AdNo,attrs:{label:a.AdName,value:a.AdNo,disabled:a.disabled}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.AdNo+"-"+a.AdName))])])}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},["P"==e.form.adType?t("aui-form-item",{attrs:{label:"图片样式",prop:"pictureStyle"}},[t("aui-select",{attrs:{placeholder:"请选择图片样式"},model:{value:e.form.pictureStyle,callback:function(a){e.$set(e.form,"pictureStyle",a)},expression:"form.pictureStyle"}},e._l(e.pictureStyleList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},["V"==e.form.adType?t("aui-form-item",{attrs:{label:"音频样式",prop:"voiceStyle"}},[t("aui-input",{attrs:{placeholder:"请输入音频样式"},model:{value:e.form.voiceStyle,callback:function(a){e.$set(e.form,"voiceStyle",a)},expression:"form.voiceStyle"}})],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},["V"==e.form.adType?t("aui-form-item",{attrs:{label:"视频样式",prop:"videoStyle"}},[t("aui-input",{attrs:{placeholder:"请输入视频样式"},model:{value:e.form.videoStyle,callback:function(a){e.$set(e.form,"videoStyle",a)},expression:"form.videoStyle"}})],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},["C"==e.form.adType?t("aui-form-item",{attrs:{label:"文字样式",prop:"wordStyle"}},[t("aui-select",{attrs:{placeholder:"请选择文字样式"},model:{value:e.form.wordStyle,callback:function(a){e.$set(e.form,"wordStyle",a)},expression:"form.wordStyle"}},e._l(e.wordStyleList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"播放样式",prop:"playStyle"}},[t("aui-select",{attrs:{placeholder:"请选择播放样式"},model:{value:e.form.playStyle,callback:function(a){e.$set(e.form,"playStyle",a)},expression:"form.playStyle"}},e._l(e.playStyleList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"文件播放间隔时间:",prop:"fileSpaceTime"}},[t("aui-input-number",{attrs:{min:1,placeholder:"请输入文件播放间隔时间"},model:{value:e.form.fileSpaceTime,callback:function(a){e.$set(e.form,"fileSpaceTime",a)},expression:"form.fileSpaceTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"广告播放间隔时间:",prop:"adSpaceTime"}},[t("aui-input-number",{attrs:{min:1,placeholder:"请输入广告播放间隔时间"},model:{value:e.form.adSpaceTime,callback:function(a){e.$set(e.form,"adSpaceTime",a)},expression:"form.adSpaceTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"主页面是否显示",prop:"homePlayFlag"}},[t("aui-select",{attrs:{placeholder:"请选择主页面是否显示"},on:{change:e.resetHomeTime},model:{value:e.form.homePlayFlag,callback:function(a){e.$set(e.form,"homePlayFlag",a)},expression:"form.homePlayFlag"}},e._l(e.defaultFlagList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},["1"==e.form.homePlayFlag?t("aui-form-item",{attrs:{label:"主界面显示间隔时间:",prop:"homeSpaceTime"}},[t("aui-input-number",{attrs:{min:1,placeholder:"请输入主界面显示间隔时间"},model:{value:e.form.homeSpaceTime,callback:function(a){e.$set(e.form,"homeSpaceTime",a)},expression:"form.homeSpaceTime"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"是否默认",prop:"defaultFlag"}},[t("aui-select",{attrs:{placeholder:"请选择是否默认"},model:{value:e.form.defaultFlag,callback:function(a){e.$set(e.form,"defaultFlag",a)},expression:"form.defaultFlag"}},e._l(e.defaultFlagList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value,disabled:e.disabled}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:40}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"备注:",prop:"message"}},[t("aui-input",{attrs:{placeholder:"请输入备注内容"},model:{value:e.form.message,callback:function(a){e.$set(e.form,"message",a)},expression:"form.message"}})],1)],1)],1)],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.option.isShow=!1}}},[e._v("返回")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.ruleManage}},[e._v("确定")])],1)],1)])],1)},staticRenderFns:[]};var b=t("/Xao")(h,g,!1,function(e){t("1n1P")},null,null).exports,v=(t("n6OB"),t("nXXQ")),S=(t("2JIZ"),function e(){u()(this,e),this.data={PlayRuleID:"",AdNo:"",BusiOper:"D"},this.BusiDataKey="AdtPlayRule_Del",this.TransServiceCode="ib-dbcomm/dbComm"}),T=function e(){u()(this,e),this.data={PlayRuleID:"",Brno:"",DeviceType:"",PageSize:"",CurtPage:"",StartRows:"",AdNo:"",BusiOper:"Q"},this.BusiDataKey="AdtPlayRule_Query",this.TransServiceCode="ib-dbcomm/dbComm"},w={components:{selectTree:m.a},data:function(){return{currentRow:[],QueryForm:{branchNum:[],deviceType:"",adsRuleId:"",adNo:""},branchNum:[],busiStatusMap:{},busiAttrMap:{},total:void 0,tabelDataList:[],deviceTypeList:[],defaultFlagMap:{},playStyleMap:{},wordStyleMap:{},pictureStyleMap:{},homePlayFlagMap:{},brnoMap:{},permission:{},loading:!1,isDisabledDel:!1,dialogList:{busiTypeAdd:b},dialogOptions:{isShow:!1},currentPage:1,pageSize:void 0,rules:{branchNum:[{required:!0,message:"请选择机构编号",trigger:"blur"}]}}},created:function(){this.pageSize=r.a.get("PageSize"),this.defaultFlagMap=r.a.get("IsReserve"),this.playStyleMap=r.a.get("PlayStyle"),this.wordStyleMap=r.a.get("WordStyle"),this.pictureStyleMap=r.a.get("PictureStyle"),this.homePlayFlagMap=r.a.get("HomePlayFlag"),this.queryBranchNum(),this.queryDeviceType()},computed:{},methods:{queryBranchNum:function(){var e=this;this.loading=!0;var a=new y.a;a.data.orgno=this.$store.getters.BranchNum,Object(i.a)(a).then(function(a){e.loading=!1,e.branchNum=a.RspInfo.Result||[],e.permission=o.a.objArray2Hash(e.branchNum,"orgno"),e.brnoMap=a.RspInfo.orgMap||{},e.branchNum=o.a.formatTreeData(e.branchNum,"orgno","superno"),e.QueryForm.branchNum.push(e.$store.getters.BranchNum)}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},queryDeviceType:function(){var e=this;this.loading=!0;var a=new v.a;Object(i.a)(a).then(function(a){e.loading=!1,e.deviceTypeList=a.RspInfo.Result||[]}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},dataFormat:function(e,a){if("Brno"==a.property)return e[a.property]+"-"+this.brnoMap[e[a.property]];if("DefaultFlag"==a.property)return this.defaultFlagMap[e[a.property]];if("PlayStyle"==a.property)return this.playStyleMap[e[a.property]];if("WordStyle"==a.property)return this.wordStyleMap[e[a.property]];if("PictureStyle"==a.property)return this.pictureStyleMap[e[a.property]];if("HomePlayFlag"==a.property)return this.homePlayFlagMap[e[a.property]];if("DeviceType"==a.property){for(var t=0;t<this.deviceTypeList.length;t++)if(e[a.property]==this.deviceTypeList[t].DataKeyVal)return e[a.property]+"-"+this.deviceTypeList[t].Meaning;return e[a.property]}},clickAdd:function(){this.dialogOptions.isShow=!0,this.dialogOptions.title="新增广告播放规则",this.dialogOptions.mark="1",this.dialogOptions.isDisabled=!1,this.dialogOptions.branchNum=this.branchNum,this.dialogOptions.deviceTypeList=this.deviceTypeList},clickUpdate:function(){this.dialogOptions.isShow=!0,this.dialogOptions.title="修改广告播放规则",this.dialogOptions.mark="2",this.dialogOptions.isDisabled=!0,this.dialogOptions.currentRow=this.currentRow,this.dialogOptions.branchNum=this.branchNum,this.dialogOptions.deviceTypeList=this.deviceTypeList},checkPermission:function(e){this.permission[this.currentRow.Brno]?e?this.clickUpdate():this.delBut():this.$aui.message.show({type:"warning",message:"权限不足,无法修改！"})},resetForm:function(){this.tabelDataList=[],this.$refs.QueryForm.resetFields()},delBut:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该广告播放规则, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.busiTypeDel()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},busiTypeDel:function(){var e=this;this.loading=!0;var a=new S;a.data.PlayRuleID=this.currentRow.PlayRuleID,a.data.AdNo=this.currentRow.AdNo,Object(i.a)(a).then(function(a){e.loading=!1,e.$aui.message.show({type:"success",message:"广告播放规则删除成功！"}),e.query()}).catch(function(a){e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),e.loading=!1,console.log(a)})},query:function(){var e=this;this.$refs.QueryForm.validate(function(a){if(a){e.loading=!0;var t=new T;t.data.Brno=e.QueryForm.branchNum[0],t.data.DeviceType=e.QueryForm.deviceType,t.data.PlayRuleID=e.QueryForm.adsRuleId,t.data.AdNo=e.QueryForm.adNo,t.data.PageSize=e.pageSize+"",t.data.CurtPage=e.currentPage+"",t.data.StartRows=(e.currentPage-1)*e.pageSize+"",Object(i.a)(t).then(function(a){e.loading=!1,a.RspInfo?(e.tabelDataList=a.RspInfo.Result||[],e.total=a.RspInfo.totalNum,0===e.total&&e.$aui.message.show({type:"warning",message:"没有满足条件得记录!"})):(e.loading=!1,e.$aui.message.show({type:"warning",message:"没有满足条件得记录!"}))}).catch(function(a){e.$aui.message.show({type:"warning",message:"错误信息："+a.SYS_HEAD.ReturnMessage}),e.loading=!1,console.log(a)})}})},handleCurrentChange:function(e){this.currentPage=e,this.query()},selectList:function(e){1==e.length?(this.isDisabledDel=!0,this.currentRow=e[0]):e.length>1?this.$refs.tabelDataList.toggleRowSelection(e[0]):this.isDisabledDel=!1}}},_={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-card",[t("aui-form",{ref:"QueryForm",attrs:{model:e.QueryForm,rules:e.rules,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"机构编号",prop:"branchNum"}},[t("select-tree",{staticStyle:{width:"170px"},attrs:{props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.branchNum,"single-check":!0,placeholder:"请选择机构"},model:{value:e.QueryForm.branchNum,callback:function(a){e.$set(e.QueryForm,"branchNum",a)},expression:"QueryForm.branchNum"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"设备类型",prop:"deviceType"}},[t("aui-select",{attrs:{filterable:"",placeholder:"请选择设备类型"},model:{value:e.QueryForm.deviceType,callback:function(a){e.$set(e.QueryForm,"deviceType",a)},expression:"QueryForm.deviceType"}},e._l(e.deviceTypeList,function(e){return t("aui-option",{key:e.DataKeyVal,attrs:{label:e.DataKeyVal+"-"+e.Meaning,value:e.DataKeyVal,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"广告编号",prop:"adNo"}},[t("aui-input",{attrs:{placeholder:"请输入广告编号"},model:{value:e.QueryForm.adNo,callback:function(a){e.$set(e.QueryForm,"adNo",a)},expression:"QueryForm.adNo"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"播放规则编号",prop:"adsRuleId"}},[t("aui-input",{attrs:{placeholder:"请输入播放规则编号"},model:{value:e.QueryForm.adsRuleId,callback:function(a){e.$set(e.QueryForm,"adsRuleId",a)},expression:"QueryForm.adsRuleId"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(a){e.resetForm("QueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{staticStyle:{"margin-top":"10px"}},[t("aui-row",[t("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Add")?t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:e.isDisabledDel},on:{click:e.clickAdd}},[e._v("新增")]):e._e()],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Add")?t("aui-button",{attrs:{type:"primary",disabled:!e.isDisabledDel,icon:"aui-icon-edit",size:"mini"},on:{click:function(a){e.checkPermission("1")}}},[e._v("修改")]):e._e()],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Edit")?t("aui-button",{attrs:{type:"danger",disabled:!e.isDisabledDel,icon:"aui-icon-delete",size:"mini"},on:{click:function(a){e.checkPermission()}}},[e._v("删除")]):e._e()],1)],1),e._v(" "),t("aui-table",{ref:"tabelDataList",staticClass:"tableMarginTop",attrs:{data:e.tabelDataList,border:"","header-row-class-name":"tableHeaderClass"},on:{"selection-change":e.selectList}},[t("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"Brno",formatter:e.dataFormat,label:"机构编号","min-width":"247px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"PlayRuleID",label:"规则ID","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DeviceType",label:"设备类型",formatter:e.dataFormat,"min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"AdNo",label:"广告编号","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"PlayStyle",formatter:e.dataFormat,label:"播放样式","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"WordStyle",formatter:e.dataFormat,label:"文字样式","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"PictureStyle",formatter:e.dataFormat,label:"图片样式","min-width":"147px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"VoiceStyle",label:"音频样式","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"VideoStyle",label:"视频样式","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"FileSpaceTime",label:"文件播放间隔时间","min-width":"77px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"AdSpaceTime",label:"广告播放间隔时间","min-width":"77px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"HomePlayFlag",formatter:e.dataFormat,label:"主界面是否显示","min-width":"97px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"HomeSpaceTime",label:"主界面显示间隔时间","min-width":"97px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DefaultFlag",formatter:e.dataFormat,label:"是否默认","min-width":"57px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"Remark",label:"备注","min-width":"107px"}})],1),e._v(" "),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),t("keep-alive",[t(e.dialogList.busiTypeAdd,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.query}})],1)],1)},staticRenderFns:[]};var P=t("/Xao")(w,_,!1,function(e){t("55CA")},"data-v-bb11e2cc",null);a.default=P.exports},mEwV:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])}});