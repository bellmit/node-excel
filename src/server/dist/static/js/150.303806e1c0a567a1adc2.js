webpackJsonp([150],{"45jz":function(t,a,e){var i=e("Syjh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("8bSs")("b5a7fee0",i,!0)},Syjh:function(t,a,e){(t.exports=e("BkJT")(!1)).push([t.i,"",""])},"XUt+":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("oxV9"),o=e("0oES"),r=e("tzsN"),s=e("syAl"),n=e("0VOF"),l=e("ZE0V"),u=e("AA3o"),c=e.n(u),p=function t(){c()(this,t),this.data={},this.CommCode="PLESeal",this.SceneCode="QrySealBrno",this.TransServiceCode="mg-afaservices-paperless/qrySealBrno"},d=e("pADA"),h=(e("H0cQ"),{components:{selectTree:r.a},data:function(){return{currentRow:[],tableData:[],brnoList:[],brnoMap:{},QueryForm:{branchNum:[],sealModelId:"",status:""},status:[{value:"0",label:"未启用"},{value:"1",label:"启用"}],statusMap:{},status1:{0:"待审核",1:"审核通过待审批",2:"审核未通过",3:"审批通过",4:"审批未通",5:"管理员撤销"},sealNameList:[],total:0,loading:!1,checkedPost:!1,dialogList:{sealAdd:i.a},dialogOptions:{isShow:!1,isStart:!0,isDetail:!1,brnoList:[],title:""},currentPage:1,pageSize:void 0}},created:function(){this.loading=!0,this.pageSize=s.a.get("PageSize"),this.statusMap=this.toolBox.objArray2Hash(this.status,"value"),this.queryBranchNum()},watch:{QueryForm:{handler:function(t,a){this.currentPage=1},deep:!0}},computed:{},methods:{querySealMode:function(){var t=this;this.loading=!0;var a=new l.a;a.data.STATUS="1",Object(o.a)(a).then(function(a){t.loading=!1,t.sealNameList=a.RspInfo.Result||[]}).catch(function(a){t.loading=!1,console.log(a)})},queryBranchNum:function(){var t=this;this.loading=!0;var a=new n.a;a.data.orgno=this.$store.getters.BranchNum,Object(o.a)(a).then(function(a){t.loading=!1,t.brnoMap=a.RspInfo.orgMap||{};var e=a.RspInfo.Result||[];t.permission=d.a.objArray2Hash(e,"orgno"),t.brnoList=d.a.formatTreeData(e,"orgno","superno"),t.query()}).catch(function(a){t.loading=!1,t.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},clickAdd:function(t){t?(this.dialogOptions.operType="2",this.dialogOptions.isShow=!0,this.dialogOptions.currentRow=t):(this.dialogOptions.isShow=!0,this.dialogOptions.operType="1"),this.dialogOptions.brnoMap=this.brnoMap,this.dialogOptions.title="印章启用"},clickUpdate:function(t){this.dialogOptions.isShow=!0,this.dialogOptions.operType="3",this.dialogOptions.currentRow=t,this.dialogOptions.brnoMap=this.brnoMap,this.dialogOptions.title="印章停用"},clickView:function(t){this.dialogOptions.isShow=!0,this.dialogOptions.operType="4",this.dialogOptions.currentRow=t,this.dialogOptions.brnoMap=this.brnoMap,this.dialogOptions.title="印章详情"},resetForm:function(t){this.$refs[""+t].resetFields()},changePage:function(t){this.currentPage=t,this.query()},query:function(){var t=this;this.loading=!0;var a=new p;a.data.SEALMODELID=this.QueryForm.sealModelId,a.data.BRANCH=this.QueryForm.branchNum[0]||"",a.data.STATUS=this.QueryForm.status,a.data.pagerownum=this.pageSize,a.data.currpage=this.currentPage,a.data.pageflag=4,Object(o.a)(a).then(function(a){t.tableData=a.RspInfo.struct||[],t.total=a.RspInfo.TotalNum||0,a.RspInfo.struct||t.$aui.message.show({type:"warning",message:"没有满足条件得记录!"}),t.loading=!1}).catch(function(a){t.tableData=[],t.total=0,t.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),t.loading=!1,console.log(a)})},dataFormat2:function(t,a){return t[a.property]+(this.statusMap[t[a.property]]?"-"+this.statusMap[t[a.property]].label:"")},dataFormat3:function(t,a){return t[a.property]+(this.status1[t[a.property]]?"-"+this.status1[t[a.property]]:"")},handleCurrentChange:function(t){this.currentRow=t[0],1==t.length?this.checkedPost=!0:this.checkedPost=!1},dialogDetail:function(){}}}),g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[e("aui-card",[e("aui-form",{ref:"QueryForm",attrs:{model:t.QueryForm,size:"mini","label-position":"top"}},[e("aui-row",{attrs:{gutter:10}},[e("aui-col",{attrs:{lg:4,md:6}},[e("aui-form-item",{attrs:{label:"机构编号",prop:"branchNum"}},[e("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":t.brnoList,placeholder:"请选择机构"},model:{value:t.QueryForm.branchNum,callback:function(a){t.$set(t.QueryForm,"branchNum",a)},expression:"QueryForm.branchNum"}})],1)],1),t._v(" "),e("aui-col",{attrs:{md:3,lg:4}},[e("aui-form-item",{attrs:{prop:"sealModelId",label:"印章名称"}},[e("aui-select",{attrs:{filterable:""},model:{value:t.QueryForm.sealModelId,callback:function(a){t.$set(t.QueryForm,"sealModelId",a)},expression:"QueryForm.sealModelId"}},t._l(t.sealNameList,function(t){return e("aui-option",{key:t.SEALMODELID,attrs:{label:t.SEALMODELID+"-"+t.SEALMODELDESC,value:t.SEALMODELID}})}))],1)],1),t._v(" "),e("aui-col",{attrs:{lg:4,md:6}},[e("aui-form-item",{attrs:{label:"印章状态",prop:"status"}},[e("aui-select",{attrs:{filterable:""},model:{value:t.QueryForm.status,callback:function(a){t.$set(t.QueryForm,"status",a)},expression:"QueryForm.status"}},t._l(t.status,function(t){return e("aui-option",{key:t.value,attrs:{label:t.value+"-"+t.label,value:t.value}})}))],1)],1),t._v(" "),e("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[e("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.query}},[t._v("查询")])],1),t._v(" "),e("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[e("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:function(a){t.resetForm("QueryForm")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),e("aui-card",{staticStyle:{"margin-top":"10px"}},[e("aui-row",[e("aui-col",{attrs:{lg:2,md:3}},[e("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(a){t.clickAdd()}}},[t._v("启用")])],1)],1),t._v(" "),e("aui-table",{ref:"table",staticClass:"tableMarginTop",staticStyle:{"min-height":"390px"},attrs:{data:t.tableData,border:"","highlight-current-row":"","header-row-class-name":"tableHeaderClass","max-height":"400"},on:{"selection-change":t.handleCurrentChange}},[e("aui-table-column",{attrs:{prop:"ELECSIGNETORGRELNO",label:"印章编号"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"SEALMODELID",label:"印章模板编号"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"SEALMODELDESC",label:"印章名称","min-width":"80"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"STATUS",label:"印章状态",formatter:t.dataFormat2,"min-width":"80"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"APPRVSTUSCD",label:"印章审批状态",formatter:t.dataFormat3,"min-width":"100"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"BRANCH",label:"机构号","min-width":"80"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"STARTDATE",label:"启用日期"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"CRTELLER",label:"启用操作员"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"NEWADDAPPRVTELRNO",label:"启用审批员"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"DISUSEDT",label:"停用日期"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"DISUSEOPERTELRNO",label:"停用操作员"}}),t._v(" "),e("aui-table-column",{attrs:{prop:"DISUSEAPPRVTELRNO",label:"停用审批员"}}),t._v(" "),e("aui-table-column",{attrs:{label:"操作",align:"center",fixed:"right","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(a){return["0"==a.row.STATUS?e("aui-button",{attrs:{size:"mini",type:"success",disabled:"0"==a.row.APPRVSTUSCD||"1"==a.row.APPRVSTUSCD},on:{click:function(e){t.clickAdd(a.row)}}},[t._v("启用")]):t._e(),t._v(" "),"1"==a.row.STATUS?e("aui-button",{attrs:{size:"mini",type:"danger",disabled:"0"==a.row.APPRVSTUSCD||"1"==a.row.APPRVSTUSCD},on:{click:function(e){t.clickUpdate(a.row)}}},[t._v("停用")]):t._e(),t._v(" "),e("aui-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.clickView(a.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.tableData,expression:"this.tableData"}],staticStyle:{"text-align":"right","margin-top":"20px"}},[e("aui-pagination",{attrs:{"current-page":t.currentPage,background:"","page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.changePage}})],1)],1)],1),t._v(" "),e("keep-alive",[e(t.dialogList.sealAdd,{tag:"component",attrs:{option:t.dialogOptions},on:{refreshTable:t.query}})],1)],1)},staticRenderFns:[]};var m=e("/Xao")(h,g,!1,function(t){e("45jz")},"data-v-1241cbac",null);a.default=m.exports}});