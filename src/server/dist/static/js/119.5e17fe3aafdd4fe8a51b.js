webpackJsonp([119],{H61c:function(n,e,t){(n.exports=t("BkJT")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},SP3F:function(n,e,t){var a=t("H61c");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("8bSs")("03588c18",a,!0)},tEEc:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("ZLEe"),i=t.n(a),o=t("0oES"),l=t("pADA"),s=t("syAl"),r=t("AA3o"),u=t.n(r),c=function n(){u()(this,n),this.data={uploadFileName:"",urlAddress:""},this.TransServiceCode="mg-afaservices-vsn/versionTemplateimport"},d={props:{option:Object},data:function(){return{loading:!1,fileUrl:"",fileName:"",isfile:!1,dialogFormVisible:!1,fileList:[],urlAddress:""}},created:function(){this.fileUrl=s.a.get("versionFileUploadAddress")},computed:{isShow:{get:function(){return this.option.importTemplateIsShow},set:function(n){this.option.importTemplateIsShow=n}}},methods:{handleExceed:function(n,e){this.$aui.message.show.warning("只能上传一个模版文件！")},handleSuccess:function(n,e,t){this.fileName=e.name,this.urlAddress=n.url,this.isfile=!0},delfile:function(){this.isfile=!1},closeCallback:function(){this.isfile=!1,this.$refs.upload.clearFiles()},onSubmit:function(){var n=this;if(this.isfile){this.loading=!0;var e=new c;e.data.uploadFileName=this.fileName,e.data.urlAddress="version/",Object(o.a)(e).then(function(e){n.loading=!1,n.$parent.queryInfoList(),n.isflie=!1,n.isShow=!1}).catch(function(e){n.$aui.message.show({message:e.SYS_HEAD.ReturnMessage,type:"error"}),n.loading=!1,console.log("error",e)})}else this.$aui.message.show({message:"请选择模板文件",type:"warning"})}}},p={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("aui-dialog",{attrs:{title:"版本更新策略模板导入",width:"500px","lock-scroll":!1,"close-on-click-modal":!1,visible:n.isShow},on:{hide:n.closeCallback,"update:visible":function(e){n.isShow=e}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[t("aui-card",[t("aui-upload",{ref:"upload",attrs:{action:n.fileUrl,limit:1,"on-exceed":n.handleExceed,"on-success":n.handleSuccess,"on-remove":n.delfile,accept:".xlsx,.xls"}},[t("aui-button",{attrs:{size:"mini",plain:"",type:"primary"}},[n._v("选择上传文件")]),n._v(" "),t("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n._v(" 请上传Excel模版文件")])],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[t("aui-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini"},on:{click:function(e){n.isShow=!1}}},[n._v("取 消")]),n._v(" "),t("aui-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",type:"primary"},on:{click:n.onSubmit}},[n._v("确 定")])],1)],1)])},staticRenderFns:[]},h=t("/Xao")(d,p,!1,null,null,null).exports,m=t("4Wfm"),f={data:function(){return{uploadFileUrl:"",uploadData:{destDir:"/aase/resources/"},fileList:[],tableTotal:0,pageSize:s.a.get("PageSize"),search:"",currentPage:1,loading:!1,tableData:[],dialogList:{importTemplate:h},dialogOptions:{importTemplateIsShow:!1}}},computed:{tables:function(){var n=this.search;return n?this.tableData.filter(function(e){return i()(e).some(function(t){return String(e[t]).toLowerCase().indexOf(n)>-1})}):this.tableData}},created:function(){this.queryInfoList(),this.uploadFileUrl=s.a.get("fileUploadAddress")},methods:{handleSizeChange:function(n){this.queryInfoList()},handleCurrentChange:function(n){this.queryInfoList()},handleBeforeUpload:function(n){},handleProgress:function(n,e,t){},errorHandler:function(n,e,t){},successHandler:function(n,e,t){},uploadChange:function(n,e){},dtFormat:function(n,e){return l.a.timeFormat(n[e.property])},queryInfoList:function(){var n=this;this.loading=!0;var e=new m.a;Object(o.a)(e).then(function(e){n.loading=!1,n.tableData=e.RspInfo.verOptionsTemplateInfoList||[],n.tableTotal=Number(e.RspInfo.QueryAllDataCount||n.tableData.length)}).catch(function(e){n.loading=!1,n.$aui.message.show({message:e.SYS_HEAD.ReturnMessage,type:"error"}),console.log(" error 错误：",e)})},importTemplateDialog:function(){this.dialogOptions.importTemplateIsShow=!0}}},g={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[t("aui-card",[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{sm:5,lg:5}},[t("aui-input",{attrs:{size:"mini","suffix-icon":"aui-icon-search",placeholder:"请输入查询信息检索"},model:{value:n.search,callback:function(e){n.search=e},expression:"search"}})],1),n._v(" "),t("aui-col",{attrs:{sm:3,lg:2}},[n.btnPermission("Button_VersionTemplate_Import")?t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:n.importTemplateDialog}},[n._v("导入模板")]):n._e()],1),n._v(" "),t("aui-col",{ref:"aui-col_6",attrs:{span:2}},[t("aui-upload",{attrs:{action:"",data:n.uploadData,"file-list":n.fileList,"on-success":n.successHandler,"on-error":n.errorHandler,"on-change":n.uploadChange,"before-upload":n.handleBeforeUpload,"on-progress":n.handleProgress}},[t("aui-button",{ref:"aui-button_6",staticClass:"aui-button-full",attrs:{size:"small",type:"primary"}},[n._v("选中文件上传")])],1)],1)],1),n._v(" "),t("aui-table",{staticClass:"tableMarginTop",attrs:{data:n.tables,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{fixed:"",prop:"verOptionsTemplateName",label:"模板名称",width:"310"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"createTime",formatter:n.dtFormat,label:"创建日期",width:"160"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verRuleExcludedFiles",label:"排除文件",width:"180"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verRuleExcludedDirs",label:"排除文件夹","min-width":"280"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verRuleOnceUpdateFiles",label:"只更新一次的文件",width:"150"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verRuleUpdateDirs",label:"只更新一次的文件夹",width:"150"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verRuleMatchPatterns",label:"匹配模式",width:"100"}})],1),n._v(" "),t("aui-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"page-sizes":[10,20,50,100],"page-size":n.pageSize,"current-page":n.currentPage,background:"",layout:"total, prev, pager, next, jumper",total:n.tableTotal},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange,"update:currentPage":function(e){n.currentPage=e}}})],1),n._v(" "),t("keep-alive",[t(n.dialogList.importTemplate,{tag:"component",attrs:{option:n.dialogOptions}})],1)],1)},staticRenderFns:[]};var v=t("/Xao")(f,g,!1,function(n){t("SP3F")},null,null);e.default=v.exports}});