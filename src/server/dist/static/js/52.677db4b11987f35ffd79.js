webpackJsonp([52],{"0rel":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"/* .dialog {\n  padding: 15px;\n  height: 600px;\n} */\n.content[data-v-5d5ca429] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-5d5ca429] {\n  color: red;\n}\n.dialog-text[data-v-5d5ca429] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-5d5ca429] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-5d5ca429] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.el-card[data-v-5d5ca429] {\n  overflow: inherit;\n}\n.el-date-editor.aui-input[data-v-5d5ca429],\n.el-date-editor.el-input__inner[data-v-5d5ca429] {\n  width: 100%;\n}\n",""])},"C/Ny":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("syAl"),r=a("0oES"),o=(a("0VOF"),a("qfSh"),a("Mjds"),a("A8CQ"),a("AA3o")),s=a.n(o),n=function e(){s()(this,e),this.data={OperType:"Q",CType:"",BType:"",sTime:"",eTime:"",condition:""},this.BusiDataKey="T011205_quy",this.TransServiceCode="ib-dbcomm/dbComm"},u=function e(){s()(this,e),this.data={OperType:"D",TRANGROUPID:"",RLTID:""},this.BusiDataKey="T011205_del",this.TransServiceCode="ib-dbcomm/dbComm"},l=a("pADA"),m=function e(){s()(this,e),this.data={OperType:"A",CType:"",BType:"",sTime:"",eTime:"",des:"",UPD_DATE:"",UPD_TLR:"",STTM:"",EDTM:""},this.BusiDataKey="T011205_add",this.TransServiceCode="ib-dbcomm/dbComm"},c=function e(){s()(this,e),this.data={OperType:"M"},this.BusiDataKey="T011205_mod",this.TransServiceCode="ib-dbcomm/dbComm"},d=function e(){s()(this,e),this.data={OperType:"Q",CType:"",BType:"",sTime:"",eTime:""},this.BusiDataKey="T011205_quy",this.TransServiceCode="ib-dbcomm/dbComm"},p=(a("96Uj"),a("fCv1")),y={name:"",data:function(){return{isRead:void 0,controlTypeList:[{name:"授权",value:"AU"}],busTypeList:[{name:"客户资金类",value:"1"},{name:"内部资金类",value:"2"},{name:"客户事务类",value:"3"},{name:"内部事务类",value:"4"},{name:"参数维护类",value:"5"},{name:"购物车类",value:"6"}],queryForm:{CType:"",BType:"",sTime:"",eTime:""},currentPage:1,pageSize:i.a.get("PageSize"),options:[{ITEMPREFIX:"_AuthReason_",ITEMVALUE:"常见退回理由"}],loading:!1,rules:{CType:[{required:!0,message:"请选择管控类型",trigger:"change"}],BType:[{required:!0,message:"请选择管控类型",trigger:"change"}],sTime:[{required:!0,message:"请选择生效日期",trigger:"change"}],eTime:[{required:!0,message:"请选择失效日期",trigger:"change"}],des:[{required:!0,message:"请输入维护说明",trigger:"blur"},{validator:Object(p.h)(256),trigger:"blur"}]}}},props:{option:Object},components:{},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},created:function(){},methods:{check:function(){var e=this;if(""!=this.queryForm.CType&&""!=this.queryForm.BType){this.currentPage=1,this.loading=!0;var t=new d;t.data.OperType="Q",t.data.Cgy1C=this.queryForm.CType,t.data.Cgy2C=this.queryForm.BType,t.data.Dt1="",t.data.Dt2="",t.data.CurtPage=this.currentPage,t.data.PageSize=this.pageSize,t.data.StartRows=(this.currentPage-1)*this.pageSize,console.log(t),Object(r.a)(t).then(function(t){e.loading=!1,e.tableData=t.RspInfo.Result||[],e.total=t.RspInfo.totalNum||0,e.total>0&&(e.$aui.message.show({type:"warning",message:"该配置已存在,请确认"}),e.$set(e.queryForm,"BType",""),e.$set(e.queryForm,"CType",""))}).catch(function(t){e.loading=!1,e.tableData=[],e.total=0,console.log(t)})}},openUpdate:function(){this.setData()},setData:function(){this.$set(this.queryForm,"CType",this.option.currentRow[0].RLTID),this.$set(this.queryForm,"BType",this.option.currentRow[0].TRANGROUPID),this.$set(this.queryForm,"sTime",this.option.currentRow[0].STDT),this.$set(this.queryForm,"eTime",this.option.currentRow[0].EDDT),this.$set(this.queryForm,"des",this.option.currentRow[0].REMARK)},add:function(){var e=this;this.$refs.queryForm.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;if(e.loading=!0,e.queryForm.sTime<l.a.getNowTime(0))return e.$aui.message.show({type:"warning",message:"生效日期不能小于会计日期"}),e.$set(e.queryForm,"sTime",""),e.loading=!1,!1;var a="1"==e.option.mark?new m:new c;a.data.TranCats=e.queryForm.BType,a.data.Cgy=e.queryForm.CType,a.data.Dt3=e.queryForm.sTime,a.data.Dt4=e.queryForm.eTime,a.data.Cntnt=e.queryForm.des,a.data.Dt5=l.a.getNowTime(0),a.data.Tlr=e.$store.getters.UserNum,a.data.BnkCorpNum=e.$store.getters.LegalPersonNum,a.data.Cl="7",a.data.Time1="",a.data.Time2="",console.log(a),Object(r.a)(a).then(function(t){e.$emit("refreshTable"),e.option.isShow=!1;var a="1"==e.option.mark?"新增":"修改";e.$aui.message.show({type:"success",message:""+a+t.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1})})},openCreate:function(){"2"==this.option.mark?(this.setData(),this.isRead=!0):(this.isRead=!1,this.$refs.queryForm&&this.$refs.queryForm.clearValidate(),this.queryForm={BType:""})},closeUser:function(){void 0!=this.$refs.queryForm&&(this.$refs.queryForm.resetFields(),this.$refs.queryForm.clearValidate()),this.$emit("refreshTable")},addType:function(){this.option.isShow=!1,this.$refs.queryForm.clearValidate()},dateChange:function(){""!=this.queryForm.sTime&&""!=this.queryForm.eTime&&this.queryForm.sTime>this.queryForm.eTime&&(this.$aui.message.show({type:"warning",message:"开始日期不能大于结束日期"}),this.$set(this.queryForm,"sTime",""),this.$set(this.queryForm,"eTime",""))},startTime:function(){""!=this.queryForm.sTime&&this.queryForm.sTime<l.a.getNowTime(0)&&(this.$aui.message.show({type:"warning",message:"生效日期不能小于会计日期"}),this.$set(this.queryForm,"sTime",""))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"管控范围维护",visible:e.isShow,width:"890px","close-on-click-modal":!1,center:""},on:{hide:e.closeUser,"update:visible":function(t){e.isShow=t},show:e.openCreate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"queryForm",attrs:{size:"mini",model:e.queryForm,rules:e.rules,"label-width":"100px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"管控类型",prop:"CType"}},[a("aui-select",{attrs:{placeholder:"请选择管控类型",disabled:this.isRead},on:{change:e.check},model:{value:e.queryForm.CType,callback:function(t){e.$set(e.queryForm,"CType",t)},expression:"queryForm.CType"}},e._l(e.controlTypeList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"业务种类",prop:"BType"}},[a("aui-select",{attrs:{placeholder:"请选择业务种类",disabled:this.isRead},on:{change:e.check},model:{value:e.queryForm.BType,callback:function(t){e.$set(e.queryForm,"BType",t)},expression:"queryForm.BType"}},e._l(e.busTypeList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"生效日期",prop:"sTime"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{blur:e.startTime,change:e.dateChange},model:{value:e.queryForm.sTime,callback:function(t){e.$set(e.queryForm,"sTime",t)},expression:"queryForm.sTime"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"失效日期",prop:"eTime"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.queryForm.eTime,callback:function(t){e.$set(e.queryForm,"eTime",t)},expression:"queryForm.eTime"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:24}},[a("aui-form-item",{attrs:{label:"维护说明:",prop:"des"}},[a("aui-input",{attrs:{placeholder:"请输入维护说明"},model:{value:e.queryForm.des,callback:function(t){e.$set(e.queryForm,"des",t)},expression:"queryForm.des"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("确认")]),e._v(" "),a("aui-button",{attrs:{size:"mini"},on:{click:e.addType}},[e._v("取消")])],1)],1)])])],1)},staticRenderFns:[]};var g=a("/Xao")(y,h,!1,function(e){a("SGSg")},"data-v-5d5ca429",null).exports,T={data:function(){return{RLTID:{BN:"BN-黑名单",NI:"NI-联网核查",DS:"DS-双屏确认",CK:"CK-复核",AU:"AU-授权",CL:"CL-冠字号登记",FE:"FE-收费"},TRANGROUPID:{1:"1-客户资金类",2:"2-内部资金类",3:"3-客户事务类",4:"4-内部事务类",5:"5-参数维护类",6:"6-购物车类"},controlTypeList:[{name:"授权",value:"AU"}],busTypeList:[{name:"客户资金类",value:"1"},{name:"内部资金类",value:"2"},{name:"客户事务类",value:"3"},{name:"内部事务类",value:"4"},{name:"参数维护类",value:"5"},{name:"购物车类",value:"6"}],rules:{condition:[{required:!0,message:"请选择查询条件",trigger:"change"}]},total:0,loading:!1,tableData:[],currentPage:1,pageSize:i.a.get("PageSize"),queryForm:{CType:"AU",BType:"",sTime:"",eTime:""},currentRow:[],dialogOptions:{isShow:!1},dialogList:{addDialog:g},dialogOptionsupdate:{isShow:!1,currentRow:[]}}},created:function(){this.pageSize=i.a.get("PageSize"),this.queryForm.sTime=l.a.getNowTime(29),this.queryForm.eTime=l.a.getNowTime(0),this.query()},methods:{dateChange:function(){this.queryForm.sTime>this.queryForm.eTime&&(this.$aui.message.show({type:"warning",message:"生效日期不能大于失效日期"}),this.queryForm.sTime=l.a.getNowTime(29),this.queryForm.eTime=l.a.getNowTime(0))},clearForm:function(){this.$refs.queryForm.resetFields()},dataFormat:function(e,t){return"RLTID"==t.property?this.RLTID[e[t.property]]:"TRANGROUPID"==t.property?this.TRANGROUPID[e[t.property]]:"UPD_DATE"==t.property||"STDT"==t.property||"EDDT"==t.property?l.a.timeFormat2Date(e[t.property]):void 0},query:function(e){var t=this;"search"===e&&(this.currentPage=1),this.loading=!0;var a=new n;a.data.OperType="Q",a.data.Cgy1C=this.queryForm.CType,a.data.Cgy2C=this.queryForm.BType,a.data.Dt1=this.queryForm.sTime,a.data.Dt2=this.queryForm.eTime,a.data.CurtPage=this.currentPage,a.data.PageSize=this.pageSize,a.data.StartRows=(this.currentPage-1)*this.pageSize,Object(r.a)(a).then(function(e){t.loading=!1,e.RspInfo.Result?(t.tableData=e.RspInfo.Result||[],t.total=e.RspInfo.totalNum||0):(t.tableData=[],t.total=0,t.$aui.message.show({type:"warning",message:"没有满足条件得记录!"}))}).catch(function(e){t.loading=!1,t.tableData=[],t.total=0,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage}),console.log(e)})},delData:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.Del()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},Del:function(){var e=this;this.loading=!0;var t=new u;t.data.OperType="D",t.data.TranCats=this.currentRow[0].TRANGROUPID,t.data.Cgy=this.currentRow[0].RLTID,Object(r.a)(t).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"删除成功!"}),e.query()}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:"删除失败!"})})},selectList:function(e){this.currentRow=e},addData:function(){this.dialogOptions.isShow=!0,this.dialogOptions.mark="1"},updateDate:function(){this.dialogOptions.isShow=!0,this.dialogOptions.currentRow=this.currentRow,this.dialogOptions.mark="2"},handleCurrentChange:function(e){this.currentPage=e,this.query()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"by-trade-type",attrs:{"element-loading-text":"加载中。。。"}},[a("div",[a("aui-card",{staticClass:"type-info-box-card"},[a("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"管控类型",prop:"CType"}},[a("aui-select",{attrs:{placeholder:"请选择管控类型"},model:{value:e.queryForm.CType,callback:function(t){e.$set(e.queryForm,"CType",t)},expression:"queryForm.CType"}},e._l(e.controlTypeList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"业务种类",prop:"BType"}},[a("aui-select",{attrs:{placeholder:"请选择业务种类"},model:{value:e.queryForm.BType,callback:function(t){e.$set(e.queryForm,"BType",t)},expression:"queryForm.BType"}},e._l(e.busTypeList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"生效日期",prop:"sTime"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:e.dateChange},model:{value:e.queryForm.sTime,callback:function(t){e.$set(e.queryForm,"sTime",t)},expression:"queryForm.sTime"}})],1)],1),e._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{attrs:{label:"失效日期",prop:"eTime"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:e.dateChange},model:{value:e.queryForm.eTime,callback:function(t){e.$set(e.queryForm,"eTime",t)},expression:"queryForm.eTime"}})],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){e.query("search")}}},[e._v("查询")])],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:e.clearForm}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticClass:"type-info-bottom"},[a("aui-row",[a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Add")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:e.addData}},[e._v("新增")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Add")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:1!=e.currentRow.length},on:{click:e.updateDate}},[e._v("修改")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_Menu_Edit")?a("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:1!=e.currentRow.length},on:{click:e.delData}},[e._v("删除")]):e._e()],1)],1),e._v(" "),a("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""},on:{"selection-change":e.selectList}},[a("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"RLTID",label:"管控类型",formatter:e.dataFormat}}),e._v(" "),a("aui-table-column",{attrs:{prop:"TRANGROUPID",label:"业务种类",formatter:e.dataFormat}}),e._v(" "),a("aui-table-column",{attrs:{prop:"UPD_TLR",label:"维护用户"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"UPD_DATE",label:"维护日期",formatter:e.dataFormat}}),e._v(" "),a("aui-table-column",{attrs:{prop:"REMARK",label:"维护说明"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"STDT",label:"生效日期",formatter:e.dataFormat}}),e._v(" "),a("aui-table-column",{attrs:{prop:"EDDT",label:"失效日期",formatter:e.dataFormat}})],1),e._v(" "),a("div",{staticClass:"box"},[a("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1),e._v(" "),a("keep-alive",[a(e.dialogList.addDialog,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.query}})],1)],1)},staticRenderFns:[]};var b=a("/Xao")(T,f,!1,function(e){a("MUMO")},null,null);t.default=b.exports},MUMO:function(e,t,a){var i=a("wwWj");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("7d7aaa93",i,!0)},Mjds:function(e,t,a){"use strict";var i=a("AA3o"),r=a.n(i);t.a=function e(){r()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="appInfoByTradeType_quy",this.TransServiceCode="ib-dbcomm/dbComm"}},SGSg:function(e,t,a){var i=a("0rel");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("742b01ce",i,!0)},wwWj:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.el-date-editor.aui-input {\n  width: 100% !important;\n}\n.el-card {\n  overflow: inherit;\n}\n",""])}});