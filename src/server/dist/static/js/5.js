webpackJsonp([5],{"/vP0":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"/* .dialog {\r\n  padding: 15px;\r\n  height: 600px;\r\n} */\n.content[data-v-61e57dc4] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-61e57dc4] {\n  color: red;\n}\n.dialog-text[data-v-61e57dc4] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-61e57dc4] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-61e57dc4] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.aui-card[data-v-61e57dc4] {\n  overflow: inherit;\n}\n",""])},"00kP":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,'\n.selectTree[data-v-6557c766] {\n  min-width: 150px;\n}\n.text[data-v-6557c766] {\n  font-size: 14px;\n}\n.item[data-v-6557c766] {\n  margin-bottom: 18px;\n}\n.dialog-text[data-v-6557c766] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n}\n.clearfix[data-v-6557c766]:before,\n.clearfix[data-v-6557c766]:after {\n  display: table;\n  content: "";\n}\n.clearfix[data-v-6557c766]:after {\n  clear: both;\n}\n.aui-card[data-v-6557c766] {\n  width: 100%;\n}\n.aui-form-item[data-v-6557c766] {\n  margin-left: 30px;\n}\n.aui-form-item1[data-v-6557c766] {\n  margin-left: 10px;\n}\n.box2-button[data-v-6557c766] {\n  width: 80px;\n}\n.aui-card[data-v-6557c766] {\n  overflow: inherit;\n}\n',""])},"2be6":function(e,t,a){var i=a("cHgD");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("b62ef046",i,!0)},"9MwD":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.content[data-v-31a09c79] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-31a09c79] {\n  color: red;\n}\n.dialog-text[data-v-31a09c79] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-31a09c79] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-31a09c79] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.el-dialog__body[data-v-31a09c79] {\n  padding: 20px;\n  padding-top: 10px;\n}\n.aui-card[data-v-31a09c79] {\n  overflow: inherit;\n}\n",""])},B3UJ:function(e,t,a){var i=a("/vP0");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("30be5f6d",i,!0)},G9Vs:function(e,t,a){var i=a("o5Kx");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("1f235a2e",i,!0)},KnCp:function(e,t,a){var i=a("dHgd");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("49f11e72",i,!0)},RYHq:function(e,t,a){"use strict";var i=a("AA3o"),n=a.n(i);t.a=function e(){n()(this,e),this.data={Brno:"",BsID:"",BusiOper:"Q2"},this.BusiDataKey="sel_bstp_subbs",this.TransServiceCode="ib-dbcomm/dbComm"}},SpAt:function(e,t,a){"use strict";var i=a("AA3o"),n=a.n(i);t.a=function e(){n()(this,e),this.data={BillTran:"",OperType:"Q"},this.CommCode="CRFillBillSystem",this.SceneCode="PrefillAndMaintTranMapping",this.TransServiceCode="mg-afaservices-rsv/listBusiTypefill"}},"W+/s":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.content[data-v-ddbaff9e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-ddbaff9e] {\n  color: red;\n}\n.dialog-text[data-v-ddbaff9e] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-ddbaff9e] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-ddbaff9e] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.el-dialog__body[data-v-ddbaff9e] {\n  padding: 20px;\n  padding-top: 10px;\n}\n.aui-card[data-v-ddbaff9e] {\n  overflow: inherit;\n}\n",""])},cHgD:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.content[data-v-137041ac] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-137041ac] {\n  color: red;\n}\n.dialog-text[data-v-137041ac] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-137041ac] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-137041ac] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.el-dialog__body[data-v-137041ac] {\n  padding: 20px;\n  padding-top: 10px;\n}\n.aui-card[data-v-137041ac] {\n  overflow: inherit;\n}\n",""])},dHgd:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.content[data-v-173fa7cf] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-173fa7cf] {\n  color: red;\n}\n.dialog-text[data-v-173fa7cf] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-173fa7cf] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-173fa7cf] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.el-dialog__body[data-v-173fa7cf] {\n  padding: 20px;\n  padding-top: 10px;\n}\n.aui-card[data-v-173fa7cf] {\n  overflow: inherit;\n}\n",""])},iUNl:function(e,t,a){var i=a("9MwD");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("283f0c95",i,!0)},mNT5:function(e,t,a){var i=a("W+/s");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("22a10f08",i,!0)},mfUQ:function(e,t,a){"use strict";var i=a("AA3o"),n=a.n(i);t.a=function e(){n()(this,e),this.data={BillTran:"",Channel:"",TranCode:"",OperType:"D"},this.CommCode="CRFillBillSystem",this.SceneCode="PrefillAndMaintTranMapping",this.TransServiceCode="mg-afaservices-rsv/listBusiTypefill"}},mqBB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("0oES"),n=a("pADA"),s=a("syAl"),o=a("0VOF"),r=a("AA3o"),l=a.n(r),d=function e(){l()(this,e),this.data={Brno:"",BsName:"",BsIDTp:"2",BsAttr:"",BsPrefixLetter:"",BusBsStatusiOper:"",TradeCode:"",BusiOper:"A",Message:""},this.BusiDataKey="add_TP_BSTP_tiandan",this.TransServiceCode="ib-dbcomm/dbComm"},c=a("96Uj"),u=a("fCv1"),p={name:"",data:function(){return{loading:!1,brnoList:[],brnoName:{},BusinessList:[{name:"2-个人业务",value:"2"},{name:"1-对公业务",value:"1"}],BusinessList1:[{name:"0-启用",value:"0"},{name:"1-不启用",value:"1"}],form:{BsName:"",branchId:"",BsAttr:"2",BsStatus:"0"},rules:{branchId:[{required:!0,message:"请选择机构编号",trigger:"change"}],BsAttr:[{required:!0,message:"请选择业务分类",trigger:"change"}],BsName:[{required:!0,message:"请输入业务名称",trigger:"blur"},{validator:Object(u.h)(30),trigger:"blur"}],BsStatus:[{required:!0,message:"请选择业务状态",trigger:"change"}]}}},props:{option:Object},components:{},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},created:function(){},methods:{add:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var a=new c.a;a.data.BsName=e.form.BsName,a.data.BsAttr=e.form.BsAttr,a.data.Brno=e.form.branchId,a.data.BSIDTP="2",Object(i.a)(a).then(function(t){null!=t.RspInfo.Result?(e.$aui.message.show({type:"warning",message:"数据已存在!"}),e.loading=!1):e.add1()})}})},add1:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;e.loading=!0;var a=new d;a.data.Brno=e.form.branchId,a.data.BsAttr=e.form.BsAttr,a.data.BsName=e.form.BsName,a.data.BsStatus=e.form.BsStatus,Object(i.a)(a).then(function(t){e.$emit("refreshTable"),e.isShow=!1,e.$aui.message.show({type:"success",message:"业务新增成功!"}).catch(function(){e.isShow=!1,e.$refs.form.clearValidate(),e.$refs.form.resetFields()}),e.isShow=!1}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),e.loading=!1})})},openCreate:function(){this.loading=!0,this.loading=!1,this.$refs.form&&(this.$refs.form.clearValidate(),this.$refs.form.resetFields())},closeUser:function(){void 0!=this.$refs.form&&(this.$refs.form.resetFields(),this.$refs.form.clearValidate()),this.$emit("refreshTable")},addType:function(){this.option.isShow=!1,this.$refs.form.clearValidate()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"新增业务类型",visible:e.isShow,width:"890px","close-on-click-modal":!1,center:""},on:{hide:e.closeUser,"update:visible":function(t){e.isShow=t},show:e.openCreate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"form",attrs:{size:"mini",model:e.form,rules:e.rules,inline:"","label-width":"140px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"机构编号",prop:"branchId"}},[a("aui-select",{attrs:{filterable:""},model:{value:e.form.branchId,callback:function(t){e.$set(e.form,"branchId",t)},expression:"form.branchId"}},e._l(e.option.brnoList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.cname,value:e.orgno,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsAttr",label:"业务分类"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择业务分类"},model:{value:e.form.BsAttr,callback:function(t){e.$set(e.form,"BsAttr",t)},expression:"form.BsAttr"}},e._l(e.BusinessList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsName",label:"业务名称"}},[a("aui-input",{attrs:{placeholder:"请输入业务名称"},model:{value:e.form.BsName,callback:function(t){e.$set(e.form,"BsName",t)},expression:"form.BsName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsStatus",label:"业务状态"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择业务状态"},model:{value:e.form.BsStatus,callback:function(t){e.$set(e.form,"BsStatus",t)},expression:"form.BsStatus"}},e._l(e.BusinessList1,function(e){return a("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("确认")]),e._v(" "),a("aui-button",{attrs:{size:"mini"},on:{click:e.addType}},[e._v("取消")])],1)],1)])])],1)},staticRenderFns:[]};var m=a("/Xao")(p,h,!1,function(e){a("B3UJ")},"data-v-61e57dc4",null).exports,f=a("qN9H"),b=a("RYHq"),g=a("pqAb"),w={name:"",data:function(){return{loading:!1,operType:"",BusinessList:[],newUserDate:{branchId:"",BsID:"",name:"",BsName:"",IdName:"",BsAttr:"",Business1:""},rules:{Business1:[{required:!0,message:"请输入从属业务ID",trigger:"change"}]}}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},methods:{querySubBsId1:function(){var e=this;this.loading=!0;var t=new b.a;t.data.Brno=this.newUserDate.branchId,t.data.BsID=this.newUserDate.BsID,Object(i.a)(t).then(function(t){e.operType="M",e.newUserDate.Business1=t.RspInfo.Result[0].SubBsID,e.loading=!1}).catch(function(t){e.operType="A",e.loading=!1})},querySubBsId:function(){var e=this;this.loading=!0;var t=new f.a;t.data.Brno=this.$store.getters.BranchNum,""!=this.newUserDate.BsAttr?(t.data.BusiOper="Q1",t.data.BsAttr=this.newUserDate.BsAttr,t.BusiDataKey="sel_bs_tp2"):(t.data.BusiOper="Q",t.BusiDataKey="sel_bs_tp1"),Object(i.a)(t).then(function(t){e.BusinessList=t.RspInfo.Result,e.loading=!1}).catch(function(t){e.$aui.message.show({type:"success",message:response.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1})},openUpdate:function(){this.newUserDate.branchId=this.option.currentRow[0].Brno,this.newUserDate.BsID=this.option.currentRow[0].BsID,this.newUserDate.BsName=this.option.currentRow[0].BsName,this.newUserDate.BsAttr=this.option.currentRow[0].BsAttr,this.newUserDate.IdName=this.newUserDate.BsID+"-"+this.newUserDate.BsName,this.querySubBsId1(),this.querySubBsId()},cancleUserMod:function(){this.option.isShow=!1,this.$refs.newUserDate.clearValidate()},closeUserMod:function(){void 0!=this.$refs.newUserDate&&(this.$refs.newUserDate.resetFields(),this.$refs.newUserDate.clearValidate()),this.$emit("refreshTable")},userMod:function(){var e=this;this.$refs.newUserDate.validate(function(t){if(t){var a=new g.a;a.data.Brno=e.newUserDate.branchId,a.data.BsID=e.newUserDate.IdName.substring(0,6),a.data.SubBsID=e.newUserDate.Business1,"M"==e.operType?a.BusiDataKey="mod_bstp_subbs":a.BusiDataKey="ins_bstp_subbs",Object(i.a)(a).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"所属业务分配成功!"}),e.option.isShow=!1,e.$emit("refreshTable"),e.$refs.newUserDate.clearValidate(),e.$refs.newUserDate.resetFields()}).catch(function(t){e.loading=!1})}})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"所属业务分配",visible:e.isShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeUserMod,show:e.openUpdate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"newUserDate",attrs:{size:"mini",model:e.newUserDate,rules:e.rules,inline:"","label-width":"120px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"branchId",label:"机构号"}},[a("aui-select",{attrs:{disabled:e.option.isDisabled,filterable:"",placeholder:"请选择机构编号"},model:{value:e.newUserDate.branchId,callback:function(t){e.$set(e.newUserDate,"branchId",t)},expression:"newUserDate.branchId"}},e._l(e.option.brnoList,function(e){return a("aui-option",{key:e.orgno,attrs:{label:e.cname,value:e.orgno,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"IdName",label:"业务ID"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.IdName,callback:function(t){e.$set(e.newUserDate,"IdName",t)},expression:"newUserDate.IdName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"Business1",label:"从属业务ID"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.newUserDate.Business1,callback:function(t){e.$set(e.newUserDate,"Business1",t)},expression:"newUserDate.Business1"}},e._l(e.BusinessList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.BsID+"-"+e.BsName,value:e.BsID}})}))],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"20px 0"}},[a("aui-button",{attrs:{size:"mini"},on:{click:e.cancleUserMod}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.userMod}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var B=a("/Xao")(w,v,!1,function(e){a("2be6")},"data-v-137041ac",null).exports,x=function e(){l()(this,e),this.data={UserNum:"",UserChannelStatus:"1",BusiOper:"Q"},this.BusiDataKey="SelectUserChannelByUser",this.TransServiceCode="ib-dbcomm/dbComm"},D=a("QdxY"),U=function e(){l()(this,e),this.data={AppNum:"",BusiOper:"Q",MenuViewNum:""},this.BusiDataKey="PUBLIC_MENUNUM",this.TransServiceCode="ib-dbcomm/dbComm"},y=function e(){l()(this,e),this.data={BillTran:"",Channel:"",TranCode:"",OperType:"A"},this.CommCode="CRFillBillSystem",this.SceneCode="PrefillAndMaintTranMapping",this.TransServiceCode="mg-afaservices-rsv/listBusiTypefill"},S={name:"",data:function(){return{BusinessList:[],menuViewList:[],AppNumList:[],loading:!1,form:{RetCode:"",Channel:"",menuView:"",IdName:"",BsName:"",BsID:""},rules:{IdName:[{required:!0,message:"业务类型不能为空",trigger:"change"}],Channel:[{required:!0,message:"渠道号未选择",trigger:"change"}],menuView:[{required:!0,message:"视图编号未选择",trigger:"change"}],RetCode:[{required:!0,message:"交易码必输",trigger:"change"}]}}},props:{option:Object},components:{},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},created:function(){this.getUserChannelItem()},methods:{add:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var a=new y;a.data.BillTran=e.form.IdName.substring(0,6),a.data.Channel=e.form.Channel,a.data.TranCode=e.form.RetCode,Object(i.a)(a).then(function(t){e.loading=!1,e.$emit("refreshTable"),e.isShow=!1,e.$aui.message.show({type:"success",message:"新增成功!"}).catch(function(){e.isShow=!1,e.$refs.form.clearValidate(),e.$refs.form.resetFields()})}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:"新增失败!"+t.SYS_HEAD.ReturnMessage})})}})},menuViewLoad:function(){var e=this;this.loading=!0,this.menuViewList=[],this.AppNumList=[],this.form.menuView="",this.form.RetCode="";var t=new D.a;t.data.AppNum=this.form.Channel,Object(i.a)(t).then(function(t){e.loading=!1,e.menuViewList=t.RspInfo.Result||[]}).catch(function(t){e.loading=!1,console.error("查询错误",t)})},AppNumChange:function(){var e=this;this.loading=!0,this.AppNumList=[],this.form.RetCode="";var t=new U;t.data.AppNum=this.form.Channel,Object(i.a)(t).then(function(t){e.loading=!1,e.AppNumList=t.RspInfo.Result}).catch(function(t){e.loading=!1,e.AppNumList=[]})},getUserChannelItem:function(){var e=this,t=new x;t.data.UserNum=this.$store.getters.UserNum,Object(i.a)(t).then(function(t){e.BusinessList=t.RspInfo.Result})},openCreate:function(){this.loading=!0,this.$refs.form&&(this.$refs.form.clearValidate(),this.$refs.form.resetFields()),this.form.BsID=this.option.currentRow[0].BsID,this.form.BsName=this.option.currentRow[0].BsName,this.form.IdName=this.form.BsID+"-"+this.form.BsName,this.loading=!1},closeUser:function(){void 0!=this.$refs.form&&(this.$refs.form.resetFields(),this.$refs.form.clearValidate()),this.$emit("refreshTable")},addType:function(){this.option.isShow=!1,this.$refs.form.clearValidate(),this.$refs.form.resetFields()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"新增渠道业务分配",visible:e.isShow,width:"890px","close-on-click-modal":!1,center:""},on:{hide:e.closeUser,"update:visible":function(t){e.isShow=t},show:e.openCreate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"form",attrs:{size:"mini",model:e.form,rules:e.rules,inline:"","label-width":"140px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"IdName",label:"业务ID"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.form.IdName,callback:function(t){e.$set(e.form,"IdName",t)},expression:"form.IdName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"Channel",label:"渠道"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择渠道"},on:{change:e.AppNumChange},model:{value:e.form.Channel,callback:function(t){e.$set(e.form,"Channel",t)},expression:"form.Channel"}},e._l(e.BusinessList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.AppNum+"-"+e.AppName,value:e.AppNum}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"RetCode",label:"业务交易码"}},[a("aui-select",{attrs:{filterable:""},model:{value:e.form.RetCode,callback:function(t){e.$set(e.form,"RetCode",t)},expression:"form.RetCode"}},e._l(e.AppNumList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.MENUNUM+"-"+e.MENUNAME,value:e.MENUNUM}})}))],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("aui-button",{attrs:{size:"mini"},on:{click:e.addType}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("确认")])],1)],1)])])],1)},staticRenderFns:[]};var I=a("/Xao")(S,_,!1,function(e){a("G9Vs")},"data-v-895b2dfc",null).exports,N=function e(){l()(this,e),this.data={BillTran:"",Channel:"",TranCode:"",OperType:"M"},this.CommCode="CRFillBillSystem",this.SceneCode="PrefillAndMaintTranMapping",this.TransServiceCode="mg-afaservices-rsv/listBusiTypefill"},C={name:"",data:function(){return{loading:!1,newUserDate:{IdName:"",Channel:"",RetCode:""},rules:{RetCode:[{required:!0,message:"交易码必输",trigger:"change"}]},AppNumList:[]}},props:{optionUpdate:Object},created:function(){},computed:{isShow:{get:function(){return this.optionUpdate.isShow},set:function(e){this.optionUpdate.isShow=e}}},methods:{openUpdate:function(){var e=this;this.newUserDate.IdName=this.optionUpdate.currentRow[0].BillTran,this.newUserDate.Channel=this.optionUpdate.currentRow[0].Channel,this.loading=!0;var t=new U;t.data.AppNum=this.newUserDate.Channel,Object(i.a)(t).then(function(t){e.loading=!1,e.AppNumList=t.RspInfo.Result,e.newUserDate.RetCode=e.optionUpdate.currentRow[0].TranCode}).catch(function(t){e.loading=!1,e.AppNumList=[]})},cancleUserMod:function(){this.optionUpdate.isShow=!1,this.$refs.newUserDate.clearValidate()},closeUserMod:function(){this.$refs.newUserDate.clearValidate()},confirm:function(){var e=this;this.$refs.newUserDate.validate(function(t){if(!t)return!1;e.loading=!0;var a=new N;a.data.BillTran=e.newUserDate.IdName,a.data.Channel=e.newUserDate.Channel,a.data.TranCode=e.newUserDate.RetCode,Object(i.a)(a).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"修改成功!"}),e.optionUpdate.isShow=!1,e.$emit("refreshTable")}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"error",message:"修改失败!"+t.SYS_HEAD.ReturnMessage}),console.log(t)})})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"修改业务类型",visible:e.isShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeUserMod,show:e.openUpdate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"newUserDate",attrs:{size:"mini",model:e.newUserDate,rules:e.rules,inline:"","label-width":"120px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"IdName",label:"业务ID"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.IdName,callback:function(t){e.$set(e.newUserDate,"IdName",t)},expression:"newUserDate.IdName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"Channel",label:"渠道"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.Channel,callback:function(t){e.$set(e.newUserDate,"Channel",t)},expression:"newUserDate.Channel"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"RetCode",label:"交易码"}},[a("aui-select",{attrs:{filterable:""},model:{value:e.newUserDate.RetCode,callback:function(t){e.$set(e.newUserDate,"RetCode",t)},expression:"newUserDate.RetCode"}},e._l(e.AppNumList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.MENUNUM+"-"+e.MENUNAME,value:e.MENUNUM}})}))],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"20px 0"}},[a("aui-button",{attrs:{size:"mini"},on:{click:e.cancleUserMod}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var k=a("/Xao")(C,R,!1,function(e){a("mNT5")},"data-v-ddbaff9e",null).exports,T=a("SpAt"),$=a("mfUQ"),A={name:"",data:function(){return{loading:!1,operType:"",BusinessList:[],currentRow:[],tableData:[],dialogList:{addbusinessTypeDialog:I,update:k},dialogOptions:{isShow:!1},dialogOptionsupdate:{isShow:!1,currentRow:[]},newUserDate:{BsID:"",name:"",BsName:"",IdName:"",BsAttr:"",Business1:""},rules:{}}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},methods:{createRole:function(){this.dialogOptions.isShow=!0,this.dialogOptions.currentRow=this.option.currentRow,this.dialogOptions.isDisabled=!0},updateRole:function(){this.dialogOptionsupdate.isShow=!0,this.dialogOptionsupdate.currentRow=this.currentRow,this.dialogOptionsupdate.isDisabled=!0},Qrychannel:function(){var e=this;this.loading=!0;var t=new T.a;t.data.BillTran=this.newUserDate.IdName.substring(0,6),Object(i.a)(t).then(function(t){e.loading=!1,e.tableData=t.RspInfo.pageList}).catch(function(t){e.loading=!1,e.tableData=[]})},handleCurrentChange:function(e){this.currentRow=e},openUpdate:function(){this.newUserDate.BsID=this.option.currentRow[0].BsID,this.newUserDate.BsName=this.option.currentRow[0].BsName,this.newUserDate.IdName=this.newUserDate.BsID+"-"+this.newUserDate.BsName,this.Qrychannel()},cancleUserMod:function(){this.option.isShow=!1,this.$refs.newUserDate.clearValidate()},closeUserMod:function(){void 0!=this.$refs.newUserDate&&(this.$refs.newUserDate.resetFields(),this.$refs.newUserDate.clearValidate()),this.tableData=[],this.$emit("refreshTable")},delUser:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.Del()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},Del:function(){var e=this;this.loading=!0;var t=new $.a;t.data.BillTran=this.newUserDate.IdName.substring(0,6),t.data.Channel=this.currentRow[0].Channel,t.data.TranCode=this.currentRow[0].TranCode,Object(i.a)(t).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"删除成功!"}),e.Qrychannel()}).catch(function(t){e.$aui.message.show({type:"warning",message:"删除失败!"+t.SYS_HEAD.ReturnMessage}),e.loading=!1})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"渠道业务分配",visible:e.isShow,width:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeUserMod,show:e.openUpdate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"newUserDate",attrs:{size:"mini",model:e.newUserDate,rules:e.rules,inline:"","label-width":"120px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:10}},[a("aui-form-item",{attrs:{prop:"IdName",label:"业务类型编号"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.IdName,callback:function(t){e.$set(e.newUserDate,"IdName",t)},expression:"newUserDate.IdName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.Qrychannel}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",{attrs:{gutter:10}},[e.btnPermission("Button_User_Add")?a("aui-col",{attrs:{lg:3,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:e.createRole}},[e._v("新增")])],1):e._e(),e._v(" "),e.btnPermission("Button_User_Edit")?a("aui-col",{attrs:{lg:3,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:1!=e.currentRow.length},on:{click:e.updateRole}},[e._v("修改")])],1):e._e(),e._v(" "),e.btnPermission("Button_User_Delete")?a("aui-col",{attrs:{lg:3,md:3}},[a("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:1!=e.currentRow.length},on:{click:e.delUser}},[e._v("删除")])],1):e._e(),e._v(" "),e.btnPermission("Button_User_Add")?a("aui-col",{attrs:{lg:3,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancleUserMod}},[e._v("取消")])],1):e._e()],1),e._v(" "),a("span",[a("H3",[e._v("渠道业务信息")])],1),e._v(" "),a("aui-table",{ref:"table",staticClass:"tableMarginTop",staticStyle:{"min-height":"390px"},attrs:{data:e.tableData,border:"","highlight-current-row":"","header-row-class-name":"tableHeaderClass"},on:{"selection-change":e.handleCurrentChange}},[a("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"Channel",label:"渠道"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"TranCode",label:"交易码"}})],1)],1)],1)]),e._v(" "),a("keep-alive",[a(e.dialogList.addbusinessTypeDialog,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.Qrychannel}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.update,{tag:"component",attrs:{optionUpdate:e.dialogOptionsupdate},on:{refreshTable:e.Qrychannel}})],1)],1)},staticRenderFns:[]};var L=a("/Xao")(A,O,!1,function(e){a("iUNl")},"data-v-31a09c79",null).exports,z=function e(){l()(this,e),this.data={Brno:"",BsName:"",BsID:"",BsAttr:"",BsPrefixLetter:"",BsStatus:"",OperUserID:"",OperDate:"",OperTime:"",BsIDTp:"2",BusiOper:"M"},this.BusiDataKey="mod_TP_BSTP_yuyue",this.TransServiceCode="ib-dbcomm/dbComm"},M={name:"",data:function(){return{BusinessList:[{name:"2-个人业务",value:"2"},{name:"1-对公业务",value:"1"}],BusinessList1:[{name:"0-启用",value:"0"},{name:"1-不启用",value:"1"}],loading:!1,newUserDate:{branchId:"",BsAttr:"",BsStatus:"",BsID:"",IdName:"",BsName:""},rules:{BsName:[{required:!0,message:"请输入业务名称",trigger:"blur"},{validator:Object(u.h)(30),trigger:"blur"}],BsAttr:[{required:!0,message:"请选择业务分类",trigger:"change"}],BsStatus:[{required:!0,message:"请选择业务状态",trigger:"change"}]}}},props:{optionUpdate:Object},computed:{isShow:{get:function(){return this.optionUpdate.isShow},set:function(e){this.optionUpdate.isShow=e}}},methods:{openUpdate:function(){console.log(this.optionUpdate.currentRow),this.newUserDate.branchId=this.optionUpdate.currentRow[0].Brno,this.newUserDate.BsAttr=this.optionUpdate.currentRow[0].BsAttr,this.newUserDate.BsID=this.optionUpdate.currentRow[0].BsID,this.newUserDate.BsName=this.optionUpdate.currentRow[0].BsName,this.newUserDate.BsStatus=this.optionUpdate.currentRow[0].BsStatus,this.newUserDate.IdName=this.newUserDate.BsID+"-"+this.newUserDate.BsName},cancleUserMod:function(){this.optionUpdate.isShow=!1,this.$refs.newUserDate.clearValidate()},closeUserMod:function(){this.$refs.newUserDate.clearValidate()},confirm:function(){var e=this;this.$refs.newUserDate.validate(function(t){if(t){e.loading=!0;var a=new c.a;a.data.BsName=e.newUserDate.BsName,a.data.BSIDTP="2",Object(i.a)(a).then(function(t){null!=t.RspInfo.Result&&t.RspInfo.Result[0].BSID!=e.newUserDate.BsID?(e.$aui.message.show({type:"warning",message:"数据已存在!"}),e.loading=!1):e.confirm1()})}})},confirm1:function(){var e=this;this.$refs.newUserDate.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;e.loading=!0;var a=new z;a.data.Brno=e.newUserDate.branchId,a.data.BsAttr=e.newUserDate.BsAttr,a.data.BsID=e.newUserDate.IdName.substring(0,6),a.data.BsName=e.newUserDate.BsName,a.data.BsStatus=e.newUserDate.BsStatus,a.data.BsIDTp="2",Object(i.a)(a).then(function(t){e.isShow=!1,e.loading=!1,e.$aui.message.show({type:"success",message:"用户修改成功!"}),e.optionUpdate.isShow=!1,e.$emit("refreshTable")}).catch(function(t){e.isShow=!1,e.loading=!1})})}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{title:"修改业务类型",visible:e.isShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeUserMod,show:e.openUpdate}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"newUserDate",attrs:{size:"mini",model:e.newUserDate,rules:e.rules,inline:"","label-width":"120px","label-position":"right"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"branchId",label:"机构号"}},[a("aui-select",{attrs:{disabled:e.optionUpdate.isDisabled,filterable:"",placeholder:"请选择机构编号"},model:{value:e.newUserDate.branchId,callback:function(t){e.$set(e.newUserDate,"branchId",t)},expression:"newUserDate.branchId"}},e._l(e.optionUpdate.brnoList,function(e){return a("aui-option",{key:e.orgno,attrs:{label:e.cname,value:e.orgno,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsAttr",label:"业务分类"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择业务分类"},model:{value:e.newUserDate.BsAttr,callback:function(t){e.$set(e.newUserDate,"BsAttr",t)},expression:"newUserDate.BsAttr"}},e._l(e.BusinessList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"Id",label:"业务ID"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.IdName,callback:function(t){e.$set(e.newUserDate,"IdName",t)},expression:"newUserDate.IdName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsName",label:"业务名称"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.newUserDate.BsName,callback:function(t){e.$set(e.newUserDate,"BsName",t)},expression:"newUserDate.BsName"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{prop:"BsStatus",label:"业务状态"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择业务状态"},model:{value:e.newUserDate.BsStatus,callback:function(t){e.$set(e.newUserDate,"BsStatus",t)},expression:"newUserDate.BsStatus"}},e._l(e.BusinessList1,function(e){return a("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"20px 0"}},[a("aui-button",{attrs:{size:"mini"},on:{click:e.cancleUserMod}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var F=a("/Xao")(M,P,!1,function(e){a("KnCp")},"data-v-173fa7cf",null).exports,j=function e(){l()(this,e),this.data={Brno:"",BsIDTp:"2",PageSize:"",BsName:"",CurtPage:"",StartRows:"",BusiOper:"Q"},this.BusiDataKey="sel_cr_biztype",this.TransServiceCode="ib-dbcomm/dbComm"},q=function e(){l()(this,e),this.data={Brno:"",BsID:"",BsIDTp:"2",BusiOper:"D"},this.CommCode="CRFillBillSystem",this.SceneCode="DelFillInBizType",this.TransServiceCode="mg-afaservices-rsv/listBusiTypefillDel"},V={name:"",components:{selectTree:a("tzsN").a},data:function(){return{Status:[],BsIDTp1:[],BsAttr1:[],brnoMap:{},permission:{},brnoList:[],brnoListold:[],pageSize:void 0,brnoName:{},form:{branchId:[],roleID:"",roleName:""},dialogList:{addbusinessTypeDialog:m,update:F,allocation:B,channel:L},currentRow:[],currentPage:1,totalRcrdNum:0,tableData:[],loading:!1,total:0,startDialogVisible:!1,checkedUser:!1,isDisabledDel:!1,dialogOptions:{isShow:!1},dialogOptionsupdate:{isShow:!1,currentRow:[]},dialogOptionsallocation:{isShow:!1,currentRow:[]},dialogOptionschannel:{isShow:!1,currentRow:[]},dialogOptionsupdateUser:{isShow:!1,currentRow:[]},rules:{branchId:[{required:!0,message:"请选择机构编号",trigger:"change"}]}}},computed:{},created:function(){this.Status=s.a.get("Status"),this.BsAttr1=s.a.get("BsAttr1"),this.BsIDTp1=s.a.get("BsIDTp1"),this.pageSize=s.a.get("PageSize"),this.initList()},methods:{handleCommand:function(e){this.permission[this.currentRow[0].Brno]?"detail"==e?this.allocation():"tradeBind"==e&&this.channel():this.$aui.message.show({type:"warning",message:"权限不足,无法修改！"})},dataFormat4:function(e,t){return"Brno"==t.property?e[t.property]+"-"+e.BrName:"IsQueue"==t.property?this.enum[e[t.property]]:void 0},dataFormat:function(e,t){if("BsStatus"==t.property)return this.Status[e[t.property]]},dataFormat1:function(e,t){if("BsIDTp"==t.property)return this.BsIDTp1[e[t.property]]},dataFormat2:function(e,t){if("BsAttr"==t.property)return this.BsAttr1[e[t.property]]},initList:function(){var e=this;this.loading=!0;var t=new o.a;t.data.orgno=this.$store.getters.BranchNum,Object(i.a)(t).then(function(t){e.loading=!1,e.brnoList=t.RspInfo.Result||[],e.brnoListold=t.RspInfo.Result||[],e.permission=n.a.objArray2Hash(e.brnoList,"orgno"),e.brnoMap=t.RspInfo.orgMap||{},e.brnoList=n.a.formatTreeData(e.brnoList,"orgno","superno"),e.form.branchId.push(e.brnoList[0].orgno)}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),console.error("查询错误",t)})},businesstypeList:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var a=new j;a.data.Brno=e.form.branchId[0],a.data.CurtPage=e.currentPage,a.data.PageSize=e.pageSize,a.data.StartRows=(e.currentPage-1)*e.pageSize,Object(i.a)(a).then(function(t){e.loading=!1,e.tableData=t.RspInfo.Result,e.totalRcrdNum=Number(t.RspInfo.totalNum)}).catch(function(t){e.loading=!1,e.tableData=[],e.totalRcrdNum=0,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage})})}})},checkPermission:function(e){this.permission[this.currentRow[0].Brno]?e?this.updateRole():this.delUser():this.$aui.message.show({type:"warning",message:"权限不足,无法修改！"})},changePage:function(e){this.currentPage=e,this.businesstypeList()},refreshTable:function(){this.businesstypeList()},updateRole:function(){this.dialogOptionsupdate.isShow=!0,this.dialogOptionsupdate.currentRow=this.currentRow,this.dialogOptionsupdate.isDisabled=!0,this.dialogOptionsupdate.brnoList=this.brnoList},allocation:function(){this.dialogOptionsallocation.isShow=!0,this.dialogOptionsallocation.isDisabled=!0,this.dialogOptionsallocation.currentRow=this.currentRow,this.dialogOptionsallocation.brnoList=this.brnoList},channel:function(){this.dialogOptionschannel.isShow=!0,this.dialogOptionschannel.currentRow=this.currentRow,this.dialogOptionschannel.brnoList=this.brnoList,this.dialogOptionschannel.isDisabled=!0},delUser:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.Del()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},createRole:function(){this.dialogOptions.isShow=!0,this.dialogOptions.brnoList=this.brnoListold},Del:function(){var e=this;this.loading=!0;var t=new q;t.data.Brno=this.currentRow[0].Brno,t.data.BsID=this.currentRow[0].BsID,Object(i.a)(t).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"用户删除成功!"}),e.businesstypeList()}).catch(function(t){e.$aui.message.show({type:"success",message:"用户删除失败!"}),e.loading=!1})},handleCurrentChange:function(e){this.currentRow=e[0],this.businesstypeList()},selectList:function(e){this.currentRow=e,1==e.length?this.isDisabledDel=!0:e.length>1?this.$refs.table.toggleRowSelection(e[0]):this.isDisabledDel=!1}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",{staticStyle:{overflow:"visible"}},[a("aui-form",{ref:"form",attrs:{model:e.form,size:"mini","label-position":"top",rules:e.rules}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:6,lg:6}},[a("aui-form-item",{attrs:{label:"机构编号",prop:"branchId"}},[a("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.brnoList,placeholder:"请选择机构"},model:{value:e.form.branchId,callback:function(t){e.$set(e.form,"branchId",t)},expression:"form.branchId"}})],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:4,md:6}},[a("aui-button",{attrs:{type:"primary",icon:"aui-icon-search",loading:e.loading,size:"mini"},on:{click:e.businesstypeList}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",{attrs:{gutter:10}},[e.btnPermission("Button_User_Add")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:0!=e.currentRow.length},on:{click:e.createRole}},[e._v("新增")])],1):e._e(),e._v(" "),e.btnPermission("Button_User_Edit")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:!e.isDisabledDel},on:{click:function(t){e.checkPermission("1")}}},[e._v("修改")])],1):e._e(),e._v(" "),e.btnPermission("Button_User_Delete")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:!e.isDisabledDel},on:{click:function(t){e.checkPermission()}}},[e._v("删除")])],1):e._e(),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[a("aui-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("aui-button",{attrs:{type:"primary",size:"mini",disabled:!e.isDisabledDel}},[e._v("\n              更多操作"),a("i",{staticClass:"aui-icon-arrow-down aui-icon--right"})]),e._v(" "),a("aui-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.btnPermission("Button_User_Branch")?a("aui-dropdown-item",{attrs:{command:"detail"}},[e._v("所属业务分配")]):e._e(),e._v(" "),e.btnPermission("Button_User_Branch")?a("aui-dropdown-item",{attrs:{command:"tradeBind"}},[e._v("渠道业务分配")]):e._e()],1)],1)],1)],1),e._v(" "),a("aui-table",{ref:"table",staticClass:"tableMarginTop",staticStyle:{"min-height":"390px"},attrs:{data:e.tableData,border:"","highlight-current-row":"","header-row-class-name":"tableHeaderClass"},on:{"selection-change":e.selectList}},[a("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"Brno",formatter:e.dataFormat4,label:"\t机构号"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"BsID",label:"业务ID"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"BsName",label:"业务名称"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"BsAttr",formatter:e.dataFormat2,label:"业务分类"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"BsStatus",formatter:e.dataFormat,label:"业务状态"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:this.tableData,expression:"this.tableData"}],staticStyle:{"text-align":"right","margin-top":"20px"}},[a("aui-pagination",{attrs:{"current-page":e.currentPage,background:"","page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalRcrdNum},on:{"current-change":e.changePage}})],1)],1),e._v(" "),a("keep-alive",[a(e.dialogList.addbusinessTypeDialog,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.businesstypeList}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.update,{tag:"component",attrs:{optionUpdate:e.dialogOptionsupdate},on:{refreshTable:e.businesstypeList}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.allocation,{tag:"component",attrs:{option:e.dialogOptionsallocation},on:{systemEmit:e.businesstypeList}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.channel,{tag:"component",attrs:{option:e.dialogOptionschannel},on:{refreshTable:e.businesstypeList}})],1)],1)},staticRenderFns:[]};var H=a("/Xao")(V,E,!1,function(e){a("zFjC")},"data-v-6557c766",null);t.default=H.exports},o5Kx:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.content[data-v-895b2dfc] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.require[data-v-895b2dfc] {\n  color: red;\n}\n.dialog-text[data-v-895b2dfc] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n.role[data-v-895b2dfc] {\n  width: 95%;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  height: 290px;\n}\n.role .roleHeader[data-v-895b2dfc] {\n    color: #606266;\n    font-weight: 500;\n    font-size: 14px;\n    background: #f5f7fa;\n    height: 42px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 9px;\n    overflow-y: auto;\n}\n.aui-card[data-v-895b2dfc] {\n  overflow: inherit;\n}\n",""])},pqAb:function(e,t,a){"use strict";var i=a("AA3o"),n=a.n(i);t.a=function e(){n()(this,e),this.data={Brno:"",BsID:"",SubBsID:"",BusiOper:""},this.BusiDataKey="",this.TransServiceCode="ib-dbcomm/dbComm"}},qN9H:function(e,t,a){"use strict";var i=a("AA3o"),n=a.n(i);t.a=function e(){n()(this,e),this.data={Brno:"",BsAttr:"",BusiOper:"",BsIDTp:"3"},this.BusiDataKey="",this.TransServiceCode="ib-dbcomm/dbComm"}},zFjC:function(e,t,a){var i=a("00kP");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("5038292a",i,!0)}});