webpackJsonp([102],{"20r6":function(e,a,t){var r=t("bJx8");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("8bSs")("08877fc2",r,!0)},"94Gq":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("lC5x"),n=t.n(r),o=t("J0Oq"),i=t.n(o),l=t("syAl"),s=t("tzsN"),u=t("0oES"),c=t("AA3o"),m=t.n(c),d=function e(){m()(this,e),this.data={devType:"",startTime:"",endTime:""},this.TransServiceCode="AT_ATM_MALFUNCTIONQUERY"},p=function e(){m()(this,e),this.data={branchId:[],devBrand:"",devType:"",module:"",startTime:"",endTime:"",cycle:""},this.TransServiceCode="AT_ATM_MALFUNCTIONCOUNT"},b=t("A8CQ"),y=t("pADA"),v=t("0VOF"),f=t("n6OB"),T=t("mydf"),h={name:"boot-rate-form-manage",components:{selectTree:s.a},data:function(){return{loading:!1,brno:[],deviceTypeSpinner:[],brandSpinner:[],tableData:[],tableData2:[],tableTotal:0,currentPage:1,pageSize:l.a.get("PageSize"),queryForm:{branchId:"34060000",sTime:"",eTime:"",statisticType:["2"],rangeLevel:["2"],devBrand:[],devType:"atm",moduleType:[],cycle:["5"]}}},created:function(){this.initList()},mounted:function(){this.queryForm.sTime=y.a.getNowTime(90),this.queryForm.eTime=y.a.getNowTime(0)},methods:{initList:function(){var e=this;this.getBranchList();var a=new f.a;Object(u.a)(a).then(function(a){e.deviceTypeSpinner=a.RspInfo.Result||[],e.deviceTypeSpinner.unshift({DataKeyVal:"",Meaning:""})}).catch(function(e){console.error("查询错误",e)});var t=new T.a;t.data.BrandName=void 0,t.data.BrandShortName=void 0,t.QueryPageNo=1,t.QueryRowNum=99999,Object(u.a)(t).then(function(a){e.brandSpinner=a.RspInfo.brandinfolist||[],e.brandSpinner.unshift({brandId:"",brandName:""})}).catch(function(e){console.error("查询错误",e)})},getBranchList:function(){var e=this;this.loading=!0;var a=new v.a;a.data.branchLevel=this.queryForm.rangeLevel.join(""),Object(u.a)(a).then(function(a){e.loading=!1,e.brno=a.RspInfo&&a.RspInfo.resultSet||[],e.queryForm.branchId=e.brno[1].branchNum}).catch(function(a){e.loading=!1,console.error("查询错误",a)})},clearForm:function(e){this.$refs[""+e].resetFields()},queryModel:function(){var e=this;return i()(n.a.mark(function a(){var t,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new d).data.branchId=[e.queryForm.branchId],t.data.startTime=e.queryForm.sTime,t.data.endTime=e.queryForm.eTime,t.data.devType=""==e.queryForm.devType?[]:[e.queryForm.devType],t.data.devBrand=e.queryForm.devBrand[0]?e.queryForm.devBrand:[],t.data.devModule=e.queryForm.moduleType,a.next=10,Object(u.a)(t);case 10:r=a.sent,e.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?(e.tableData=r.RspInfo.resultSet,console.log(e.tableData)):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 13:case"end":return a.stop()}},a,e)}))()},queryModel2:function(){var e=this;return i()(n.a.mark(function a(){var t,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new p).data.branchId=[e.queryForm.branchId],t.data.publicType=e.queryForm.rangeLevel.join(""),t.data.startTime=e.queryForm.sTime,t.data.endTime=e.queryForm.eTime,t.data.devType=""==e.queryForm.devType?[]:[e.queryForm.devType],t.data.devBrand=e.queryForm.devBrand[0]?e.queryForm.devBrand:[],t.data.devModel=e.queryForm.moduleType,t.data.devModule=e.queryForm.moduleType,a.next=12,Object(u.a)(t);case 12:r=a.sent,e.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?(e.tableData2=r.RspInfo.resultSet,console.log(e.tableData2)):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 15:case"end":return a.stop()}},a,e)}))()},getExcel:function(){var e=this;return i()(n.a.mark(function a(){var t,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new b.a).data.branchNo=e.queryForm.branchId.join(","),t.data.startTime=e.queryForm.sTime,t.data.endTime=e.queryForm.eTime,a.next=7,Object(u.a)(t);case 7:r=a.sent,e.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?e.downloadFile(r.RspInfo.fileName):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 10:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(){this.queryModel()},handleCurrentChange:function(){this.queryModel()}},watch:{"queryForm.statisticType":function(e){1==[e]?this.queryModel2():(this.queryForm.rangeLevel=["2"],this.getBranchList(),this.queryModel())},"queryForm.rangeLevel":function(){this.getBranchList()}}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fault-detail-form-manage",attrs:{"element-loading-text":"加载中。。。"}},[t("div",[t("aui-card",{staticClass:"type-info-box-card"},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"统计方式",prop:"statisticType"}},[t("aui-cascader",{attrs:{name:"",options:[{value:"1",label:"汇总"},{value:"2",label:"明细"}]},model:{value:e.queryForm.statisticType,callback:function(a){e.$set(e.queryForm,"statisticType",a)},expression:"queryForm.statisticType"}})],1)],1),e._v(" "),"1"==e.queryForm.statisticType[0]?t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"统计范围层级",prop:"rangeLevel"}},[t("aui-cascader",{attrs:{name:"",options:[{value:"2",label:"分行"},{value:"3",label:"支行"},{value:"4",label:"网点"},{value:"5",label:"终端"}]},model:{value:e.queryForm.rangeLevel,callback:function(a){e.$set(e.queryForm,"rangeLevel",a)},expression:"queryForm.rangeLevel"}})],1)],1):e._e(),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"机构编号 必输 根据层级",prop:"branchId"}},[t("aui-select",{attrs:{filterable:"",placeholder:"请选择所属机构号"},model:{value:e.queryForm.branchId,callback:function(a){e.$set(e.queryForm,"branchId",a)},expression:"queryForm.branchId"}},e._l(e.brno,function(e){return t("aui-option",{key:e.branchNum,attrs:{label:e.branchNum+"-"+e.branchName,value:e.branchNum}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"设备品牌",prop:"devBrand"}},[t("aui-cascader",{attrs:{name:"",options:e.brandSpinner,props:{value:"brandId",label:"brandName"}},model:{value:e.queryForm.devBrand,callback:function(a){e.$set(e.queryForm,"devBrand",a)},expression:"queryForm.devBrand"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"设备类型",prop:"devType"}},[t("aui-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.queryForm.devType,callback:function(a){e.$set(e.queryForm,"devType",a)},expression:"queryForm.devType"}},e._l(e.deviceTypeSpinner,function(e){return t("aui-option",{key:e.DataKeyVal,attrs:{label:e.DataKeyVal+"-"+e.Meaning,value:e.DataKeyVal,disabled:e.disabled}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},["2"==e.queryForm.statisticType[0]?t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"模块类型",prop:"moduleType"}},[t("aui-cascader",{attrs:{name:"",options:[{value:"",label:"模块1"},{value:"2",label:"模块2"},{value:"3",label:"模块3"},{value:"4",label:"模块4"}]},model:{value:e.queryForm.moduleType,callback:function(a){e.$set(e.queryForm,"moduleType",a)},expression:"queryForm.moduleType"}})],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"开始日期",prop:"sTime"}},[t("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:e.queryForm.sTime,callback:function(a){e.$set(e.queryForm,"sTime",a)},expression:"queryForm.sTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"结束日期",prop:"eTime"}},[t("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:e.queryForm.eTime,callback:function(a){e.$set(e.queryForm,"eTime",a)},expression:"queryForm.eTime"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:function(a){"2"==e.queryForm.statisticType[0]?e.queryModel():e.queryModel2()}}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(a){e.clearForm("queryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{staticClass:"type-info-bottom"},["2"==e.queryForm.statisticType[0]?t("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{prop:"序号",label:"序号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"分行名称",label:"分行名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"支行名称",label:"支行名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"自助银行名称",label:"网点名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"终端编号",label:"终端号（设备编号）"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"安装地址",label:"安装地址"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"品牌",label:"生产厂商（品牌）"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"设备类型",label:"设备类型"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"设备型号",label:"设备型号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"模块名称",label:"模块名"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"故障名称",label:"故障名称",formatter:function(e,a){return 1==e.MODULETYPE?"读卡器":2==e.MODULETYPE?"密码键盘":3==e.MODULETYPE?"取款模块":4==e.MODULETYPE?"存款模块":5==e.MODULETYPE?"流水打印机":6==e.MODULETYPE?"凭条打印机":7==e.MODULETYPE?"卡箱":8==e.MODULETYPE?"key箱":""}}}),e._v(" "),t("aui-table-column",{attrs:{prop:"开始时间",label:"开始时间"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"结束时间",label:"结束时间"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"故障持续时间",label:"故障持续时间（分钟）"}})],1):e._e(),e._v(" "),"1"==e.queryForm.statisticType[0]?t("aui-table",{ref:"tableData2",staticClass:"tableMarginTop",attrs:{data:e.tableData2,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{prop:"分行",label:"分行名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"设备品牌",label:"设备品牌"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"设备类型",label:"设备类型"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"读卡器故障次数",label:"读卡器故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"密码键盘故障次数",label:"密码键盘故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"取款模块故障次数",label:"取款模块故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"存款模块故障次数",label:"存款模块故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"流水打印机故障次数",label:"流水打印机故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"凭条打印机故障次数",label:"凭条打印机故障次数"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"总故障次数",label:"总故障次数"}})],1):e._e()],1)],1)])},staticRenderFns:[]};var q=t("/Xao")(h,g,!1,function(e){t("20r6")},null,null);a.default=q.exports},bJx8:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.aui-date-editor.aui-input {\n  width: 100% !important;\n}\n.aui-card {\n  overflow: inherit;\n}\n",""])}});