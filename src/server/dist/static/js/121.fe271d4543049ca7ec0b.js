webpackJsonp([121],{PQiG:function(t,e,a){var r=a("Q2I4");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("1238d0ba",r,!0)},Q2I4:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"",""])},bXw8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("0oES"),i=a("pADA"),n=a("syAl"),o=a("tzsN"),s=a("0VOF"),l=a("AA3o"),u=a.n(l),c=function t(){u()(this,t),this.data={BusiOper:"Q",USERNO:"",ORGNO:""},this.BusiDataKey="QeryUserAndOrgLoginStatus",this.TransServiceCode="ib-dbcomm/dbComm"},g=a("O99E"),m={components:{selectTree:o.a},data:function(){return{queryForm:{teller:"",brno:[]},loading:!1,brnoList:[],tableDateList:[],pageSize:void 0,currentPage:1,total:0}},watch:{queryForm:{handler:function(t,e){this.currentPage=1},deep:!0}},created:function(){this.pageSize=n.a.get("PageSize"),this.initList()},methods:{handleCurrentChange:function(t){this.currentPage=t,this.tableQuery()},clearForm:function(t){this.$refs[""+t].resetFields(),this.tableDateList=[],this.total=0},dtFormat:function(t,e){return i.a.timeFormat(t[e.property])},initList:function(){var t=this;this.loading=!0;var e=new s.a;e.data.orgno=this.$store.getters.BranchNum,Object(r.a)(e).then(function(e){t.loading=!1,t.brnoList=e.RspInfo.Result||[],t.brnoMap=e.RspInfo.orgMap||{},t.brnoList=i.a.formatTreeData(t.brnoList,"orgno","superno")}).catch(function(e){t.loading=!1,t.$aui.message.show({type:"error",message:e.SYS_HEAD.ReturnMessage+"!"})})},checkLoad:function(){var t=this;if(this.queryForm.teller){var e=new g.a;e.data.UserNum=this.queryForm.teller,Object(r.a)(e).then(function(e){"000000"==e.SYS_HEAD.ReturnCode||(t.queryForm.teller="",t.$aui.message.show({type:"warning",message:"该柜员号不存在"}))})}},tableQuery1:function(){var t=this,e=new c;e.data.USERNO=this.queryForm.teller,e.data.ORGNO=this.queryForm.brno[0],e.data.CurtPage=this.currentPage+"",e.data.PageSize=this.pageSize+"",Object(r.a)(e).then(function(e){"000000"==e.SYS_HEAD.ReturnCode?(t.total=e.RspInfo.totalNum?e.RspInfo.totalNum:0,t.loading=!1,t.tableDateList=e.RspInfo.Result||[]):(t.loading=!1,t.tableDateList=[],t.total=0,t.$aui.message.show({type:"warning",message:"当前机构无柜员登录"}))}).catch(function(e){t.tableDateList=[],t.total=0,t.loading=!1,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage})})},tableQuery2:function(){var t=this,e=new c;e.data.USERNO=this.queryForm.teller,e.data.ORGNO=this.queryForm.brno[0],e.data.CurtPage=this.currentPage+"",e.data.PageSize=this.pageSize+"",Object(r.a)(e).then(function(e){"000000"==e.SYS_HEAD.ReturnCode?(t.total=e.RspInfo.totalNum?e.RspInfo.totalNum:0,t.loading=!1,t.tableDateList=e.RspInfo.Result||[]):(t.loading=!1,t.tableDateList=[],t.total=0,t.$aui.message.show({type:"warning",message:"柜员未登录"}))}).catch(function(e){t.tableDateList=[],t.total=0,t.loading=!1,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage})})},tableQuery3:function(){var t=this,e=new c;e.data.USERNO=this.queryForm.teller,e.data.ORGNO=this.queryForm.brno[0],e.data.CurtPage=this.currentPage+"",e.data.PageSize=this.pageSize+"",Object(r.a)(e).then(function(e){"000000"==e.SYS_HEAD.ReturnCode?(t.total=e.RspInfo.totalNum?e.RspInfo.totalNum:0,t.loading=!1,t.tableDateList=e.RspInfo.Result||[]):(t.loading=!1,t.tableDateList=[],t.total=0,t.$aui.message.show({type:"warning",message:"该柜员号目前未在该机构登录"}))}).catch(function(e){t.tableDateList=[],t.total=0,t.loading=!1,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage})})},tableQuery:function(){""==this.queryForm.teller&&""==this.queryForm.brno?this.$aui.message.show({type:"warning",message:"柜员号或机构号必输其一"}):(this.loading=!0,""==this.queryForm.teller?this.tableQuery1():""==this.queryForm.brno?this.tableQuery2():this.tableQuery3())}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"branch-manage",attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",[a("aui-form",{ref:"queryForm",attrs:{model:t.queryForm,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"柜员号",prop:"teller"}},[a("aui-input",{attrs:{placeholder:"请输入柜员号"},on:{change:t.checkLoad},model:{value:t.queryForm.teller,callback:function(e){t.$set(t.queryForm,"teller",e)},expression:"queryForm.teller"}})],1)],1),t._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"机构号",prop:"brno"}},[a("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":t.brnoList,placeholder:"请选择机构"},model:{value:t.queryForm.brno,callback:function(e){t.$set(t.queryForm,"brno",e)},expression:"queryForm.brno"}})],1)],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:t.tableQuery}},[t._v("查询")])],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(e){t.clearForm("queryForm")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-table",{ref:"tableDateList",staticClass:"tableMarginTop",attrs:{data:t.tableDateList,border:"","max-height":"400",width:"100%","header-row-class-name":"tableHeaderClass","highlight-current-row":""}},[a("aui-table-column",{attrs:{prop:"USERNO",label:"柜员号",fixed:""}}),t._v(" "),a("aui-table-column",{attrs:{prop:"ORGNO",label:"机构号",fixed:""}}),t._v(" "),a("aui-table-column",{attrs:{prop:"LOGINTM",formatter:t.dtFormat,label:"登录时间",fixed:""}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[a("aui-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var d=a("/Xao")(m,h,!1,function(t){a("PQiG")},null,null);e.default=d.exports}});