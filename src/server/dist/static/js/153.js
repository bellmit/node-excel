webpackJsonp([153],{"6xtG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),o=a("J0Oq"),i=a.n(o),s=a("syAl"),c=a("tzsN"),u=a("0oES"),l=a("AA3o"),m=a.n(l),d=function t(){m()(this,t),this.data={startTime:""},this.TransServiceCode="AT_ATM_Open_Month"},h=function t(){m()(this,t),this.data={startTime:"",branchId:""},this.TransServiceCode="AT_ATM_Open_Month_All"},p=a("pADA"),y=a("0VOF"),f={name:"boot-rate-form-manage",components:{selectTree:c.a},data:function(){return{loading:!1,brno:[],tableData:[],tableDataShow:[],lineData:[],lineSettings:{yAxisType:["percent"],digit:5},tableTotal:0,currentPage:1,pageSize:s.a.get("PageSize"),queryForm:{branchId:"34060000",sTime:"",chartType:["1"]},testRes:[{"09月":"92.04","10月":"98.43","合计":"10","机构名称":"赞同科技股份有限公司北京"},{"09月":"58.04","10月":"80.43","合计":"20","机构名称":"赞同科技股份有限公司北京1"},{"09月":"98.04","10月":"80.43","合计":"26","机构名称":"赞同科技股份有限公司北京2"},{"09月":"99.04","10月":"80.43","合计":"17","机构名称":"赞同科技股份有限公司北京3"}],chartData3:{columns:["分行名称","辅助","设备数量","降低","升高"],rows:[{"分行名称":"test1","设备数量":20,"辅助":-.1,"降低":"-","升高":.3},{"分行名称":"test2","设备数量":50,"辅助":.2,"降低":"-","升高":.4},{"分行名称":"test3","设备数量":10,"辅助":.3,"降低":.2,"升高":"-"},{"分行名称":"test4","设备数量":120,"辅助":.1,"降低":"-","升高":.3},{"分行名称":"test5","设备数量":30,"辅助":.5,"降低":.12,"升高":"-"}]},chartColors3:["rgba(0,0,0,0)","#08f","rgba(200,100,100,.5)","rgba(100,200,100,.5)"],chartSettings3:{legendName:{"辅助":""},axisSite:{right:["设备数量"]},yAxisType:["normal","normal"],yAxisName:["开机率","设备数量"],stack:{"用户":["辅助","降低","升高"]}},chartExtend3:{series:{barGap:"-100%",barWidth:30},label:{show:!0,position:"top"},tooltip:{axisPointer:{type:"shadow"}}},grid:{}}},mounted:function(){this.queryForm.sTime=(p.a.getNowTime(0)+"").substr(0,6)},methods:{initList:function(){this.getBranchList()},getBranchList:function(){var t=this;this.loading=!0;var e=new y.a;e.data.branchLevel="2",Object(u.a)(e).then(function(e){t.loading=!1,t.brno=e.RspInfo&&e.RspInfo.resultSet||[],t.queryForm.branchId=t.brno[1].branchNum}).catch(function(e){t.loading=!1,console.error("查询错误",e)})},analysisToChartData:function(t){for(var e=[],a=0;a<t.length;a++){var r=1*t[a]["本月"]-t[a]["上月"];e[a]={},e[a]["分行名称"]=t[a]["机构名称"],e[a]["设备数量"]=t[a]["合计"],e[a]["辅助"]=r>=0?(1*t[a]["上月"]).toFixed(2):(1*t[a]["本月"]).toFixed(2),e[a]["降低"]=r>=0?"-":(1*t[a]["上月"]-1*t[a]["本月"]).toFixed(2),e[a]["升高"]=r>=0?(1*t[a]["本月"]-1*t[a]["上月"]).toFixed(2):"-"}return e},clearForm:function(t){this.$refs[""+t].resetFields()},queryModel:function(){var t=this;return i()(n.a.mark(function e(){var a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,(a=new d).data.startTime=t.queryForm.sTime,e.next=5,Object(u.a)(a);case 5:r=e.sent,t.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?(t.tableData=r.RspInfo.resultSet,console.log(t.tableData),t.chartData3.rows=t.analysisToChartData(r.RspInfo.resultSet)):t.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 8:case"end":return e.stop()}},e,t)}))()},queryModel2:function(){var t=this;return i()(n.a.mark(function e(){var a,r,o,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,(a=new h).data.startTime=t.queryForm.sTime,a.data.branchId=["34060000"],e.next=6,Object(u.a)(a);case 6:r=e.sent,t.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?(console.log(r.RspInfo.resultSet),o=r.RspInfo.resultSet,i=o.map(function(t){return{"月份":t["月份"]+"","全行开机率":t["全行开机率"]+"","分行开机率":t["分行开机率"]+""}}),t.lineData={columns:["月份","全行开机率","分行开机率"],rows:i}):t.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 9:case"end":return e.stop()}},e,t)}))()}},created:function(){this.initList()},watch:{"queryForm.chartType":function(t){1==[t]?(this.queryForm.sTime=(p.a.getNowTime(0)+"").substr(0,6),this.queryModel()):2==[t]&&(this.queryForm.sTime=(p.a.getNowTime(0)+"").substr(0,4),this.queryModel2())}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"devnum-bootrate-form-manage",attrs:{"element-loading-text":"加载中。。。"}},[a("div",[a("aui-card",{staticClass:"type-info-box-card"},[a("aui-form",{ref:"queryForm",attrs:{model:t.queryForm,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"图表类型",prop:"chartType"}},[a("aui-cascader",{attrs:{name:"",options:[{value:"1",label:"条形图"},{value:"2",label:"折线图"}]},model:{value:t.queryForm.chartType,callback:function(e){t.$set(t.queryForm,"chartType",e)},expression:"queryForm.chartType"}})],1)],1),t._v(" "),a("aui-col",{attrs:{md:6,lg:4}},[a("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"开始日期",prop:"sTime"}},[a("aui-date-picker",{attrs:{"value-format":2==t.queryForm.chartType[0]?"yyyy":"yyyyMM",type:2==t.queryForm.chartType[0]?"year":"month",placeholder:"选择日期"},model:{value:t.queryForm.sTime,callback:function(e){t.$set(t.queryForm,"sTime",e)},expression:"queryForm.sTime"}})],1)],1),t._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"机构编号 只有分行",prop:"branchId"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择所属机构号"},model:{value:t.queryForm.branchId,callback:function(e){t.$set(t.queryForm,"branchId",e)},expression:"queryForm.branchId"}},t._l(t.brno,function(t){return a("aui-option",{key:t.branchNum,attrs:{label:t.branchNum+"-"+t.branchName,value:t.branchNum}})}))],1)],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:function(e){"1"==t.queryForm.chartType[0]?t.queryModel():t.queryModel2()}}},[t._v("查询")])],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(e){t.clearForm("queryForm")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("aui-card",{staticClass:"type-info-bottom"},[1==t.queryForm.chartType[0]?a("ve-histogram",{attrs:{data:t.chartData3,settings:t.chartSettings3,extend:t.chartExtend3,colors:t.chartColors3,grid:t.grid}}):t._e(),t._v(" "),2==t.queryForm.chartType[0]?a("ve-line",{attrs:{data:t.lineData,settings:t.lineSettings}}):t._e()],1)],1)])},staticRenderFns:[]};var b=a("/Xao")(f,g,!1,function(t){a("IJf8")},null,null);e.default=b.exports},IJf8:function(t,e,a){var r=a("q9H7");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("47482a6a",r,!0)},q9H7:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.aui-date-editor.aui-input {\n  width: 100% !important;\n}\n.aui-card {\n  overflow: inherit;\n}\n",""])}});