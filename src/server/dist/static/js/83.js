webpackJsonp([83],{"6yV5":function(e,t,i){"use strict";var a=i("AA3o"),s=i.n(a);t.a=function e(){s()(this,e),this.data={Oeration:"",AppNum:"",MenuViewNum:"",MenuNum:"",MenuName:"",MenuIcon:"",MenuPath:"",MenuType:"",SortNum:"",ParentMenuNum:"",IsVisiBle:"",Asyniden:"",AttrLegalPerson:"",MenuSize:"",ActiveClass:"",BG:"",ThemeColor:"",LayoutRow:"",LayoutCol:"",MenuEnglishName:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="ModifyMenuTrade",this.TransServiceCode="mg-afaservices-upm/modifyMenuTrade"}},FJ3T:function(e,t,i){(e.exports=i("BkJT")(!1)).push([e.i,"\n@-webkit-keyframes myfirst-data-v-0d72bea2 {\n0% {\n    right: 0;\n}\n25% {\n    right: -144px;\n}\n50% {\n    right: 0;\n}\n75% {\n    right: -144px;\n}\n100% {\n    right: 0;\n}\n}\n@keyframes myfirst-data-v-0d72bea2 {\n0% {\n    right: 0;\n}\n25% {\n    right: -144px;\n}\n50% {\n    right: 0;\n}\n75% {\n    right: -144px;\n}\n100% {\n    right: 0;\n}\n}\n.clearfix[data-v-0d72bea2] {\n  position: relative;\n  overflow: hidden;\n}\n.treeTitle[data-v-0d72bea2] {\n  position: absolute;\n  right: 0;\n  color: #ccc;\n}\n.itemHeight[data-v-0d72bea2] {\n  height: 550px;\n}\n.rightStyle[data-v-0d72bea2] {\n  position: fixed;\n  background: #fff;\n  z-index: 20000;\n}\n.rightClickParent[data-v-0d72bea2] {\n  padding: 10px 0;\n  margin: 5px 0;\n  background-color: #fff;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n          box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n.rightClickChildren[data-v-0d72bea2] {\n  list-style: none;\n  line-height: 36px;\n  padding: 0 20px;\n  margin: 0;\n  font-size: 14px;\n  color: #606266;\n  cursor: pointer;\n  outline: none;\n}\n.rightClickChildren[data-v-0d72bea2]:hover {\n  background-color: #ecf5ff;\n  color: #66b1ff;\n}\n.dialog-text[data-v-0d72bea2] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n  font-size: 18px;\n}\n",""])},RJSf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("syAl");var a=i("0oES"),s=i("AA3o"),r=i.n(s),n=function e(){r()(this,e),this.data={QueInterfaceID:""},this.CommCode="CQParaManage",this.SceneCode="QuegMchnFaceQuery",this.TransServiceCode="mg-afaservices-cq/loadMenu"},o=function e(){r()(this,e),this.data={BusiOper:"Q1",Brno:"",RuleTp:"02"},this.BusiDataKey="sel_CQMS_RULE1",this.TransServiceCode="ib-dbcomm/dbComm"},u=function e(){r()(this,e),this.data={OperTp:"A",MenuName:"",MenuNameEn:void 0,NodeType:"",NeedCardFlag:void 0,QueInterfaceID:"",MenuIconPath:"",SupMenuNo:"",BsID:void 0,CueInfo:void 0},this.CommCode="CQParaManage",this.SceneCode="QuegMchnFace",this.TransServiceCode="mg-afaservices-cq/folderSet"},d=function e(){r()(this,e),this.data={OperTp:"D",MenuNo:"",QueInterfaceID:""},this.CommCode="CQParaManage",this.SceneCode="QuegMchnFace",this.TransServiceCode="mg-afaservices-cq/folderSet"},l=function e(){r()(this,e),this.data={BusiOper:"Q1",BsAttr:"",BsIDTp:"3",Brno:""},this.BusiDataKey="sel_bs_tp2",this.TransServiceCode="ib-dbcomm/dbComm"},c=(i("6yV5"),i("pADA")),p=i("fCv1"),m=i("B+2e"),h=i("0VOF"),g={name:"queInterfaceCfg",data:function(){return{isRightClick:!1,isHasData:!0,isShowGroup:!1,isShowTrade:!0,isRoot:!0,isPermission:!0,currentRow:void 0,mark:"",pictureNameList:[],serviceDistbList:[{value:"2",label:"个人业务"},{value:"1",label:"对公业务"}],serviceTypeList:[],serviceTypeMap:{},isDetail:!1,menuGroupAdd:{pictureName:"",serviceDistb:"",ParentMenuName:"",ParentMenuNun:"",serviceType:"",isCard:!1,prompts:"",listName:"",listEnglishName:"",MenuNum:""},addTradeGroup:!1,addTrade:!1,rightTitle:"",isShowMenu:!1,isShowAdd:!1,tradeTreeData:[],form:{paramId:""},paramIdList:[],permission:{},loading:!1,menuItemList:[],selection:[],rules:{serviceDistb:[{required:!0,message:"请选择业务",trigger:"change"}],serviceType:[{required:!0,message:"请选择业务类型",trigger:"change"}],pictureName:[{required:!0,message:"请选择图片",trigger:"change"}],listName:[{required:!0,message:"请输入目录名称",trigger:"blur"},{validator:p.l,trigger:"blur"},{validator:Object(p.h)(30),trigger:"blur"}],listEnglishName:[{validator:p.l,trigger:"blur"},{validator:Object(p.h)(30),trigger:"blur"},{validator:p.d,trigger:"blur"}],prompts:[{validator:p.l,trigger:"blur"},{validator:Object(p.h)(50),trigger:"blur"}]},queryRules:{paramId:[{required:!0,message:"请选择参数编号",trigger:"change"}]}}},created:function(){this.queryAppId(),this.queryPermission()},directives:{clickoutside:{bind:function(e,t,i){function a(i){if(e.contains(i.target))return!1;t.expression&&t.value(i)}e.__vueClickOutside__=a,document.addEventListener("click",a)},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}}},methods:{queryPermission:function(){var e=this;this.loading=!0;var t=new h.a;t.data.orgno=this.$store.getters.BranchNum,Object(a.a)(t).then(function(t){e.loading=!1;var i=t.RspInfo.Result||[];e.permission=c.a.objArray2Hash(i,"orgno")}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),console.error("查询错误",t)})},queryAppId:function(){var e=this,t=new o;t.data.Brno=this.$store.getters.BranchNum,Object(a.a)(t).then(function(t){e.loading=!1,e.paramIdList=t.RspInfo.Result}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage})})},serviceTypeLoad:function(){var e=this;this.$set(this.menuGroupAdd,"serviceType",""),this.loading=!0;var t=new l;t.data.Brno=this.$store.getters.BranchNum,t.data.BsAttr=this.menuGroupAdd.serviceDistb,Object(a.a)(t).then(function(t){e.loading=!1,e.serviceTypeList=t.RspInfo.Result||[],e.serviceTypeMap=c.a.objArray2Hash(e.serviceTypeList,"BsID")}).catch(function(t){e.serviceTypeList=[],e.serviceTypeMap={},e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1})},clickEvent:function(e,t,i,a){this.isShowMenu=!1,this.currentRow=t.data,"0"!=this.currentRow.MenuNo&&this.addTradGroup("详细信息","3")},handleClose:function(e){this.isShowMenu=!1},pictureLoad:function(){var e=this,t=new m.a;t.data.DataKey="3"!=this.mark?"1"==this.mark?"QueuePic1":"QueuePic":"0"==this.currentRow.NodeType?"QueuePic1":"QueuePic",Object(a.a)(t).then(function(t){e.pictureNameList=t.RspInfo.Result||[]}).catch(function(t){e.pictureNameList=[],e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage+"!"}),e.loading=!1})},sure:function(){var e=this;this.$refs.menuGroupAdd.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;e.loading=!0;var i=new u;i.data.NodeType="1"==e.mark?"0":"1",i.data.QueInterfaceID=e.form.paramId,i.data.MenuIconPath=e.menuGroupAdd.pictureName,i.data.SupMenuNo=e.menuGroupAdd.ParentMenuNum,i.data.MenuName="1"==e.mark?e.menuGroupAdd.listName:e.serviceTypeMap[e.menuGroupAdd.serviceType].BsName,i.data.MenuNameEn=e.menuGroupAdd.listEnglishName,"1"==e.mark||(i.data.BsID=e.menuGroupAdd.serviceType,i.data.NeedCardFlag=e.menuGroupAdd.isCard?"1":"0",i.data.CueInfo=e.menuGroupAdd.prompts),Object(a.a)(i).then(function(t){e.loading=!1;var i="1"==e.mark?"目录":"业务";e.$aui.message.show({type:"success",message:i+"创建成功!"}),e.$refs.menuGroupAdd.resetFields(),e.$refs.menuGroupAdd.clearValidate(),e.queryDeal()}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage+"!"})})})},addTradGroup:function(e,t){this.$refs.menuGroupAdd&&this.$refs.menuGroupAdd.clearValidate(),this.addTradeGroup=!0,this.isShowMenu=!1,this.rightTitle=e,this.mark=t,this.menuGroupAdd={},this.menuGroupAdd.ParentMenuNum=this.currentRow.MenuNo,this.menuGroupAdd.ParentMenuName=this.currentRow.MenuName,this.pictureLoad(),"1"==t?(this.isDetail=!1,this.isShowGroup=!0,this.isShowTrade=!1):"2"==t?(this.isDetail=!1,this.isShowGroup=!1,this.isShowTrade=!0):"0"==t?this.isShowTrade=!1:"3"==t&&(this.menuGroupAdd={pictureName:this.currentRow.MenuIconPath,serviceDistb:this.currentRow.BsAttr,MenuNum:this.currentRow.MenuNo,isCard:"1"==this.currentRow.NeedCardFlag,prompts:this.currentRow.CueInfo,listName:this.currentRow.MenuName,listEnglishName:this.currentRow.MenuNameEn},this.isDetail=!0,this.serviceTypeLoad(),this.menuGroupAdd.serviceType=this.currentRow.BsID,"0"==this.currentRow.NodeType?(this.isShowGroup=!0,this.isShowTrade=!1):(this.isShowGroup=!1,this.isShowTrade=!0))},returnMes:function(){this.$refs.menuGroupAdd.resetFields(),this.$refs.menuGroupAdd.clearValidate(),this.addTradeGroup=!1,this.rightTitle="维护"},rightClick:function(e,t,i,a){this.currentRow=t,"0"==t.MenuNo?this.isRoot=!1:this.isRoot=!0,"1"==t.NodeType?this.isRightClick=!0:this.isRightClick=!1,this.isShowMenu=!0,e.clientY+200>document.body.clientHeight?(this.$refs.rightClickLog.style.top=document.body.clientHeight-200+"px",this.$refs.rightClickLog.style.left=e.clientX+"px"):(this.$refs.rightClickLog.style.top=e.clientY+"px",this.$refs.rightClickLog.style.left=e.clientX+"px")},resetForm:function(){this.$refs.form.resetFields()},itemDel:function(){var e=this;this.loading=!0,console.log("1");var t=new d;t.data.MenuNo=this.currentRow.MenuNo,t.data.QueInterfaceID=this.form.paramId,Object(a.a)(t).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"交易删除成功!"}),e.queryDeal()}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage+"!"})})},delBut:function(){var e=this;this.isShowMenu=!1,0==this.currentRow.children.length?this.$aui.confirm.show("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.itemDel()}).catch(function(){}):this.$aui.message.show({type:"warning",message:"节点下有目录或业务!无法删除!"})},detailInfo:function(e){window.open(e)},queryDeal:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请选择查询数据！"}),!1;var i=e.form.paramId.split("_");e.isPermission=!!e.permission[i[0]],e.tradeTreeData=[],e.isHasData=!0,e.addTradeGroup=!1,e.rightTitle="维护",e.selection=[],e.isDisabledDel=!1,e.loading=!0;var s=new n;s.data.QueInterfaceID=e.form.paramId,Object(a.a)(s).then(function(t){e.isHasData=!1,e.loading=!1;var i=t.RspInfo.Result||[];i.forEach(function(t){"0"==t.NodeType&&e.$set(t,"icon","folder")}),i.push({MenuNo:"0",SupMenuNo:"",MenuName:"排队机"}),e.tradeTreeData=c.a.formatTreeData(i,"MenuNo","SupMenuNo")}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage})})})},handleSizeChange:function(){this.queryDeal()},handleCurrentChange:function(){this.queryDeal()}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[i("aui-card",[i("aui-form",{ref:"form",attrs:{model:e.form,rules:e.queryRules,size:"mini","label-width":"90px","label-position":"right"}},[i("aui-row",{attrs:{gutter:10}},[i("aui-col",{attrs:{lg:6,md:6}},[i("aui-form-item",{attrs:{label:"参数编号",prop:"paramId"}},[i("aui-select",{attrs:{filterable:"",placeholder:"请选择参数编号"},on:{change:e.queryDeal},model:{value:e.form.paramId,callback:function(t){e.$set(e.form,"paramId",t)},expression:"form.paramId"}},e._l(e.paramIdList,function(e){return i("aui-option",{key:e.RuleId,attrs:{label:e.RuleId+"-"+e.RuleName,value:e.RuleId,disabled:e.disabled}})}))],1)],1)],1)],1)],1),e._v(" "),i("aui-card",{staticStyle:{"margin-top":"10px"}},[i("aui-row",{attrs:{gutter:10}},[i("aui-col",{attrs:{span:8}},[i("aui-card",{staticClass:"itemHeight"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("交易树")]),e._v(" "),i("span",{staticClass:"treeTitle"},[e._v("右击数据进行操作")])]),e._v(" "),i("div",{staticStyle:{height:"500px",overflow:"auto"}},[i("aui-tree",{attrs:{data:e.tradeTreeData,"node-key":"MenuNo",props:{label:"MenuName",children:"children"},"default-expand-all":""},on:{"node-click":e.clickEvent,"node-contextmenu":e.rightClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return i("span",{},[s.icon?i("svg-icon",{attrs:{"icon-class":s.icon}}):e._e(),e._v(" "),i("span",[e._v(e._s(a.label))])],1)}}])})],1)])],1),e._v(" "),i("aui-col",{attrs:{span:16}},[i("aui-card",{staticClass:"itemHeight"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(e.rightTitle?e.rightTitle:"维护"))])]),e._v(" "),e.addTradeGroup?i("div",{staticStyle:{height:"500px",overflow:"auto"}},[i("aui-form",{ref:"menuGroupAdd",attrs:{model:e.menuGroupAdd,rules:e.rules,size:"mini","label-width":"110px","label-position":"right"}},[i("aui-row",{attrs:{gutter:10}},[e.isDetail?e._e():i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"上级节点名称:",prop:"ParentMenuName"}},[i("aui-input",{attrs:{disabled:"",placeholder:"请输入上级节点名称"},model:{value:e.menuGroupAdd.ParentMenuName,callback:function(t){e.$set(e.menuGroupAdd,"ParentMenuName",t)},expression:"menuGroupAdd.ParentMenuName"}})],1)],1),e._v(" "),e.isDetail?i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"节点编号:",prop:"MenuNum"}},[i("aui-input",{attrs:{disabled:"",placeholder:"请输入节点编号"},model:{value:e.menuGroupAdd.MenuNum,callback:function(t){e.$set(e.menuGroupAdd,"MenuNum",t)},expression:"menuGroupAdd.MenuNum"}})],1)],1):e._e()],1),e._v(" "),e.isShowGroup?i("aui-row",{attrs:{gutter:10}},[i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"目录名称:",prop:"listName"}},[i("aui-input",{attrs:{disabled:e.isDetail,placeholder:"请输入菜单项标题"},model:{value:e.menuGroupAdd.listName,callback:function(t){e.$set(e.menuGroupAdd,"listName",t)},expression:"menuGroupAdd.listName"}})],1)],1),e._v(" "),i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"目录英文名称:",prop:"listEnglishName"}},[i("aui-input",{attrs:{disabled:e.isDetail,placeholder:"请输入英文名称"},model:{value:e.menuGroupAdd.listEnglishName,callback:function(t){e.$set(e.menuGroupAdd,"listEnglishName",t)},expression:"menuGroupAdd.listEnglishName"}})],1)],1)],1):e._e(),e._v(" "),e.isShowTrade?i("aui-row",{attrs:{gutter:10}},[i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"业务分配:",prop:"serviceDistb"}},[i("aui-select",{attrs:{disabled:e.isDetail,placeholder:"请选择业务分配"},on:{change:e.serviceTypeLoad},model:{value:e.menuGroupAdd.serviceDistb,callback:function(t){e.$set(e.menuGroupAdd,"serviceDistb",t)},expression:"menuGroupAdd.serviceDistb"}},e._l(e.serviceDistbList,function(e){return i("aui-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}))],1)],1),e._v(" "),i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"业务类型:",prop:"serviceType"}},[i("aui-select",{attrs:{disabled:e.isDetail,placeholder:"请选择业务类型"},model:{value:e.menuGroupAdd.serviceType,callback:function(t){e.$set(e.menuGroupAdd,"serviceType",t)},expression:"menuGroupAdd.serviceType"}},e._l(e.serviceTypeList,function(e){return i("aui-option",{key:e.BsID,attrs:{label:e.BsName,value:e.BsID,disabled:e.disabled}})}))],1)],1),e._v(" "),i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"业务英文名称:",prop:"listEnglishName"}},[i("aui-input",{attrs:{disabled:e.isDetail,placeholder:"请输入英文名称"},model:{value:e.menuGroupAdd.listEnglishName,callback:function(t){e.$set(e.menuGroupAdd,"listEnglishName",t)},expression:"menuGroupAdd.listEnglishName"}})],1)],1),e._v(" "),i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"提示信息:",prop:"prompts"}},[i("aui-input",{attrs:{disabled:e.isDetail,placeholder:"请输入提示信息"},model:{value:e.menuGroupAdd.prompts,callback:function(t){e.$set(e.menuGroupAdd,"prompts",t)},expression:"menuGroupAdd.prompts"}})],1)],1),e._v(" "),i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"配置:",prop:"isCard"}},[i("aui-checkbox",{attrs:{disabled:e.isDetail},model:{value:e.menuGroupAdd.isCard,callback:function(t){e.$set(e.menuGroupAdd,"isCard",t)},expression:"menuGroupAdd.isCard"}},[e._v("必须刷卡")])],1)],1)],1):e._e(),e._v(" "),i("aui-row",[i("aui-col",{attrs:{span:12}},[i("aui-form-item",{attrs:{label:"图片名称:",prop:"pictureName"}},[i("aui-select",{attrs:{disabled:e.isDetail,placeholder:"请选择图片"},model:{value:e.menuGroupAdd.pictureName,callback:function(t){e.$set(e.menuGroupAdd,"pictureName",t)},expression:"menuGroupAdd.pictureName"}},e._l(e.pictureNameList,function(e){return i("aui-option",{key:e.DataKeyVal,attrs:{label:e.Meaning,value:e.DataKeyVal,disabled:e.disabled}})}))],1)],1)],1)],1),e._v(" "),i("aui-row",{staticStyle:{margin:"20px 0","text-align":"center"}},[i("aui-button",{attrs:{size:"mini"},on:{click:e.returnMes}},[e._v("返回")]),e._v(" "),e.isDetail?e._e():i("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确定")])],1)],1):e._e()])],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"},{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"rightClickLog",staticClass:"rightStyle"},[i("ul",{staticClass:"rightClickParent"},[e.isPermission?i("li",{staticClass:"rightClickChildren",attrs:{disabled:e.isRightClick},on:{click:function(t){e.addTradGroup("新增目录","1")}}},[i("aui-button",{attrs:{size:"mini",type:"text",disabled:e.isRightClick},on:{click:function(t){e.addTradGroup("新增目录","1")}}},[e._v("添加目录")])],1):e._e(),e._v(" "),e.isPermission?i("li",{staticClass:"rightClickChildren"},[i("aui-button",{attrs:{size:"mini",type:"text",disabled:e.isRightClick},on:{click:function(t){e.addTradGroup("新增业务","2")}}},[e._v("添加业务")])],1):e._e(),e._v(" "),e.isRoot?i("li",{staticClass:"rightClickChildren"},[i("aui-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addTradGroup("详细信息","3")}}},[e._v("详细信息")])],1):e._e(),e._v(" "),e.isRoot&&e.isPermission?i("li",{staticClass:"rightClickChildren"},[i("aui-button",{attrs:{size:"mini",type:"text"},on:{click:e.delBut}},[e._v("删除")])],1):e._e()])])],1)},staticRenderFns:[]};var v=i("/Xao")(g,f,!1,function(e){i("m26I")},"data-v-0d72bea2",null);t.default=v.exports},m26I:function(e,t,i){var a=i("FJ3T");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("655ffd5c",a,!0)}});