webpackJsonp([89],{UsNJ:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},ijvX:function(e,a,t){var r=t("UsNJ");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("8bSs")("34b5d531",r,!0)},y8PR:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("tzsN"),o=t("0oES"),i=t("syAl"),l=t("AA3o"),s=t.n(l),n=function e(){s()(this,e),this.data={},this.CommCode="PLQryUseESeal",this.SceneCode="QrySeqOfUseESeal",this.TransServiceCode="mg-afaservices-paperless/serialNumberQuery"},u=t("0VOF"),c=t("ZE0V"),m=(t("B+2e"),t("pADA")),d=t("Arvp"),p={name:"serial-number-query",components:{selectTree:r.a},data:function(){return{loading:!1,tableData:[],tableTotal:0,currentPage:1,totalRcrdNum:0,pageSize:0,brnoList:[],sealNameList:[],voutypelist:[],QueryForm:{branchNum:[],sealModelId:"",VOUTYPE:"",businessName:"",useDate:m.a.getDateTime("date"),verificationCode:"",sealByHand:"",operator:"",authorizer:""},rules:{useDate:[{required:!0,message:"请选择用印日期",trigger:"change"}]},handlist:[{value:"D",label:"否"},{value:"S",label:"是"}]}},watch:{QueryForm:{handler:function(e,a){this.currentPage=1},deep:!0}},created:function(){this.pageSize=i.a.get("PageSize"),this.queryBranchNum(),this.NoticPrty(),this.querySealMode()},methods:{queryBranchNum:function(){var e=this;this.loading=!0;var a=new u.a;a.data.orgno=this.$store.getters.BranchNum,Object(o.a)(a).then(function(a){e.loading=!1,e.branchNum=a.RspInfo.Result||[],e.brnoMap=a.RspInfo.orgMap||{},e.permission=m.a.objArray2Hash(e.branchNum,"orgno"),e.brnoList=m.a.formatTreeData(e.branchNum,"orgno","superno"),e.QueryForm.branchNum.push(e.brnoList[0].orgno)}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},NoticPrty:function(){var e=this;this.loading=!0;var a=new d.a;Object(o.a)(a).then(function(a){console.log("--asdsad--",a.RspInfo.Result),e.loading=!1,e.voutypelist=a.RspInfo.Result||[]}).catch(function(a){e.loading=!1,console.log(a)})},querySealMode:function(){var e=this;this.loading=!0;var a=new c.a;a.data.STATUS="1",Object(o.a)(a).then(function(a){e.loading=!1,e.sealNameList=a.RspInfo.Result||[]}).catch(function(a){e.loading=!1,console.log(a)})},dataFormat:function(e,a){if("OPRBRANCH"==a.property)return e[a.property]+"-"+this.brnoMap[e[a.property]];if("SEALMODELID"==a.property)for(var t=0;t<this.sealNameList.length;t++)if(e[a.property]==this.sealNameList[t].SEALMODELID)return e[a.property]+"-"+this.sealNameList[t].SEALMODELDESC;if("REMARK2"==a.property)for(var r=0;r<this.voutypelist.length;r++)if(e[a.property]==this.voutypelist[r].VOUCH_TYP_CD)return e[a.property]+"-"+this.voutypelist[r].VOUCH_TYP_NM},resetForm:function(e){this.$refs[""+e].resetFields(),this.queryModel()},changePage:function(e){this.currentPage=e,this.queryModel()},queryModel:function(){var e=this;this.$refs.QueryForm.validate(function(a){if(a){e.loading=!0;var t=new n;t.data.OPERTYPE="1",t.data.QUERYOPTION="CUR",t.data.STARTDATE=e.QueryForm.useDate,t.data.ENDDATE=e.QueryForm.useDate,t.data.OPRBRANCH=e.QueryForm.branchNum[0],t.data.OPRTELLER=e.QueryForm.operator,t.data.REMARK1=e.QueryForm.authorizer,t.data.REMARK2=e.QueryForm.VOUTYPE,t.data.SEALMODELID=e.QueryForm.sealModelId,t.data.VERIFICATIONCODE=e.QueryForm.verificationCode,t.data.SEAL_MODE_CD=e.QueryForm.sealByHand,t.data.pageflag=4,t.data.pagerownum=e.pageSize,t.data.currpage=e.currentPage,Object(o.a)(t).then(function(a){console.log("===",a),e.loading=!1;a.RspInfo.struct;e.tableData=a.RspInfo.struct||[],e.totalRcrdNum=a.RspInfo.TotalNum||0,0==e.totalRcrdNum&&(e.tableData=[],e.$aui.message.show({type:"warning",message:"没有满足条件得记录!"}))}).catch(function(a){e.loading=!1,e.tableData=[],e.totalRcrdNum=0,e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+a.SYS_HEAD.ReturnCode+"，错误信息："+a.SYS_HEAD.ReturnMessage}),console.log(a)})}})},handleSizeChange:function(e){this.pageSize=e,this.queryModel()},handleCurrentChange:function(e){this.currentPage=e,this.queryModel()}}},h={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-card",[t("aui-form",{ref:"QueryForm",attrs:{rules:e.rules,model:e.QueryForm,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{label:"机构号",prop:"branchNum"}},[t("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.brnoList,placeholder:"请选择机构"},model:{value:e.QueryForm.branchNum,callback:function(a){e.$set(e.QueryForm,"branchNum",a)},expression:"QueryForm.branchNum"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"sealModelId",label:"印章名称"}},[t("aui-select",{attrs:{filterable:""},model:{value:e.QueryForm.sealModelId,callback:function(a){e.$set(e.QueryForm,"sealModelId",a)},expression:"QueryForm.sealModelId"}},e._l(e.sealNameList,function(e){return t("aui-option",{key:e.SEALMODELID,attrs:{label:e.SEALMODELID+"-"+e.SEALMODELDESC,value:e.SEALMODELID}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{label:"凭证种类",prop:"VOUTYPE"}},[t("aui-select",{attrs:{filterable:"","aria-placeholder":"请选择凭证种类"},model:{value:e.QueryForm.VOUTYPE,callback:function(a){e.$set(e.QueryForm,"VOUTYPE",a)},expression:"QueryForm.VOUTYPE"}},e._l(e.voutypelist,function(e){return t("aui-option",{key:e.VOUCH_TYP_CD,attrs:{label:e.VOUCH_TYP_CD+"-"+e.VOUCH_TYP_NM,value:e.VOUCH_TYP_CD}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"businessName",label:"交易名称"}},[t("aui-input",{attrs:{placeholder:"请输入交易名称"},model:{value:e.QueryForm.businessName,callback:function(a){e.$set(e.QueryForm,"businessName",a)},expression:"QueryForm.businessName"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"useDate",label:"用印日期"}},[t("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:e.QueryForm.useDate,callback:function(a){e.$set(e.QueryForm,"useDate",a)},expression:"QueryForm.useDate"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"verificationCode",label:"印章验证码"}},[t("aui-input",{model:{value:e.QueryForm.verificationCode,callback:function(a){e.$set(e.QueryForm,"verificationCode",a)},expression:"QueryForm.verificationCode"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{label:"是否手动用印",prop:"sealByHand"}},[t("aui-select",{attrs:{filterable:"","aria-placeholder":"是否手动用印"},model:{value:e.QueryForm.sealByHand,callback:function(a){e.$set(e.QueryForm,"sealByHand",a)},expression:"QueryForm.sealByHand"}},e._l(e.handlist,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"operator",label:"操作员"}},[t("aui-input",{attrs:{placeholder:"请输入操作员"},model:{value:e.QueryForm.operator,callback:function(a){e.$set(e.QueryForm,"operator",a)},expression:"QueryForm.operator"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:6,md:12}},[t("aui-form-item",{attrs:{prop:"authorizer",label:"授权员"}},[t("aui-input",{attrs:{placeholder:"请输入授权员"},model:{value:e.QueryForm.authorizer,callback:function(a){e.$set(e.QueryForm,"authorizer",a)},expression:"QueryForm.authorizer"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:10}},[t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.queryModel}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:function(a){e.resetForm("QueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{staticStyle:{"margin-top":"10px"}},[t("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{prop:"OPRBRANCH",formatter:e.dataFormat,label:"机构号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"SEALMODELID",formatter:e.dataFormat,label:"印章名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"REMARK2",formatter:e.dataFormat,label:"凭证种类"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"OPRDATE",label:"用印日期"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"VERIFICATIONCODE",label:"印章验证码"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"OPRTELLER",label:"操作员"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"REMARK1",label:"授权员"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"ACCNAME",label:"账户名称"}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:this.tableData,expression:"this.tableData"}],staticStyle:{"text-align":"right","margin-top":"20px"}},[t("aui-pagination",{attrs:{"current-page":e.currentPage,background:"","page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalRcrdNum},on:{"current-change":e.changePage}})],1)],1)],1)])},staticRenderFns:[]};var y=t("/Xao")(p,h,!1,function(e){t("ijvX")},"data-v-e4c2dabc",null);a.default=y.exports}});