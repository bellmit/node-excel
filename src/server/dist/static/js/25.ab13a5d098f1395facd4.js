webpackJsonp([25],{"/aOn":function(e,t,a){var i=a("6gNP");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("1c8fc3d0",i,!0)},"4/0s":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},"6gNP":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},DG4C:function(e,t,a){var i=a("y66L");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("6c9e1ce2",i,!0)},RTjC:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},pktR:function(e,t,a){var i=a("RTjC");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("289651f1",i,!0)},tk5P:function(e,t,a){var i=a("4/0s");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("593c63a2",i,!0)},y66L:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.cardStyle[data-v-4230fbd9] {\n  margin: 5px 0;\n}\n.listEdit[data-v-4230fbd9] {\n  text-align: right;\n}\n.listEdit a[data-v-4230fbd9] {\n    margin: 5px;\n}\n.demo-table-expand .aui-form-item[data-v-4230fbd9] {\n  margin-bottom: 5px;\n}\n.editClass input.el-input__inner[data-v-4230fbd9] {\n  border: none;\n  background: rgba(0, 0, 0, 0) !important;\n}\n.fade-enter-active[data-v-4230fbd9],\n.fade-leave-active[data-v-4230fbd9] {\n  -webkit-transition: opacity 0.6s;\n  transition: opacity 0.6s;\n}\n.fade-enter[data-v-4230fbd9],\n.fade-leave-to[data-v-4230fbd9] {\n  opacity: 0;\n}\n.heightlight[data-v-4230fbd9] {\n  -webkit-box-shadow: 0 2px 12px 0 rgba(177, 208, 244, 0.6);\n          box-shadow: 0 2px 12px 0 rgba(177, 208, 244, 0.6);\n}\n",""])},ytxt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),s=a.n(i),r=a("0oES"),d=a("AA3o"),n=a.n(d),o=function e(){n()(this,e),this.data={DeviceModel:"",DeviceNum:"",InstallAddr:"",IpAddr:"",AscrBranch:"",UserNum:"",UserName:"",UserCellNum:"",StartTime:"",ShutTime:"",EffeDate:"",ExpiDate:"",StartBusiHours:"",EndBusiHours:"",RadiusEncl:"",VideoIp:"",DeviceDesc:"",MainBranch:"",MainUser:"",MainDate:"",MainTime:"",LeadingStateDevice:"1"},this.CommCode="IBDeviceManagement",this.SceneCode="DevUseInfoCreate",this.TransServiceCode="mg-afaservices-dev/devUseInfoCreate"},l=function e(){n()(this,e),this.data={DeviceModel:"",DeviceNum:"",InstallAddr:"",IpAddr:"",AscrBranch:"",UserNum:"",UserName:"",UserCellNum:"",StartTime:"",ShutTime:"",EffeDate:"",ExpiDate:"",StartBusiHours:"",EndBusiHours:"",RadiusEncl:"",VideoIp:"",DeviceDesc:"",MainBranch:"",MainUser:"",MainDate:"",MainTime:"",LeadingStateDevice:"1"},this.CommCode="IBDeviceManagement",this.SceneCode="DevUseInfoUpdate",this.TransServiceCode="mg-afaservices-dev/devUseInfoUpdate"},u=function e(){n()(this,e),this.data={AscrBranch:"",UserNum:""},this.CommCode="IBDeviceManagement",this.SceneCode="DevUserCheck",this.TransServiceCode="mg-afaservices-dev/devUserCheck"},c={props:{devUseData:Object},data:function(){var e=function(e,t,a){if(""!=t){/^[1][3,4,5,7,8][0-9]{9}$/.test(t)?a():a(new Error("请输入正确的手机号"))}else a()};return{loading:!1,isMod:!1,devUseAdd:{usernum:"",username:"",devicemodel:"",devicenum:"",ascrbranch:"",ipaddr:"",videoip:"",usercellnum:""},title:"",rules:{usernum:[{required:!0,message:"请输入用户编号",trigger:"blur"}],username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],ipaddr:[{required:!0,message:"请输入设备IP地址",trigger:"blur"}],BrandPhone:[{required:!0,message:"请输入品牌联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],effedate:[{required:!0,message:"请输入领用生效日期",trigger:"blur"}],expidate:[{required:!0,message:"请输入领用失效日期",trigger:"blur"}],BrandContactsTelephone:[{required:!0,message:"请输入品牌联系人电话",trigger:"blur"},{validator:e,trigger:"blur"}],usercellnum:[{message:"手机号长度少于20个字符",max:20,trigger:"blur"},{require:!1,validator:e,trigger:"blur"}]}}},computed:{isShow:{get:function(){return this.devUseData.isShow},set:function(e){this.devUseData.isShow=e}}},methods:{openDevUse:function(){var e=this;this.$nextTick(function(){e.devUseAdd=s()({},e.devUseData.currentRow),e.devUseData.isEdit?(e.title="领用设备信息修改",e.isMod=!0):callback(new Error("请输入11位正确的联系电话"))})},userLoad:function(){var e=this;if(""!=this.devUseAdd.usernum){var t=new u;t.data.AscrBranch=this.devUseAdd.ascrbranch,t.data.UserNum=this.devUseAdd.usernum,Object(r.a)(t).then(function(t){e.$set(e.devUseAdd,"username",t.RspInfo.name)}).catch(function(t){e.$aui.message.show({type:"warning",message:"机构下无该用户"}),e.$set(e.devUseAdd,"usernum",""),e.$set(e.devUseAdd,"username",""),console.error("查询错误",t)})}},closeBrand:function(){this.$refs.devUseAdd.clearValidate(),this.$refs.devUseAdd.resetFields()},brandAdd:function(){var e=this;this.$refs.devUseAdd.validate(function(t){if(!t)return e.$aui.message.show({type:"warning",message:"请输入合法的数据！"}),!1;e.loading=!0;var a=void 0;(a=e.devUseData.isEdit?new l:new o).data.DeviceModel=e.devUseAdd.devicemodel,a.data.DeviceNum=e.devUseAdd.devicenum,a.data.InstallAddr=e.devUseAdd.installaddr,a.data.IpAddr=e.devUseAdd.ipaddr,a.data.AscrBranch=e.devUseAdd.ascrbranch,a.data.UserNum=e.devUseAdd.usernum,a.data.UserName=e.devUseAdd.username,a.data.UserCellNum=e.devUseAdd.usercellnum,a.data.StartTime=e.devUseAdd.starttime,a.data.ShutTime=e.devUseAdd.shuttime,a.data.EffeDate=e.devUseAdd.effedate,a.data.ExpiDate=e.devUseAdd.expidate,a.data.StartBusiHours=e.devUseAdd.startbusihours,a.data.EndBusiHours=e.devUseAdd.endbusihours,a.data.RadiusEncl=e.devUseAdd.radiusencl,a.data.VideoIp=e.devUseAdd.videoip,a.data.DeviceDesc=e.devUseAdd.devicedesc,Object(r.a)(a).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"设备领用成功!"}),e.isShow=!1,e.$emit("refreshBrand")}).catch(function(t){e.loading=!1,e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),console.log(t)})})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{visible:e.isShow,title:e.title,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeBrand,show:e.openDevUse}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"devUseAdd",attrs:{model:e.devUseAdd,size:"mini",rules:e.rules,"label-position":"right","label-width":"130px"}},[a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备型号:",prop:"devicemodel"}},[a("aui-input",{attrs:{disabled:!0,placeholder:"请输入可领入设备型号"},model:{value:e.devUseAdd.devicemodel,callback:function(t){e.$set(e.devUseAdd,"devicemodel",t)},expression:"devUseAdd.devicemodel"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备编号:",prop:"devicenum"}},[a("aui-input",{attrs:{disabled:!0,placeholder:"请输入设备编号"},model:{value:e.devUseAdd.devicenum,callback:function(t){e.$set(e.devUseAdd,"devicenum",t)},expression:"devUseAdd.devicenum"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备所属机构号:",prop:"ascrbranch"}},[a("aui-input",{attrs:{disabled:!0,placeholder:"请输入设备所属机构号"},model:{value:e.devUseAdd.ascrbranch,callback:function(t){e.$set(e.devUseAdd,"ascrbranch",t)},expression:"devUseAdd.ascrbranch"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备描述:",prop:"devicedesc"}},[a("aui-input",{attrs:{placeholder:"请输入品牌地址"},model:{value:e.devUseAdd.devicedesc,callback:function(t){e.$set(e.devUseAdd,"devicedesc",t)},expression:"devUseAdd.devicedesc"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备IP地址:",prop:"ipaddr"}},[a("aui-input",{attrs:{placeholder:"请输入设备IP地址"},model:{value:e.devUseAdd.ipaddr,callback:function(t){e.$set(e.devUseAdd,"ipaddr",t)},expression:"devUseAdd.ipaddr"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"视频IP:",prop:"videoip"}},[a("aui-input",{attrs:{placeholder:"请输入视频IP"},model:{value:e.devUseAdd.videoip,callback:function(t){e.$set(e.devUseAdd,"videoip",t)},expression:"devUseAdd.videoip"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户编号:",prop:"usernum"}},[a("aui-input",{attrs:{disabled:e.isMod,placeholder:"请输入领用用户编号"},on:{blur:e.userLoad},model:{value:e.devUseAdd.usernum,callback:function(t){e.$set(e.devUseAdd,"usernum",t)},expression:"devUseAdd.usernum"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户手机号:",prop:"usercellnum"}},[a("aui-input",{attrs:{placeholder:"请输入领用用户手机号"},model:{value:e.devUseAdd.usercellnum,callback:function(t){e.$set(e.devUseAdd,"usercellnum",t)},expression:"devUseAdd.usercellnum"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户名称:",prop:"username"}},[a("aui-input",{attrs:{disabled:!0,placeholder:"请输入领用用户名称"},model:{value:e.devUseAdd.username,callback:function(t){e.$set(e.devUseAdd,"username",t)},expression:"devUseAdd.username"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备开始营业时间:",prop:"startbusihours"}},[a("aui-time-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"HHmmss"},model:{value:e.devUseAdd.startbusihours,callback:function(t){e.$set(e.devUseAdd,"startbusihours",t)},expression:"devUseAdd.startbusihours"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备结束营业时间:",prop:"endbusihours"}},[a("aui-time-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"HHmmss"},model:{value:e.devUseAdd.endbusihours,callback:function(t){e.$set(e.devUseAdd,"endbusihours",t)},expression:"devUseAdd.endbusihours"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备开机时间:",prop:"starttime"}},[a("aui-time-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"HHmmss"},model:{value:e.devUseAdd.starttime,callback:function(t){e.$set(e.devUseAdd,"starttime",t)},expression:"devUseAdd.starttime"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备关机时间:",prop:"shuttime"}},[a("aui-time-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"HHmmss"},model:{value:e.devUseAdd.shuttime,callback:function(t){e.$set(e.devUseAdd,"shuttime",t)},expression:"devUseAdd.shuttime"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备领用生效日期:",prop:"effedate"}},[a("aui-date-picker",{attrs:{type:"date","value-format":"yyyyMMddHHmmss",placeholder:"选择日期"},model:{value:e.devUseAdd.effedate,callback:function(t){e.$set(e.devUseAdd,"effedate",t)},expression:"devUseAdd.effedate"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备领用失效日期:",prop:"expidate"}},[a("aui-date-picker",{attrs:{type:"date","value-format":"yyyyMMddHHmmss",placeholder:"选择日期"},model:{value:e.devUseAdd.expidate,callback:function(t){e.$set(e.devUseAdd,"expidate",t)},expression:"devUseAdd.expidate"}})],1)],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"围栏半径/m:",prop:"radiusencl"}},[a("aui-input",{attrs:{name:"radiusencl",placeholder:"请输入围栏半径/m"},model:{value:e.devUseAdd.radiusencl,callback:function(t){e.$set(e.devUseAdd,"radiusencl",t)},expression:"devUseAdd.radiusencl"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"安装地址:",prop:"installaddr"}},[a("aui-input",{attrs:{name:"installaddr",placeholder:"请输入安装地址"},model:{value:e.devUseAdd.installaddr,callback:function(t){e.$set(e.devUseAdd,"installaddr",t)},expression:"devUseAdd.installaddr"}})],1)],1)],1)],1)],1),e._v(" "),a("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[a("aui-button",{attrs:{size:"mini"},on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.brandAdd}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var m=a("/Xao")(c,v,!1,function(e){a("/aOn")},"data-v-c1038eca",null).exports,p={props:{detailInfoData:Object},data:function(){return{loading:!1,devUseDetail:{}}},computed:{isShow:{get:function(){return this.detailInfoData.isShow},set:function(e){this.detailInfoData.isShow=e}}},methods:{openBrand:function(){this.devUseDetail=this.detailInfoData.currentRow},closeBrand:function(){this.devUseDetail={}}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{visible:e.isShow,title:"领用设备详细信息",width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeBrand,show:e.openBrand}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"devUseDetail",attrs:{model:e.devUseDetail,size:"mini","label-position":"right","label-width":"130px"}},[a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备型号:",prop:"devicemodel"}},[a("span",[e._v(e._s(e.devUseDetail.devicemodel))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备编号:",prop:"devicenum"}},[a("span",[e._v(e._s(e.devUseDetail.devicenum))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备所属机构号:",prop:"ascrbranch"}},[a("span",[e._v(e._s(e.devUseDetail.ascrbranch))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备描述:",prop:"devicedesc"}},[a("span",[e._v(e._s(e.devUseDetail.devicedesc))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备IP地址:",prop:"ipaddr"}},[a("span",[e._v(e._s(e.devUseDetail.ipaddr))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"视频IP:",prop:"videoip"}},[a("span",[e._v(e._s(e.devUseDetail.videoip))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户编号:",prop:"usernum"}},[a("span",[e._v(e._s(e.devUseDetail.usernum))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户手机号:",prop:"usercellnum"}},[a("span",[e._v(e._s(e.devUseDetail.usercellnum))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"领用用户名称:",prop:"username"}},[a("span",[e._v(e._s(e.devUseDetail.username))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备开始营业时间:",prop:"startbusihours"}},[a("span",[e._v(e._s(e.devUseDetail.startbusihours))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备结束营业时间:",prop:"endbusihours"}},[a("span",[e._v(e._s(e.devUseDetail.endbusihours))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备开机时间:",prop:"starttime"}},[a("span",[e._v(e._s(e.devUseDetail.starttime))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备关机时间:",prop:"shuttime"}},[a("span",[e._v(e._s(e.devUseDetail.shuttime))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备领用生效日期:",prop:"effedate"}},[a("span",[e._v(e._s(e.toolBox.timeFormat2Date(e.devUseDetail.effedate)))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备领用失效日期:",prop:"expidate"}},[a("span",[e._v(e._s(e.toolBox.timeFormat2Date(e.devUseDetail.expidate)))])])],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"围栏半径/m:",prop:"radiusencl"}},[a("span",[e._v(e._s(e.devUseDetail.radiusencl))])])],1)],1),e._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"安装地址:",prop:"installaddr"}},[a("span",[e._v(e._s(e.devUseDetail.installaddr))])])],1)],1)],1)],1),e._v(" "),a("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[a("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isShow=!1}}},[e._v("关 闭")])],1)],1)])],1)},staticRenderFns:[]};var g=a("/Xao")(p,h,!1,function(e){a("tk5P")},"data-v-10768528",null).exports,f=function e(){n()(this,e),this.data={DeviceModel:"",DeviceNum:"",LeadingStateDevice:"",DeviceRetuUser:"",DateReturnDevice:"",DeviceReturnTime:""},this.CommCode="IBDeviceManagement",this.SceneCode="EquiReturn",this.TransServiceCode="mg-afaservices-dev/equiReturn"},b={props:{returnDevData:Object},data:function(){return{loading:!1,returnDevForm:{devicemodel:"",devicenum:""}}},computed:{isShow:{get:function(){return this.returnDevData.isShow},set:function(e){this.returnDevData.isShow=e}}},created:function(){},methods:{openForm:function(){this.returnDevForm.devicemodel=this.returnDevData.currentRow.devicemodel,this.returnDevForm.devicenum=this.returnDevData.currentRow.devicenum},closeBrand:function(){this.returnDevForm.devicemodel="",this.returnDevForm.devicenum=""},returnDev:function(){var e=this;this.loading=!0;var t=new f;t.data.DeviceModel=this.returnDevData.currentRow.devicemodel,t.data.DeviceNum=this.returnDevData.currentRow.devicenum,Object(r.a)(t).then(function(t){e.loading=!1,e.$aui.message.show({type:"success",message:"归还成功!"}),e.isShow=!1,e.$emit("refreshBrand")}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),e.loading=!1,console.log(t)})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("aui-dialog",{attrs:{visible:e.isShow,title:"确认归还此设备？",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeBrand,show:e.openForm}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{attrs:{model:e.returnDevForm,size:"mini","label-position":"right","label-width":"80px"}},[a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备型号:",prop:"devicemodel"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.returnDevForm.devicemodel,callback:function(t){e.$set(e.returnDevForm,"devicemodel",t)},expression:"returnDevForm.devicemodel"}})],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"设备编号:",prop:"devicenum"}},[a("aui-input",{attrs:{disabled:!0},model:{value:e.returnDevForm.devicenum,callback:function(t){e.$set(e.returnDevForm,"devicenum",t)},expression:"returnDevForm.devicenum"}})],1)],1)],1)],1)],1),e._v(" "),a("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[a("aui-button",{attrs:{size:"mini"},on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),e._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.returnDev}},[e._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var D=a("/Xao")(b,U,!1,function(e){a("pktR")},"data-v-65fe4b60",null).exports,w=a("pADA"),_=a("tzsN"),A=a("syAl"),y=function e(){n()(this,e),this.data={DeviceModel:"",DeviceNum:"",AscrBranch:"",UserNum:"",length:"",start:"",draw:""},this.CommCode="IBDeviceManagement",this.SceneCode="DevUseInfoQuery",this.TransServiceCode="mg-afaservices-dev/devUseInfoQuery"},x=function e(){n()(this,e),this.data={DeviceModel:"",DeviceNum:"",AscrBranch:"",UserNum:"",length:"",start:"",draw:""},this.CommCode="IBDeviceManagement",this.SceneCode="DevNoTuseQry",this.TransServiceCode="mg-afaservices-dev/devNoTuseQry"},S=a("0VOF"),k=a("zdBp"),M={components:{selectTree:_.a},data:function(){return{brnoList:[],totalRcrdNum:0,devstatus:{1:"已领用",9:"未领用"},useState:[{value:"0",label:"已领用"},{value:"1",label:"未领用"}],dialogList:{devUseAdd:m,detailInfo:g,returnDev:D},dialogOptions:{isShow:!1,isEdit:!1,currentRow:[],isEnabled:!1},returnDevDialogOptions:{isShow:!1,currentRow:[]},detailDialogOptions:{isShow:!1,currentRow:[]},devUseMgrQueryForm:{DeviceModel:"",DeviceNum:"",AscrBranch:[],UserNum:"",useState:"1"},devModel:[],BrandInfoList:[],addBrand:{},loading:!1,currentPage:1,isEditClass:!0,isDisabled:!0,isShowBut:!1,isHeight:!1,isListItem:"",isAddBrand:!1,checkedUser:!1,currentRow:[]}},created:function(){this.branchList(),this.devModelInit(),this.devUseInfoQuery()},methods:{branchList:function(){var e=this;this.loading=!0;var t=new S.a;t.data.orgno=this.$store.getters.BranchNum,Object(r.a)(t).then(function(t){e.loading=!1,e.brnoList=t.RspInfo.Result||[],e.brnoMap=t.RspInfo.orgMap||{},e.brnoList=w.a.formatTreeData(e.brnoList,"orgno","superno")}).catch(function(t){e.loading=!1,console.error("查询错误",t)})},devModelInit:function(){var e=this,t=new k.a;Object(r.a)(t).then(function(t){e.devModel=t.RspInfo.pageList}).catch(function(e){console.error("查询错误",e)})},returnDevice:function(){this.currentRow.devicestate?this.$aui.message.show({type:"warning",message:"设备未领用"}):this.returnDevDialogOptions.isShow=!0},handleCurrentChangeTable:function(e){this.currentRow=e[0],this.returnDevDialogOptions.currentRow=s()({},this.currentRow),this.detailDialogOptions.currentRow=s()({},this.currentRow),this.dialogOptions.currentRow=s()({},this.currentRow),1==e.length?this.checkedUser=!0:(e.length,this.checkedUser=!1)},handleDevUseDialog:function(e){if("useAdd"===e){if(!this.currentRow.devicestate)return void this.$aui.message.show({type:"warning",message:"设备已领用"});this.dialogOptions.isShow=!0,this.dialogOptions.isEdit=!1}else{if(console.log(this.currentRow),this.currentRow.devicestate)return void this.$aui.message.show({type:"warning",message:"设备未领用"});this.dialogOptions.isShow=!0,this.dialogOptions.isEdit=!0}},formatter1:function(e,t){return e[t.property]?this.devstatus[e[t.property]]:"已领用"},detailOpen:function(){this.detailDialogOptions.isShow=!0},clearForm:function(e){this.$refs[""+e].resetFields()},changePage:function(e){this.currentPage=e,this.devUseInfoQuery(e,!0)},devUseInfoQuery:function(){var e=this;this.loading=!0,this.BrandInfoList=[];var t=void 0;(t="1"==this.devUseMgrQueryForm.useState?new x:new y).data.DeviceModel=this.devUseMgrQueryForm.DeviceModel,t.data.DeviceNum=this.devUseMgrQueryForm.DeviceNum,t.data.AscrBranch=this.devUseMgrQueryForm.AscrBranch[0],t.data.UserNum=this.devUseMgrQueryForm.UserNum,t.data.length=A.a.get("PageSize"),t.data.draw=this.currentPage,t.data.start=(this.currentPage-1)*A.a.get("PageSize"),t.data.DeviceState="9",Object(r.a)(t).then(function(t){e.loading=!1,e.BrandInfoList=t.RspInfo.pageList||[],e.totalRcrdNum=t.RspInfo.recordsTotal}).catch(function(t){e.loading=!1})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dev-brand-manage",attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",[a("aui-form",{ref:"devUseMgrQueryForm",attrs:{model:e.devUseMgrQueryForm,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"设备型号",prop:"DeviceModel"}},[a("aui-select",{attrs:{placeholder:"请选择设备型号"},model:{value:e.devUseMgrQueryForm.DeviceModel,callback:function(t){e.$set(e.devUseMgrQueryForm,"DeviceModel",t)},expression:"devUseMgrQueryForm.DeviceModel"}},e._l(e.devModel,function(e){return a("aui-option",{key:e.devicemodel,attrs:{label:e.devicemodel+"-"+e.devicetype,value:e.devicemodel,disabled:e.disabled}})}))],1)],1),e._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"设备编号",prop:"DeviceNum"}},[a("aui-input",{attrs:{placeholder:"请输入设备编号"},model:{value:e.devUseMgrQueryForm.DeviceNum,callback:function(t){e.$set(e.devUseMgrQueryForm,"DeviceNum",t)},expression:"devUseMgrQueryForm.DeviceNum"}})],1)],1),e._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"设备所属机构号",prop:"AscrBranch"}},[a("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.brnoList,placeholder:"请选择机构"},model:{value:e.devUseMgrQueryForm.AscrBranch,callback:function(t){e.$set(e.devUseMgrQueryForm,"AscrBranch",t)},expression:"devUseMgrQueryForm.AscrBranch"}})],1)],1),e._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"用户编号",prop:"UserNum"}},[a("aui-input",{attrs:{placeholder:"请输入用户编号"},model:{value:e.devUseMgrQueryForm.UserNum,callback:function(t){e.$set(e.devUseMgrQueryForm,"UserNum",t)},expression:"devUseMgrQueryForm.UserNum"}})],1)],1),e._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"领用状态",prop:"useState"}},[a("aui-select",{attrs:{placeholder:"请选择领用状态"},model:{value:e.devUseMgrQueryForm.useState,callback:function(t){e.$set(e.devUseMgrQueryForm,"useState",t)},expression:"devUseMgrQueryForm.useState"}},e._l(e.useState,function(e){return a("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.label,value:e.value}})}))],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.devUseInfoQuery}},[e._v("查询")])],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(t){e.clearForm("devUseMgrQueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",[a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_DevBrand_Add")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:!e.checkedUser},on:{click:function(t){e.handleDevUseDialog("useAdd")}}},[e._v("领用")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_DevBrand_Edit")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:!e.checkedUser},on:{click:function(t){e.handleDevUseDialog("useEdit")}}},[e._v("修改")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_DevBrand_Delete")?a("aui-button",{staticClass:"b-button",attrs:{type:"primary",size:"mini",icon:"aui-icon-delete",disabled:!e.checkedUser},on:{click:e.returnDevice}},[e._v("归还")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[e.btnPermission("Button_DevBrand_Delete")?a("aui-button",{staticClass:"b-button",attrs:{type:"primary",size:"mini",icon:"aui-icon-delete",disabled:!e.checkedUser},on:{click:function(t){e.detailOpen()}}},[e._v("详细查询")]):e._e()],1)],1),e._v(" "),a("aui-table",{ref:"dataTypeInfo",staticClass:"tableMarginTop",attrs:{data:e.BrandInfoList,border:"",width:"100%","header-row-class-name":"tableHeaderClass","highlight-current-row":""},on:{"selection-change":e.handleCurrentChangeTable}},[a("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"ascrbranch",label:"设备所属机构号",width:"120px",fixed:""}}),e._v(" "),a("aui-table-column",{attrs:{prop:"devicetype",label:"设备类型",width:"80px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"devicemodel",label:"设备型号",width:"120px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"devicenum",label:"设备编号",width:"100px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"usernum",label:"用户编号",width:"90px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"usercellnum",label:"领用用户手机号",width:"120px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"installaddr",label:"安装地址","min-width":"160px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"ipaddr",label:"IP地址",width:"120px"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"devicestate",formatter:e.formatter1,label:"设备状态",width:"80px"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[a("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalRcrdNum},on:{"current-change":e.changePage}})],1)],1),e._v(" "),a("keep-alive",[a(e.dialogList.devUseAdd,{tag:"component",attrs:{devUseData:e.dialogOptions},on:{refreshBrand:e.devUseInfoQuery}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.detailInfo,{tag:"component",attrs:{detailInfoData:e.detailDialogOptions},on:{refreshBrand:e.devUseInfoQuery}})],1),e._v(" "),a("keep-alive",[a(e.dialogList.returnDev,{tag:"component",attrs:{returnDevData:e.returnDevDialogOptions},on:{refreshBrand:e.devUseInfoQuery}})],1)],1)},staticRenderFns:[]};var I=a("/Xao")(M,B,!1,function(e){a("DG4C")},"data-v-4230fbd9",null);t.default=I.exports}});