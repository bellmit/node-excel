webpackJsonp([91],{Cvgv:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("lC5x"),o=t.n(r),n=t("J0Oq"),i=t.n(n),s=t("syAl"),l=t("tzsN"),u=t("0oES"),c=t("0VOF"),m=t("pADA"),d=t("A8CQ"),p={components:{selectTree:l.a},data:function(){return{loading:!1,brnoList:[],tableData:[],tableTotal:0,currentPage:1,pageSize:s.a.get("PageSize"),queryForm:{devId:"",sTime:"",eTime:"",selBrno:[]},rules:{sTime:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],eTime:[{required:!0,message:"结束日期不能为空",trigger:"blur"}]}}},mounted:function(){this.queryForm.sTime=m.a.getNowTime(29),this.queryForm.eTime=m.a.getNowTime(0),this.initBrno()},methods:{dateChange:function(){this.queryForm.sTime>this.queryForm.eTime&&(this.$aui.message.show({type:"warning",message:"开始日期不能大于结束日期"}),this.queryForm.sTime=m.a.getNowTime(29),this.queryForm.eTime=m.a.getNowTime(0))},initBrno:function(){var e=this;this.loading=!0;var a=new c.a;a.data.orgno=this.$store.getters.BranchNum,Object(u.a)(a).then(function(a){e.loading=!1,e.brnoList=a.RspInfo.Result||[],e.brnoMap=a.RspInfo.orgMap||{},e.brnoList=m.a.formatTreeData(e.brnoList,"orgno","superno"),e.queryForm.selBrno.push(e.brnoList[0].orgno)}).catch(function(a){e.loading=!1,console.error("错误信息",a)})},queryModel:function(){var e=this;return i()(o.a.mark(function a(){var t,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new appointmentForm).data.Brno=e.queryForm.branchId[0],t.data.StartDate=e.queryForm.sTime,t.data.EndDate=e.queryForm.eTime,t.data.CurtPage=e.currentPage+"",t.data.PageSize=e.pageSize+"",t.data.StartRows=(e.currentPage-1)*e.pageSize+"",a.next=10,Object(u.a)(t);case 10:r=a.sent;try{e.loading=!1,"000000"===r.SYS_HEAD.ReturnCode?(e.tableData=r.RspInfo.Result,e.tableTotal=r.RspInfo.totalNum):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage})}catch(a){e.loading=!1,console.error(a)}case 12:case"end":return a.stop()}},a,e)}))()},getExcel:function(){var e=this;return i()(o.a.mark(function a(){var t,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,(t=new d.a).data.branchNo=e.queryForm.branchId.join(","),t.data.startTime=e.queryForm.sTime,t.data.endTime=e.queryForm.eTime,a.next=7,Object(u.a)(t);case 7:r=a.sent,e.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?e.downloadFile(r.RSP_BODY.fileName):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 10:case"end":return a.stop()}},a,e)}))()}}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fault-statistics-of-equipment",attrs:{"element-loading-text":"加载中。。。"}},[t("div",[t("aui-card",{staticClass:"type-info-box-card"},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,size:"mini","label-position":"top",rules:e.rules}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"设备编号",prop:"devId"}},[t("aui-input",{attrs:{placeholder:"请输入设备编号"},model:{value:e.queryForm.devId,callback:function(a){e.$set(e.queryForm,"devId",a)},expression:"queryForm.devId"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"开始日期",prop:"sTime"}},[t("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.queryForm.sTime,callback:function(a){e.$set(e.queryForm,"sTime",a)},expression:"queryForm.sTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"结束日期",prop:"eTime"}},[t("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.queryForm.eTime,callback:function(a){e.$set(e.queryForm,"eTime",a)},expression:"queryForm.eTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:6}},[t("aui-form-item",{attrs:{label:"归属机构",prop:"selBrno"}},[t("select-tree",{staticStyle:{width:"170px"},attrs:{"single-check":!0,props:{id:"orgno",label:"cname",children:"children"},"tree-data":e.brnoList,placeholder:"请选择机构"},model:{value:e.queryForm.selBrno,callback:function(a){e.$set(e.queryForm,"selBrno",a)},expression:"queryForm.selBrno"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.queryModel}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[e.btnPermission("Button_RunRateRep_Export")?t("aui-button",{staticClass:"b-button",attrs:{type:"primary",size:"mini",icon:"aui-icon-download"},on:{click:e.getExcel}},[e._v("导出")]):e._e()],1)],1)],1)],1),e._v(" "),t("aui-card",{staticClass:"type-info-bottom"},[t("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{prop:"DeviceNum",label:"设备编号","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"AscrbranchName",label:"归属机构名称","min-width":"107px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"Ascrbranch",label:"归属机构号","min-width":"107px",fixed:""}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DepositModule",label:"存款模块"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"DrawModule",label:"取款模块"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CardFailure",label:"读卡器故障"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"KeyboardFailure",label:"键盘故障"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"PassbookFailure",label:"存折打印机故障"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"JournalPrinter",label:"流水打印机"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"ReceiptPrinter",label:"凭条打印机"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CommunicationFailure",label:"通信故障"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CashBoxFailure",label:"钱箱故障"}})],1),e._v(" "),t("div",{staticClass:"box"},[t("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.tableTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.currentPage=a}}})],1)],1)],1)])},staticRenderFns:[]};var b=t("/Xao")(p,g,!1,function(e){t("cHXS")},null,null);a.default=b.exports},cHXS:function(e,a,t){var r=t("jtwl");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("8bSs")("6c2a4093",r,!0)},jtwl:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.type-info-bottom {\n  margin-top: 10px;\n}\n.box {\n  margin-top: 20px;\n  text-align: right;\n}\n.headerClass {\n  background: #f7f7f7 !important;\n}\n.aui-date-editor.aui-input {\n  width: 100% !important;\n}\n.aui-card {\n  overflow: inherit;\n}\n",""])}});