webpackJsonp([28],{"08i0":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0oES"),o=a("pADA"),i=a("qfSh"),n=a("AA3o"),r=a.n(n),l=function t(){r()(this,t),this.data={BusiOper:"Q",AppNum:""},this.BusiDataKey="QueryMaxPostId",this.TransServiceCode="ib-dbcomm/dbComm"},p=function t(){r()(this,t),this.data={BusiOper:"Q",AppNum:"",PostNum:""},this.BusiDataKey="QueryMutualExclPost",this.TransServiceCode="ib-dbcomm/dbComm"},u=function t(){r()(this,t),this.data={OperType:"A",AppNum:"",PostNum:"",PostName:"",SortNum:"1",EffeDate:"",ExpiDate:"",LegalPersonNum:"",MutualExclPost:"",PostClass:"",PostStatus:"1"},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt"},d=a("fCv1"),c={data:function(){return{pickerEffeDate:d.b,loading:!1,appList:[],appStagingList:[],postSort:[{label:"01-非作业中心用户岗位",value:"01"},{label:"02-作业中心用户岗位",value:"02"}],mutualExclPostList:[],startTime:"",endTime:"",postInfoBaseAdd:{appNum:"",postNum:"",postName:"",postClass:"",mutualExclPost:"",legalPersonNum:"",legalPersonName:"",sortNum:""},postInfoRunAdd:{effeDate:"",expiDate:""},rulesBase:{appNum:[{required:!0,message:"请选择应用",trigger:"change"}],postNum:[{required:!0,message:"请输入岗位编号 ",trigger:"change"}],postName:[{required:!0,message:"请输入岗位名称 ",trigger:"blur"},{require:!0,validator:Object(d.h)(40),trigger:"blur"}],postClass:[{required:!0,message:"请选择岗位分类 ",trigger:"change"}]},rulesRun:{effeDate:[{required:!0,message:"请选择岗位生效日期",trigger:"blur"}],expiDate:[{required:!0,message:"请选择岗位失效日期",trigger:"blur"}]}}},methods:{dateChange:function(){this.postInfoRunAdd.expiDate&&this.postInfoRunAdd.effeDate&&this.postInfoRunAdd.effeDate>this.postInfoRunAdd.expiDate&&(this.$aui.message.show({type:"warning",message:"生效日期不能大于失效日期"}),this.postInfoRunAdd.effeDate="")},dateChange1:function(){this.postInfoRunAdd.expiDate&&this.postInfoRunAdd.effeDate&&this.postInfoRunAdd.effeDate>this.postInfoRunAdd.expiDate&&(this.$aui.message.show({type:"warning",message:"生效日期不能大于失效日期"}),this.postInfoRunAdd.expiDate="")},openDevInfo:function(){this.loading=!0,this.dataInit()},dataInit:function(){var t=this;this.postInfoBaseAdd.legalPersonNum=this.$store.getters.LegalPersonNum,this.postInfoBaseAdd.legalPersonName=this.$store.getters.LegalPersonName;var e=new i.a;e.data.UserNum=this.$store.getters.UserNum,Object(s.a)(e).then(function(e){t.appList=e.RspInfo.Result||[],t.loading=!1}).catch(function(e){t.loading=!1,console.error("查询错误",e)})},postNumLoad:function(){var t=this;this.loading=!0,this.postInfoBaseAdd.postNum="",this.postInfoBaseAdd.mutualExclPost=[];var e=new l;e.data.AppNum=this.postInfoBaseAdd.appNum,Object(s.a)(e).then(function(e){t.postInfoBaseAdd.postNum=e.RspInfo.Result[0].POSTNUM,t.load(e.RspInfo.Result[0].POSTNUM)}).catch(function(e){t.postInfoBaseAdd.postNum="001",t.load("001")})},load:function(t){var e=this;this.mutualExclPostList=[];var a=new p;a.data.AppNum=this.postInfoBaseAdd.appNum,a.data.PostNum=t,Object(s.a)(a).then(function(t){e.mutualExclPostList=t.RspInfo.Result||[],e.loading=!1}).catch(function(t){"CID001"==t.SYS_HEAD.ReturnCode&&(e.mutualExclPostList=t.RspInfo.Result||[]),e.loading=!1,console.error("查询错误",t)})},back:function(){this.option.active>=1&&this.active--},nextClick:function(){var t=this;0==this.option.active&&this.$refs.postInfoBaseAdd.validate(function(e){e&&(t.active++,t.$refs.postInfoBaseAdd.clearValidate())})},sure:function(){var t=this;this.$refs.postInfoRunAdd.validate(function(e){if(e){t.loading=!0;var a=new u;a.data.AppNum=t.postInfoBaseAdd.appNum,a.data.PostNum=t.postInfoBaseAdd.postNum,a.data.PostName=t.postInfoBaseAdd.postName,a.data.SortNum=t.postInfoBaseAdd.sortNum,a.data.EffeDate=t.postInfoRunAdd.effeDate,a.data.ExpiDate=t.postInfoRunAdd.expiDate,a.data.LegalPersonNum=t.postInfoBaseAdd.legalPersonNum,a.data.PostClass=t.postInfoBaseAdd.postClass,a.data.MutualExclPost=t.postInfoBaseAdd.mutualExclPost.join(","),Object(s.a)(a).then(function(e){t.loading=!1,t.$aui.message.show({type:"success",message:"创建成功!"}),t.isShow=!1,t.$refs.postInfoRunAdd.clearValidate(),t.$emit("refreshTable")}).catch(function(e){t.loading=!1,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage}),console.log(e)})}})},cChange:function(t){for(var e=0;e<this.appList.length;e++)t==this.appList[e].devAssortmentId&&(this.postInfoBaseAdd.cProcAdd=this.appList[e].devAssortmentCppInfo,this.postInfoBaseAdd.deviceAdd=this.appList[e].devAssortmentModuleInfo,this.postInfoBaseAdd.devTypeAdd1=this.appList[e].devType,this.postInfoBaseAdd.devModelAdd=this.appList[e].devModel,this.postInfoBaseAdd.devFactaryAdd=this.appList[e].brandName,this.postInfoBaseAdd.devBox=this.appList[e].devAssortmentBoxInfo)},clearForm:function(t){void 0!=this.$refs.postInfoBaseAdd&&(this.$refs.postInfoBaseAdd.clearValidate(),this.$refs.postInfoBaseAdd.resetFields()),void 0!=this.$refs.postInfoRunAdd&&(this.$refs.postInfoRunAdd.clearValidate(),this.$refs.postInfoRunAdd.resetFields())}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(t){this.option.isShow=t}},active:{get:function(){return this.option.active},set:function(t){this.option.active=t}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aui-dialog",{attrs:{title:"新增岗位信息",visible:t.isShow,width:"890px","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.isShow=e},show:t.openDevInfo,hide:function(e){t.clearForm("this.postInfoBaseAdd","postInfoRunAdd")}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("aui-step",{attrs:{"finish-status":"success",active:t.active,"align-center":""}},[a("aui-step-item",{attrs:{title:"岗位基本信息"}}),t._v(" "),a("aui-step-item",{attrs:{title:"岗位生效信息"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active==0"}],staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"postInfoBaseAdd",attrs:{model:t.postInfoBaseAdd,rules:t.rulesBase,"label-width":"120px",size:"mini","label-position":"left"}},[a("aui-row",{staticClass:"devAddHeight"},[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"法人号:",prop:"legalPersonNum"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.legalPersonNum,callback:function(e){t.$set(t.postInfoBaseAdd,"legalPersonNum",e)},expression:"postInfoBaseAdd.legalPersonNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"法人名称:",prop:"legalPersonName"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.legalPersonName,callback:function(e){t.$set(t.postInfoBaseAdd,"legalPersonName",e)},expression:"postInfoBaseAdd.legalPersonName"}})],1)],1)],1),t._v(" "),a("aui-row",[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"应用编号 :",prop:"appNum"}},[a("aui-select",{attrs:{placeholder:"请选择应用"},on:{change:t.postNumLoad},model:{value:t.postInfoBaseAdd.appNum,callback:function(e){t.$set(t.postInfoBaseAdd,"appNum",e)},expression:"postInfoBaseAdd.appNum"}},t._l(t.appList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.AppNum+"-"+t.AppName,value:t.AppNum,disabled:t.disabled}})}))],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"岗位分类 :",prop:"postClass"}},[a("aui-select",{attrs:{placeholder:"请选择岗位分类"},model:{value:t.postInfoBaseAdd.postClass,callback:function(e){t.$set(t.postInfoBaseAdd,"postClass",e)},expression:"postInfoBaseAdd.postClass"}},t._l(t.postSort,function(t){return a("aui-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})}))],1)],1)],1),t._v(" "),a("aui-row",{staticClass:"devAddHeight"},[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"岗位编号:",prop:"postNum"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.postNum,callback:function(e){t.$set(t.postInfoBaseAdd,"postNum",e)},expression:"postInfoBaseAdd.postNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"岗位名称:",prop:"postName"}},[a("aui-input",{model:{value:t.postInfoBaseAdd.postName,callback:function(e){t.$set(t.postInfoBaseAdd,"postName",e)},expression:"postInfoBaseAdd.postName"}})],1)],1)],1),t._v(" "),a("aui-row",[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"互斥岗位 :",prop:"mutualExclPost"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择互斥岗位"},model:{value:t.postInfoBaseAdd.mutualExclPost,callback:function(e){t.$set(t.postInfoBaseAdd,"mutualExclPost",e)},expression:"postInfoBaseAdd.mutualExclPost"}},t._l(t.mutualExclPostList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.name,value:t.id,disabled:t.disabled}})}))],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"排序号:"}},[a("aui-col",[a("aui-input-number",{attrs:{min:1,max:99},model:{value:t.postInfoBaseAdd.sortNum,callback:function(e){t.$set(t.postInfoBaseAdd,"sortNum",e)},expression:"postInfoBaseAdd.sortNum"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.nextClick}},[t._v("下一步")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active===1"}],staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"postInfoRunAdd",attrs:{model:t.postInfoRunAdd,rules:t.rulesRun,size:"small","label-width":"120px","label-position":"right"}},[a("aui-row",{staticClass:"devAddHeight",attrs:{gutter:100}},[a("aui-col",{attrs:{lg:11,md:24}},[a("aui-form-item",{attrs:{label:"岗位生效日期:",prop:"effeDate"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期","picker-options":t.pickerEffeDate},on:{change:t.dateChange},model:{value:t.postInfoRunAdd.effeDate,callback:function(e){t.$set(t.postInfoRunAdd,"effeDate",e)},expression:"postInfoRunAdd.effeDate"}})],1)],1),t._v(" "),a("aui-col",{attrs:{lg:11,md:24}},[a("aui-form-item",{attrs:{label:"岗位失效日期:",prop:"expiDate"}},[a("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},on:{change:t.dateChange1},model:{value:t.postInfoRunAdd.expiDate,callback:function(e){t.$set(t.postInfoRunAdd,"expiDate",e)},expression:"postInfoRunAdd.expiDate"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("上一步")]),t._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.sure}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var f=a("/Xao")(c,m,!1,function(t){a("xh1q")},"data-v-e16eb93c",null).exports,h=function t(){r()(this,t),this.data={OperType:"Q",AppNum:"",PostNum:"",length:"1",start:"0",draw:"1"},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt"},g=function t(){r()(this,t),this.data={OperType:"M",AppNum:"",PostNum:"",PostName:"",SortNum:"1",EffeDate:"",ExpiDate:"",LegalPersonNum:"",MutualExclPost:"",PostClass:"",PostStatus:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt"},v={data:function(){return{postStatueSort:[{label:"1-启用",value:"1"},{label:"0-停用",value:"0"}],loading:!1,appList:[],appStagingList:[],postSort:[{label:"01-非作业中心用户岗位",value:"01"},{label:"02-作业中心用户岗位",value:"02"}],postStatysSort:[],mutualExclPostList:[],startTime:"",endTime:"",postInfoBaseAdd:{appNum:"",postNum:"",postName:"",postClass:"",mutualExclPost:[],legalPersonNum:"",legalPersonName:"",sortNum:"",postStatys:""},postInfoRunAdd:{effeDate:"",expiDate:""},rulesBase:{appNum:[{required:!0,message:"请选择应用",trigger:"change"}],postNum:[{required:!0,message:"请输入岗位编号 ",trigger:"blur"}],postName:[{required:!0,message:"请输入岗位名称 ",trigger:"blur"},{require:!0,validator:Object(d.h)(40),trigger:"blur"}],postClass:[{required:!0,message:"请选择岗位类型 ",trigger:"blur"}]},rulesRun:{effeDate:[{required:!0,message:"请选择岗位生效日期",trigger:"change"}],expiDate:[{required:!0,message:"请选择岗位失效日期",trigger:"change"}]}}},watch:{detailListRow:function(t,e){}},methods:{dateChange1:function(){this.postInfoRunAdd.expiDate&&this.postInfoRunAdd.effeDate>this.postInfoRunAdd.expiDate&&(this.$aui.message.show({type:"warning",message:"生效日期不能大于失效日期"}),this.postInfoRunAdd.expiDate="")},initList:function(){var t=this,e=new i.a;e.data.UserNum=this.$store.getters.UserNum,Object(s.a)(e).then(function(e){t.appList=e.RspInfo.Result||[]}).catch(function(e){t.loading=!1,console.error("查询错误",e)}),this.mutualExclPostList=[];var a=new p;a.data.AppNum=this.option.appNum,a.data.PostNum=this.option.postNum,Object(s.a)(a).then(function(e){t.mutualExclPostList=e.RspInfo.Result||[]}).catch(function(e){"CID001"==e.SYS_HEAD.ReturnCode?t.mutualExclPostList=response.RspInfo.Result||[]:(t.$aui.message.show({type:"warning",message:"加载失败!互斥机构:"+e.SYS_HEAD.ReturnMessage}),console.error("查询错误",e))})},openDevInfo:function(){this.loading=!0,this.initList(),this.queryDetailList(),this.active=0},back:function(){this.option.active>=1&&this.active--},nextClick:function(){var t=this;0==this.option.active&&this.$refs.postInfoBaseAdd.validate(function(e){e&&(t.active++,t.$refs.postInfoBaseAdd.clearValidate())})},sure:function(){var t=this;this.$refs.postInfoRunAdd.validate(function(e){if(e){t.loading=!0;var a=new g;a.data.AppNum=t.postInfoBaseAdd.appNum,a.data.PostNum=t.postInfoBaseAdd.postNum,a.data.PostName=t.postInfoBaseAdd.postName,a.data.SortNum=t.postInfoBaseAdd.sortNum,a.data.EffeDate=t.postInfoRunAdd.effeDate,a.data.ExpiDate=t.postInfoRunAdd.expiDate,a.data.LegalPersonNum=t.postInfoBaseAdd.legalPersonNum,a.data.PostClass=t.postInfoBaseAdd.postClass,a.data.PostStatus=t.postInfoBaseAdd.postStatys,a.data.MutualExclPost=t.postInfoBaseAdd.mutualExclPost.join(","),Object(s.a)(a).then(function(e){t.loading=!1,t.$aui.message.show({type:"success",message:"修改成功!"}),t.isShow=!1,t.$refs.postInfoRunAdd.clearValidate(),t.$emit("refreshTable")}).catch(function(e){t.loading=!1,t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage}),console.log(e)})}})},queryDetailList:function(){var t=this,e=new h;e.data.AppNum=this.option.appNum,e.data.PostNum=this.option.postNum,Object(s.a)(e).then(function(e){var a=e.RspInfo.pageList[0];if(t.postInfoBaseAdd.appNum=a.appnum,t.postInfoBaseAdd.postNum=a.postnum,t.postInfoBaseAdd.postName=a.postname,t.postInfoBaseAdd.sortNum=a.sortnum,t.postInfoRunAdd.effeDate=o.a.timestampToTime2(a.effedate),t.postInfoRunAdd.expiDate=o.a.timestampToTime2(a.expidate),t.postInfoBaseAdd.legalPersonNum=a.legalpersonnum,t.postInfoBaseAdd.legalPersonName=t.$store.getters.LegalPersonName,t.postInfoBaseAdd.postClass=a.postclass,t.postInfoBaseAdd.postStatys=a.poststatus,a.mutualexclpost&&""!=a.mutualexclpost){var s=a.mutualexclpost.split(",");t.postInfoBaseAdd.mutualExclPost=s}t.loading=!1}).catch(function(e){t.loading=!1,console.log(e)})},clearForm:function(t){void 0!=this.$refs.postInfoBaseAdd&&(this.$refs.postInfoBaseAdd.clearValidate(),this.$refs.postInfoBaseAdd.resetFields()),void 0!=this.$refs.postInfoRunAdd&&(this.$refs.postInfoRunAdd.clearValidate(),this.$refs.postInfoRunAdd.resetFields())}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(t){this.option.isShow=t}},active:{get:function(){return this.option.active},set:function(t){this.option.active=t}}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aui-dialog",{attrs:{title:"修改岗位信息",visible:t.isShow,width:"720px","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.isShow=e},show:t.openDevInfo,hide:function(e){t.clearForm("this.postInfoBaseAdd","postInfoRunAdd")}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("aui-step",{attrs:{"finish-status":"success",active:t.active,"align-center":""}},[a("aui-step-item",{attrs:{title:"岗位基本信息"}}),t._v(" "),a("aui-step-item",{attrs:{title:"岗位生效信息"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active==0"}],staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"postInfoBaseAdd",attrs:{model:t.postInfoBaseAdd,rules:t.rulesBase,"label-width":"90px",size:"mini","label-position":"left"}},[a("aui-row",{staticClass:"devAddHeight"},[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"法人号:",prop:"legalPersonNum"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.legalPersonNum,callback:function(e){t.$set(t.postInfoBaseAdd,"legalPersonNum",e)},expression:"postInfoBaseAdd.legalPersonNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"法人名称:",prop:"legalPersonName"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.legalPersonName,callback:function(e){t.$set(t.postInfoBaseAdd,"legalPersonName",e)},expression:"postInfoBaseAdd.legalPersonName"}})],1)],1)],1),t._v(" "),a("aui-row",[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"应用编号:",prop:"appNum"}},[a("aui-select",{attrs:{disabled:"",placeholder:"请选择应用"},model:{value:t.postInfoBaseAdd.appNum,callback:function(e){t.$set(t.postInfoBaseAdd,"appNum",e)},expression:"postInfoBaseAdd.appNum"}},t._l(t.appList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.AppNum+"-"+t.AppName,value:t.AppNum,disabled:t.disabled}})}))],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"岗位分类:",prop:"postClass"}},[a("aui-select",{attrs:{placeholder:"请选择岗位分类"},model:{value:t.postInfoBaseAdd.postClass,callback:function(e){t.$set(t.postInfoBaseAdd,"postClass",e)},expression:"postInfoBaseAdd.postClass"}},t._l(t.postSort,function(t){return a("aui-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})}))],1)],1)],1),t._v(" "),a("aui-row",{staticClass:"devAddHeight"},[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"岗位编号:",prop:"postNum"}},[a("aui-input",{attrs:{disabled:""},model:{value:t.postInfoBaseAdd.postNum,callback:function(e){t.$set(t.postInfoBaseAdd,"postNum",e)},expression:"postInfoBaseAdd.postNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"岗位名称:",prop:"postName"}},[a("aui-input",{model:{value:t.postInfoBaseAdd.postName,callback:function(e){t.$set(t.postInfoBaseAdd,"postName",e)},expression:"postInfoBaseAdd.postName"}})],1)],1)],1),t._v(" "),a("aui-row",[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"互斥岗位:",prop:"mutualExclPost"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择互斥岗位"},model:{value:t.postInfoBaseAdd.mutualExclPost,callback:function(e){t.$set(t.postInfoBaseAdd,"mutualExclPost",e)},expression:"postInfoBaseAdd.mutualExclPost"}},t._l(t.mutualExclPostList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.name,value:t.id,disabled:t.disabled}})}))],1)],1)],1),t._v(" "),a("aui-row",{staticClass:"devAddHeight"},[a("aui-col",{attrs:{span:11}},[a("aui-form-item",{attrs:{label:"排序号:"}},[a("aui-col",[a("aui-input-number",{attrs:{min:1,max:99},model:{value:t.postInfoBaseAdd.sortNum,callback:function(e){t.$set(t.postInfoBaseAdd,"sortNum",e)},expression:"postInfoBaseAdd.sortNum"}})],1)],1)],1),t._v(" "),a("aui-col",{attrs:{span:11,offset:1}},[a("aui-form-item",{attrs:{label:"岗位状态:",prop:"postStatys"}},[a("aui-select",{attrs:{placeholder:"请选择岗位分类"},model:{value:t.postInfoBaseAdd.postStatys,callback:function(e){t.$set(t.postInfoBaseAdd,"postStatys",e)},expression:"postInfoBaseAdd.postStatys"}},t._l(t.postStatueSort,function(t){return a("aui-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})}))],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.nextClick}},[t._v("下一步")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active===1"}],staticClass:"content"},[a("aui-card",[a("aui-form",{ref:"postInfoRunAdd",attrs:{model:t.postInfoRunAdd,rules:t.rulesRun,size:"small","label-width":"110px","label-position":"right"}},[a("aui-row",{staticClass:"devAddHeight",attrs:{gutter:20}},[a("aui-col",{attrs:{lg:11,md:24}},[a("aui-form-item",{attrs:{label:"岗位生效日期:",prop:"effeDate"}},[a("aui-date-picker",{attrs:{disabled:"","value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:t.postInfoRunAdd.effeDate,callback:function(e){t.$set(t.postInfoRunAdd,"effeDate",e)},expression:"postInfoRunAdd.effeDate"}})],1)],1),t._v(" "),a("aui-col",{attrs:{lg:11,md:24}},[a("aui-form-item",{attrs:{label:"岗位失效日期:",prop:"expiDate"}},[a("aui-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"选择日期"},on:{change:t.dateChange1},model:{value:t.postInfoRunAdd.expiDate,callback:function(e){t.$set(t.postInfoRunAdd,"expiDate",e)},expression:"postInfoRunAdd.expiDate"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("上一步")]),t._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.sure}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var N=a("/Xao")(v,b,!1,function(t){a("tLvx")},"data-v-02b10640",null).exports,A=(a("VdD7"),function t(){r()(this,t),this.data={OperType:"Q",AppNum:"",LegalPersonNum:"",PostNum:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostRoleMnt",this.TransServiceCode="mg-afaservices-upm/postRoleMnt"}),I=function t(){r()(this,t),this.data={OperType:"M",AppNum:"",LegalPersonNum:"",PostNum:"",GroupTranList:[]},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostRoleMnt",this.TransServiceCode="mg-afaservices-upm/postRoleMnt"},x={props:{option:Object},data:function(){return{loading:!1,appList:[],roleList:[],postRole:{appNum:"",postNum:"",postName:"",legalPersonNum:"",legalPersonName:"",selectItem:[]},rules:{}}},computed:{isShow:{get:function(){return this.option.isShow},set:function(t){this.option.isShow=t}}},methods:{openDevInfo:function(){this.loading=!0,this.dataInit()},dataInit:function(){var t=this;this.postRole.postNum=this.option.currentRow.postnum,this.postRole.postName=this.option.currentRow.postname,this.postRole.appNum=this.option.currentRow.appnum,this.postRole.legalPersonNum=this.$store.getters.LegalPersonNum,this.postRole.legalPersonName=this.$store.getters.LegalPersonName;var e=new i.a;e.data.UserNum=this.$store.getters.UserNum,Object(s.a)(e).then(function(e){t.appList=e.RspInfo.Result||[]}).catch(function(e){t.loading=!1,console.error("查询错误",e)});var a=new A;a.data.AppNum=this.postRole.appNum,a.data.PostNum=this.postRole.postNum,a.data.LegalPersonNum=this.postRole.legalPersonNum,Object(s.a)(a).then(function(e){t.roleList=e.RspInfo.pageList||[],t.roleList.forEach(function(t){t.rolename=t.rolenum+"-"+t.rolename});var a=[];(e.RspInfo.pageList1||[]).forEach(function(t){a.push(t.entynum)}),t.postRole.selectItem=a,t.loading=!1}).catch(function(e){t.loading=!1,console.error("查询错误",e)})},closeBrand:function(){this.appList=[],this.roleList=[],this.postRole={appNum:"",postNum:"",postName:"",legalPersonNum:"",legalPersonName:"",selectItem:[]},this.$refs.postRole.clearValidate()},brandAdd:function(){var t=this;this.loading=!0;var e=new I;e.data.AppNum=this.postRole.appNum,e.data.PostNum=this.postRole.postNum,e.data.LegalPersonNum=this.postRole.legalPersonNum;var a=[];this.$refs.tree.getCheckedKeys().forEach(function(t){a.push({PrivLegeId:t})}),e.data.GroupTranList=a,Object(s.a)(e).then(function(e){t.loading=!1,t.$aui.message.show({type:"success",message:"保存成功!"}),t.isShow=!1}).catch(function(e){t.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage}),t.loading=!1,console.log(e)})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("aui-dialog",{attrs:{visible:t.isShow,title:"岗位权限分配",width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.isShow=e},hide:t.closeBrand,show:t.openDevInfo}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("aui-card",[a("aui-form",{ref:"postRole",attrs:{model:t.postRole,size:"mini",rules:t.rules,"label-position":"right","label-width":"125px"}},[a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"应用编号 :",prop:"appNum"}},[a("aui-select",{attrs:{disabled:"",placeholder:"请选择应用"},model:{value:t.postRole.appNum,callback:function(e){t.$set(t.postRole,"appNum",e)},expression:"postRole.appNum"}},t._l(t.appList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.AppNum+"-"+t.AppName,value:t.AppNum,disabled:t.disabled}})}))],1)],1)],1),t._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"岗位编号:",prop:"postNum"}},[a("aui-input",{attrs:{disabled:"",name:"postNum"},model:{value:t.postRole.postNum,callback:function(e){t.$set(t.postRole,"postNum",e)},expression:"postRole.postNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"岗位名称:",prop:"postName"}},[a("aui-input",{attrs:{disabled:"",name:"postName"},model:{value:t.postRole.postName,callback:function(e){t.$set(t.postRole,"postName",e)},expression:"postRole.postName"}})],1)],1)],1),t._v(" "),a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"法人号:",prop:"legalPersonNum"}},[a("aui-input",{attrs:{disabled:"",name:"legalPersonNum"},model:{value:t.postRole.legalPersonNum,callback:function(e){t.$set(t.postRole,"legalPersonNum",e)},expression:"postRole.legalPersonNum"}})],1)],1),t._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"法人名称:",prop:"legalPersonName"}},[a("aui-input",{attrs:{disabled:"",name:"legalPersonName"},model:{value:t.postRole.legalPersonName,callback:function(e){t.$set(t.postRole,"legalPersonName",e)},expression:"postRole.legalPersonName"}})],1)],1)],1)],1)],1),t._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",{attrs:{gutter:20}},[a("aui-col",{attrs:{span:23}},[a("aui-tree",{ref:"tree",attrs:{data:t.roleList,props:{children:"children",label:"rolename"},"show-checkbox":"","node-key":"rolenum","default-checked-keys":t.postRole.selectItem,"highlight-current":""}})],1)],1)],1),t._v(" "),a("aui-row",{staticStyle:{margin:"20px 0","text-align":"center"}},[a("aui-button",{attrs:{size:"mini"},on:{click:function(e){t.isShow=!1}}},[t._v("取消")]),t._v(" "),a("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:t.brandAdd}},[t._v("确认")])],1)],1)])],1)},staticRenderFns:[]};var w=a("/Xao")(x,P,!1,function(t){a("guuo")},"data-v-53063fe8",null).exports,R=a("syAl"),B=function t(){r()(this,t),this.data={OperType:"D",AppNum:"",PostNum:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt"},y=function t(){r()(this,t),this.data={OperType:"Q",PostNum:"",PostName:"",UserNum:"",AppNum:"",LegalPersonNum:"",length:"",start:"",draw:"2"},this.CommCode="IBUserPermissionsManagement",this.SceneCode="PostInfMnt",this.TransServiceCode="mg-afaservices-upm/postInfMnt",this.QueryRowNum="",this.QueryPageNo=""},k={name:"user-info-manage",data:function(){return{postState:{},appList:[],form:{appNum:"",postName:"",postId:""},pageSize:void 0,currentRow:[],currentPage:1,tableData:[],totalRcrdNum:0,loading:!1,checkedPost:!1,dialogList:{CreatePost:f,userRoleDialog:w,updatePost:N},dialogOptions:{isShow:!1,active:""},dialogOptionsupdatePost:{isShow:!1,appNum:"",postNum:"",active:""},dialogOptionsUserRole:{isShow:!1,currentRow:[]},rules:{postId:[{require:!0,validator:Object(d.h)(10),trigger:"blur"}]}}},computed:{},created:function(){this.postState=R.a.get("postStatus"),this.pageSize=R.a.get("PageSize"),this.initPage()},watch:{form:{handler:function(t,e){this.currentPage=1},deep:!0}},methods:{initPage:function(){var t=this,e=new i.a;e.data.UserNum=this.$store.getters.UserNum,Object(s.a)(e).then(function(e){t.appList=e.RspInfo.Result||[]}).catch(function(t){console.error("查询错误",t)})},changePage:function(t){this.currentPage=t,this.checkPostList()},delPost:function(){var t=this;this.$aui.confirm.show("此操作将删除该岗位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postDel()}).catch(function(){t.$aui.message.show({type:"info",message:"已取消删除"})})},dataFormat:function(t,e){return this.postState[t[e.property]]},resetForm:function(t){this.$refs[""+t].resetFields(),console.log(this.form.appNum)},handleCommand:function(t){"postRole"==t&&this.roleMaintenance()},CreatePost:function(){this.dialogOptions.isShow=!0,this.dialogOptions.active=0},modPost:function(){this.dialogOptionsupdatePost.isShow=!0,this.dialogOptionsupdatePost.appNum=this.currentRow.appnum,this.dialogOptionsupdatePost.postNum=this.currentRow.postnum,this.dialogOptionsupdatePost.active=0},roleMaintenance:function(){this.dialogOptionsUserRole.isShow=!0,this.dialogOptionsUserRole.currentRow=this.currentRow},postDel:function(){var t=this;this.loading=!0;var e=new B;e.data.AppNum=this.currentRow.appnum,e.data.PostNum=this.currentRow.postnum,Object(s.a)(e).then(function(e){t.loading=!1,t.$aui.message.show({type:"success",message:"岗位删除成功!"}),t.checkPostList()}).catch(function(e){t.$aui.message.show({type:"success",message:"岗位删除失败!"}),t.loading=!1})},checkPostList:function(){var t=this;this.loading=!0,this.checkedPost=!1;var e=new y;""===this.form.appNum?e.data.UserNum=this.$store.getters.UserNum:e.data.AppNum=this.form.appNum,e.data.PostNum=this.form.postId,e.data.PostName=this.form.postName,e.data.LegalPersonNum=this.$store.getters.LegalPersonNum,e.data.length=this.pageSize,e.data.start=(this.currentPage-1)*this.pageSize,Object(s.a)(e).then(function(e){t.loading=!1,t.tableData=e.RspInfo.pageList||[],t.totalRcrdNum=e.RspInfo.recordsTotal||0}).catch(function(e){t.$aui.message.show.error(e.SYS_HEAD.ReturnMessage),t.loading=!1,t.tableData=[],t.totalRcrdNum=0})},handleCurrentChange:function(t){this.currentRow=t[0],1==t.length?this.checkedPost=!0:t.length>1?this.$refs.table.toggleRowSelection(t[0]):this.checkedPost=!1}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",{staticStyle:{overflow:"visible"}},[a("aui-form",{ref:"form",attrs:{model:t.form,size:"mini","label-position":"top",rules:t.rules}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"应用编号",prop:"appNum"}},[a("aui-select",{attrs:{placeholder:"请选择应用"},model:{value:t.form.appNum,callback:function(e){t.$set(t.form,"appNum",e)},expression:"form.appNum"}},t._l(t.appList,function(t){return a("aui-option",{key:t.value,attrs:{label:t.AppNum+"-"+t.AppName,value:t.AppNum,disabled:t.disabled}})}))],1)],1),t._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"岗位编号",prop:"postId"}},[a("aui-input",{attrs:{placeholder:"请输入岗位编号",name:"postId"},model:{value:t.form.postId,callback:function(e){t.$set(t.form,"postId",e)},expression:"form.postId"}})],1)],1),t._v(" "),a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("aui-input",{attrs:{placeholder:"请输入岗位名称",name:"postName"},model:{value:t.form.postName,callback:function(e){t.$set(t.form,"postName",e)},expression:"form.postName"}})],1)],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",icon:"aui-icon-search",loading:t.loading,size:"mini"},on:{click:t.checkPostList}},[t._v("查询")])],1),t._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("aui-row",{attrs:{gutter:10}},[t.btnPermission("Button_Post_Add")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:t.checkedPost},on:{click:t.CreatePost}},[t._v("新增")])],1):t._e(),t._v(" "),t.btnPermission("Button_Post_Edit")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:!t.checkedPost},on:{click:t.modPost}},[t._v("修改")])],1):t._e(),t._v(" "),t.btnPermission("Button_Post_Delete")?a("aui-col",{attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:!t.checkedPost},on:{click:t.delPost}},[t._v("删除")])],1):t._e(),t._v(" "),a("aui-col",{attrs:{lg:2,md:3}},[a("aui-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("aui-button",{attrs:{type:"primary",size:"mini",disabled:!t.checkedPost}},[t._v("\n            更多操作"),a("i",{staticClass:"aui-icon-arrow-down aui-icon--right"})]),t._v(" "),a("aui-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.btnPermission("Button_Post_Role")?a("aui-dropdown-item",{attrs:{command:"postRole"}},[t._v("岗位权限分配")]):t._e()],1)],1)],1)],1),t._v(" "),a("aui-table",{ref:"table",staticClass:"tableMarginTop",staticStyle:{"min-height":"390px"},attrs:{data:t.tableData,border:"","highlight-current-row":"","header-row-class-name":"tableHeaderClass"},on:{"selection-change":t.handleCurrentChange}},[a("aui-table-column",{attrs:{type:"selection",width:"40px"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"appnum",label:"应用编号"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"postnum",label:"岗位编号"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"postname",label:"岗位名称"}}),t._v(" "),a("aui-table-column",{attrs:{prop:"poststatus",formatter:t.dataFormat,label:"岗位状态"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:this.tableData,expression:"this.tableData"}],staticStyle:{"text-align":"right","margin-top":"20px"}},[a("aui-pagination",{attrs:{"current-page":t.currentPage,background:"","page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalRcrdNum},on:{"current-change":t.changePage}})],1)],1),t._v(" "),a("keep-alive",[a(t.dialogList.CreatePost,{tag:"component",attrs:{option:t.dialogOptions},on:{refreshTable:t.checkPostList}})],1),t._v(" "),a("keep-alive",[a(t.dialogList.userRoleDialog,{tag:"component",attrs:{option:t.dialogOptionsUserRole}})],1),t._v(" "),a("keep-alive",[a(t.dialogList.updatePost,{tag:"component",attrs:{option:t.dialogOptionsupdatePost},on:{refreshTable:t.checkPostList}})],1)],1)},staticRenderFns:[]};var S=a("/Xao")(k,_,!1,function(t){a("Usjr")},"data-v-7da9ed00",null);e.default=S.exports},UP5j:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,'\n.text[data-v-7da9ed00] {\n  font-size: 14px;\n}\n.item[data-v-7da9ed00] {\n  margin-bottom: 18px;\n}\n.dialog-text[data-v-7da9ed00] {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: red;\n}\n.clearfix[data-v-7da9ed00]:before,\n.clearfix[data-v-7da9ed00]:after {\n  display: table;\n  content: "";\n}\n.clearfix[data-v-7da9ed00]:after {\n  clear: both;\n}\n.aui-card[data-v-7da9ed00] {\n  width: 100%;\n}\n.aui-form-item[data-v-7da9ed00] {\n  margin-left: 30px;\n}\n.aui-form-item1[data-v-7da9ed00] {\n  margin-left: 10px;\n}\n.box2-button[data-v-7da9ed00] {\n  width: 80px;\n}\n.aui-card[data-v-7da9ed00] {\n  overflow: inherit;\n}\n',""])},Usjr:function(t,e,a){var s=a("UP5j");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("6e613518",s,!0)},XUba:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"",""])},a7wq:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.aui-dialog .el-dialog__body[data-v-02b10640] {\n  padding: 20px 27px 20px !important;\n}\n.content[data-v-02b10640] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.content .footer[data-v-02b10640] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    margin-top: 20px;\n}\n.content .footer .aui-card[data-v-02b10640] {\n      overflow: inherit;\n}\n",""])},e9MM:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.aui-dialog .el-dialog__body[data-v-e16eb93c] {\n  padding: 20px 27px 20px !important;\n}\n.content[data-v-e16eb93c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.content .footer[data-v-e16eb93c] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    margin-top: 20px;\n}\n.content .footer .aui-card[data-v-e16eb93c] {\n      overflow: inherit;\n}\n",""])},guuo:function(t,e,a){var s=a("XUba");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("d6589ab6",s,!0)},tLvx:function(t,e,a){var s=a("a7wq");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("10743cc6",s,!0)},xh1q:function(t,e,a){var s=a("e9MM");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("b2752c4e",s,!0)}});