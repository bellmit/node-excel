webpackJsonp([94],{"7j8g":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("syAl"),o=t("0oES"),i=t("pADA"),s=t("AA3o"),m=t.n(s),u=function e(){m()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="queryTradenumHistory",this.TransServiceCode="ib-dbcomm/dbComm"},l={data:function(){return{loading:!1,tableData:[],tableTotal:0,currentPage:1,pageSize:r.a.get("PageSize"),queryForm:{equipNo:"",tradeName:"",accNo:"",hostNo:"",sDate:"",eDate:"",sTime:"",eTime:""},rules:{equipNo:[{required:!0,message:"请输入设备编号",trigger:"blur"}]}}},watch:{queryForm:{handler:function(e,a){this.currentPage=1},deep:!0}},mounted:function(){this.queryForm.sDate=i.a.getNowTime(29),this.queryForm.eDate=i.a.getNowTime(0),this.queryForm.sTime="000000",this.queryForm.eTime=i.a.getDateTime("time")},methods:{dateChange:function(){this.queryForm.sDate>this.queryForm.eDate?(this.$aui.message.show({type:"warning",message:"开始日期不能大于结束日期"}),this.queryForm.sDate=i.a.getNowTime(29),this.queryForm.eDate=i.a.getNowTime(0)):this.queryForm.sDate<i.a.getNowTime(30)&&(this.$aui.message.show({type:"warning",message:"开始日期最长支持查询最近一个月的记录"}),this.queryForm.sDate=i.a.getNowTime(30))},timeChange:function(){this.queryForm.sTime>this.queryForm.eTime&&(this.$aui.message.show({type:"warning",message:"开始时间不能大于结束时间"}),this.queryForm.sTime="000000",this.queryForm.eDate=i.a.getDateTime("time"))},clearForm:function(e){this.queryForm.equipNo="",this.queryForm.tradeName="",this.queryForm.accNo="",this.queryForm.hostNo="",this.queryForm.sDate=i.a.getDateTime("date"),this.queryForm.eDate=i.a.getDateTime("date"),this.queryForm.sTime="000000",this.queryForm.eTime=i.a.getDateTime("time")},queryModel:function(){var e=this;this.$refs.queryForm.validate(function(a){if(a){e.loading=!0;var t=new u;t.G_AppNum="SS",t.data.equipno=e.queryForm.equipNo,t.data.accno=e.queryForm.accNo,t.data.tradename=e.queryForm.tradeName,t.data.hostnum=e.queryForm.hostNo,t.data.sdate=e.queryForm.sDate,t.data.edate=e.queryForm.eDate,t.data.stime=e.queryForm.sTime,t.data.etime=e.queryForm.eTime,t.data.CurtPage=e.currentPage+"",t.data.PageSize=e.pageSize+"",t.data.StartRows=(e.currentPage-1)*e.pageSize+"",Object(o.a)(t).then(function(a){console.log(a.RspInfo),e.loading=!1,e.tableData=a.RspInfo.Result,e.tableTotal=a.RspInfo.totalNum,"0"==e.tableTotal&&e.$aui.message.show({type:"warning",message:"无满足条件的记录"})}).catch(function(a){e.$aui.message.show({type:"error",message:"请求失败，错误码:"+a.SYS_HEAD.ReturnCode+"，错误信息："+a.SYS_HEAD.ReturnMessage}),e.loading=!1,e.tableData=[],e.tableTotal=0,console.error("查询错误",a)})}})},handleCurrentChange:function(e){this.currentPage=e,this.queryModel()},tableDateFormat:function(e,a){return i.a.timeFormat2Date(e[a.property])},tableTimeFormat:function(e,a){return i.a.timeFormat2Time(e[a.property])},tranStateFormat:function(e,a){return"S"==e[a.property]?"成功":"失败"}}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-card",{staticStyle:{"margin-bottom":"10px",overflow:"visible"}},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules,size:"mini","label-position":"top","label-width":"100px"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"设备编号",prop:"equipNo"}},[t("aui-input",{model:{value:e.queryForm.equipNo,callback:function(a){e.$set(e.queryForm,"equipNo",a)},expression:"queryForm.equipNo"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"交易名称",prop:"tradeName"}},[t("aui-input",{model:{value:e.queryForm.tradeName,callback:function(a){e.$set(e.queryForm,"tradeName",a)},expression:"queryForm.tradeName"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"交易账号",prop:"accNo"}},[t("aui-input",{model:{value:e.queryForm.accNo,callback:function(a){e.$set(e.queryForm,"accNo",a)},expression:"queryForm.accNo"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"流水号",prop:"hostNo"}},[t("aui-input",{model:{value:e.queryForm.hostNo,callback:function(a){e.$set(e.queryForm,"hostNo",a)},expression:"queryForm.hostNo"}})],1)],1)],1),e._v(" "),t("aui-row",[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"开始日期",prop:"sDate"}},[t("aui-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:e.dateChange},model:{value:e.queryForm.sDate,callback:function(a){e.$set(e.queryForm,"sDate",a)},expression:"queryForm.sDate"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"开始时间",prop:"sTime"}},[t("aui-time-picker",{attrs:{"value-format":"HHmmss",placeholder:"任意时间点",clearable:!1},on:{change:e.timeChange},model:{value:e.queryForm.sTime,callback:function(a){e.$set(e.queryForm,"sTime",a)},expression:"queryForm.sTime"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"结束日期",prop:"eDate"}},[t("aui-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyyMMdd",type:"date",placeholder:"选择日期",clearable:!1},on:{change:e.dateChange},model:{value:e.queryForm.eDate,callback:function(a){e.$set(e.queryForm,"eDate",a)},expression:"queryForm.eDate"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{staticClass:"typeInfo-aui-form-item",attrs:{label:"结束时间",prop:"eTime"}},[t("aui-time-picker",{attrs:{"value-format":"HHmmss",placeholder:"任意时间点",clearable:!1},on:{change:e.timeChange},model:{value:e.queryForm.eTime,callback:function(a){e.$set(e.queryForm,"eTime",a)},expression:"queryForm.eTime"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-form-item",[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.queryModel}},[e._v("查询")])],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:2,lg:3}},[t("aui-form-item",[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(a){e.clearForm("queryForm")}}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),t("aui-card",[t("aui-table",{ref:"tableData",staticStyle:{"min-height":"390px"},attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:"","max-height":"400",width:"100%"}},[t("aui-table-column",{attrs:{prop:"EQUIP_NO",label:"设备编号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TX_NM",label:"交易名称"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"ACCT_NO",label:"交易账号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TELR_SN",label:"流水号"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TX_AMT",label:"交易金额"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TX_DT",label:"交易日期",formatter:e.tableDateFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TX_TM",label:"交易时间",formatter:e.tableTimeFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TX_STUS_CD",label:"交易状态码",formatter:e.tranStateFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"RETN_CD",label:"交易返回码"}})],1),e._v(" "),t("aui-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":e.currentPage,background:"",layout:"total, prev, pager, next, jumper",total:e.tableTotal},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=t("/Xao")(l,n,!1,function(e){t("nfms")},null,null);a.default=c.exports},"8Pmm":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.aui-date-editor.aui-input,\n.aui-date-editor.el-input__inner {\n  width: 100%;\n}\n",""])},nfms:function(e,a,t){var r=t("8Pmm");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("8bSs")("50d1212b",r,!0)}});