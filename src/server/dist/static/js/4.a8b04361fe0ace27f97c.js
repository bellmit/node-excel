webpackJsonp([4,14],{"+ilI":function(e,a,t){"use strict";var i=t("AA3o"),o=t.n(i);a.a=function e(){o()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="QueryLegalPerson",this.TransServiceCode="ib-dbcomm/dbComm"}},"/9B3":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n[data-v-8b737236]\n.aui-transfer-panel {\n  width: 280px !important;\n}\n",""])},"/Zr0":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},"3S5Q":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i,o=t("a3Yh"),n=t.n(o),r=t("syAl"),s=t("0oES"),l=(t("qfSh"),t("yq/x")),u=t("VNlJ"),c=t("k4m6"),d=t("VcKm"),p=t("6Zus"),h={name:"maintainModeCond",mixins:[],validators:{},props:{isDialog:{default:!1}},components:{},data:function(){return{currentPage:1,pageSize:r.a.get("PageSize"),total:0,queryForm:{authDesc:"",remark:""},rules:{},modeTableData:[],conditionTableData:[],selectedMode:[],dialogList:{authModeDialog:l.a,authConditionDialog:u.a},authModeDialogOptions:{isShow:!1},authConditionDialogOptions:{isShow:!1},multipleSelection:[]}},create:function(){},computed:{},watch:{},methods:(i={query:function(){var e=this;if(this.queryForm.authDesc||this.queryForm.remark){var a=new p.a;a.data.REQTYPE="Mode",a.data.REMRK_1=this.queryForm.remark,a.data.AUTH_DESCR=this.queryForm.authDesc,a.data.currpage=this.currentPage,a.data.pagerownum=this.pageSize,a.data.pageflag=4,Object(s.a)(a).then(function(a){e.modeTableData=a.RspInfo.AuthMode||[],e.total=a.RspInfo.RecordNum||0}).catch(function(a){e.modeTableData=[],e.total=0,e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})}else this.$aui.message.show({type:"warning",message:"授权原因或模式说明至少输入一项!"})},clearForm:function(){this.$refs.queryForm.resetFields()},dataFormat:function(e,a){return"1"==e[a.property]?"1-本地授权":"2"==e[a.property]?"2-远程授权":"3"==e[a.property]?"3-异终端授权":void 0},addMode:function(){this.authModeDialogOptions.isShow=!0,this.authModeDialogOptions.type="add"},editMode:function(e,a){this.authModeDialogOptions.isShow=!0,this.authModeDialogOptions.type="edit",this.authModeDialogOptions.rowdata=a},delMode:function(e,a){var t=this;this.$aui.confirm.show("是否确认删除该模式!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=new d.a;i.data.REQTYPE="D",i.data.MODE_NO=a.MODE_NO,Object(s.a)(i).then(function(a){t.modeTableData.splice(e,1)}).catch(function(e){console.log(e),t.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})}).catch(function(){})},handleEditCond:function(e,a){this.$refs.condEditRef.showEdit(a)},delCondition:function(e,a){var t=this;this.$aui.confirm.show("是否确认删除该模式!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=new c.a;i.data.REQTYPE="D",i.data.OPRTN_COND_NO=a.OPRTN_COND_NO,i.data.DICTRY_NM=a.DICTRY_NM,i.data.OPER_SYM_1=a.OPER_SYM_1,i.data.TRAN_CD=a.TRAN_CD,Object(s.a)(i).then(function(a){t.conditionTableData.splice(e,1)}).catch(function(e){console.log(e),t.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})}).catch(function(){})},cancle:function(){this.$emit("cancle")},getCondModeData:function(){var e={conditionTableData:[],modeTableData:[]};return e.modeTableData=this.multipleSelection,e.conditionTableData=[],e},returnModeInfo:function(e,a){if("edit"==a){var t=this.modeTableData.findIndex(function(a){return a.MODE_NO==e.MODE_NO});this.modeTableData.splice(t,1,e)}else this.modeTableData.push(e)},addCondition:function(e){this.authConditionDialogOptions.isShow=!0,this.authConditionDialogOptions.type="add",this.authConditionDialogOptions.rowdata=e,this.authConditionDialogOptions.tranCode=this.conditionTableData.TRAN_CD}},n()(i,"delCondition",function(e,a){var t=this;this.$aui.confirm.show("是否确认删除该模式!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=new c.a;i.data.REQTYPE="D",i.data.OPRTN_COND_NO=a.OPRTN_COND_NO,i.data.DICTRY_NM=a.DICTRY_NM,i.data.OPER_SYM_1=a.OPER_SYM_1,i.data.TRAN_CD=a.TRAN_CD,Object(s.a)(i).then(function(a){t.conditionTableData.splice(e,1)}).catch(function(e){console.log(e),t.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})}).catch(function(){})}),n()(i,"returnConditionInfo",function(e,a){if("edit"==a){var t=this.conditionTableData.findIndex(function(a){return a.OPRTN_COND_NO==e.OPRTN_COND_NO});this.conditionTableData.splice(t,1,e)}else this.conditionTableData.push(e)}),n()(i,"handleCurrentChange",function(e){this.currentPage=e,this.query()}),n()(i,"rowClick",function(e,a,t,i){var o=this;this.selectedMode.shift(),this.selectedMode.push(e);var n=new p.a;n.data.REQTYPE="Cond",n.data.MODE_NO=e.MODE_NO,Object(s.a)(n).then(function(e){o.conditionTableData=e.RspInfo.AuthCond||[]}).catch(function(e){o.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})}),n()(i,"handleSelectionChange",function(e){this.multipleSelection=e}),n()(i,"resetData",function(){this.modeTableData=[],this.conditionTableData=[],this.queryForm.authDesc="",this.queryForm.remark="",this.total=0,this.currentPage=1}),i),mounted:function(){},beforeDestroy:function(){}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"maintain-mode-cond"},[t("aui-card",{staticClass:"type-info-box-card"},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"授权原因",prop:"authDesc"}},[t("aui-input",{attrs:{placeholder:"请输入模式编号"},model:{value:e.queryForm.authDesc,callback:function(a){e.$set(e.queryForm,"authDesc",a)},expression:"queryForm.authDesc"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"模式说明",prop:"remark"}},[t("aui-input",{attrs:{placeholder:"请输入备注"},model:{value:e.queryForm.remark,callback:function(a){e.$set(e.queryForm,"remark",a)},expression:"queryForm.remark"}})],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:e.clearForm}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{attrs:{header:"授权模式信息"}},[t("aui-row",{directives:[{name:"show",rawName:"v-show",value:!e.isDialog,expression:"!isDialog"}]},[t("aui-col",{attrs:{lg:4,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:e.addMode}},[e._v("新增模式")])],1)],1),e._v(" "),t("aui-table",{ref:"modeTableData",staticStyle:{width:"100%"},attrs:{data:e.modeTableData,"highlight-current-row":""},on:{"row-click":e.rowClick,"selection-change":e.handleSelectionChange}},[t("aui-table-column",{attrs:{type:e.isDialog?"selection":"",width:"55"}}),e._v(" "),t("aui-table-column",{attrs:{property:"MODE_NO",label:"模式编号"}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_TYP_CD",label:"授权类型",formatter:e.dataFormat}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_LVL_CD",label:"授权级别"}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_DESCR",label:"授权原因","show-overflow-tooltip":""}}),e._v(" "),t("aui-table-column",{attrs:{property:"REMRK_1",label:"模式说明"}}),e._v(" "),t("aui-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.isDialog,expression:"!isDialog"}],attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.editMode(a.$index,a.row)}}},[e._v("修改")]),e._v(" "),t("aui-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.delMode(a.$index,a.row)}}},[e._v("删除")]),e._v(" "),t("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addCondition(a.row)}}},[e._v("新增条件")])]}}])})],1),e._v(" "),t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("aui-card",{attrs:{header:"授权条件信息"}},[t("aui-table",{ref:"conditionTableData",staticStyle:{width:"100%"},attrs:{data:e.conditionTableData}},[t("aui-table-column",{attrs:{property:"OPRTN_COND_NO",label:"条件编号"}}),e._v(" "),t("aui-table-column",{attrs:{property:"DICTRY_NM",label:"字典名称"}}),e._v(" "),t("aui-table-column",{attrs:{property:"OPER_SYM_1",label:"运算符1"}}),e._v(" "),t("aui-table-column",{attrs:{property:"CMPR_VAL",label:"比较值1"}}),e._v(" "),t("aui-table-column",{attrs:{property:"OPER_SYM_2",label:"运算符2"}}),e._v(" "),t("aui-table-column",{attrs:{property:"VALUE2",label:"比较值2"}}),e._v(" "),t("aui-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.isDialog,expression:"!isDialog"}],attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.delCondition(a.$index,a.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("keep-alive",[t(e.dialogList.authModeDialog,{tag:"component",attrs:{option:e.authModeDialogOptions},on:{refreshTable:e.returnModeInfo}})],1),e._v(" "),t("keep-alive",[t(e.dialogList.authConditionDialog,{tag:"component",attrs:{option:e.authConditionDialogOptions},on:{refreshTable:e.returnConditionInfo}})],1)],1)},staticRenderFns:[]};var g=t("/Xao")(h,m,!1,function(e){t("tFhA")},"data-v-56621012",null);a.default=g.exports},"40TP":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.maintain-mode-cond[data-v-56621012] {\n  display: block;\n}\n.maintain-mode-cond .search-box[data-v-56621012] {\n    display: block;\n}\n",""])},"5AS6":function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.aui-input[data-v-2c713048] .aui-input__inner {\n  cursor: pointer;\n}\n.aui-popover[data-v-2c713048] .aui-input__inner {\n  cursor: text;\n}\n",""])},"6Zus":function(e,a,t){"use strict";var i=t("AA3o"),o=t.n(i);a.a=function e(){o()(this,e),this.data={REQTYPE:""},this.CommCode="IBOperaManage",this.SceneCode="SearchAuthModeAndCond",this.TransServiceCode="mg-afaservices-om/operationsControlmode"}},"7E7O":function(e,a,t){var i=t("r78N");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("4324aeac",i,!0)},A8Vt:function(e,a,t){var i=t("5AS6");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("2dda04d0",i,!0)},AQn5:function(e,a,t){var i=t("BC53");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("3717ae91",i,!0)},BC53:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.maintainModeCond[data-v-f6143e78] {\n  display: block;\n}\n",""])},GhLi:function(e,a,t){var i=t("vZSM");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("149dc3c2",i,!0)},VNlJ:function(e,a,t){"use strict";var i=t("0oES"),o=t("pADA"),n=t("AA3o"),r=t.n(n),s=function e(){r()(this,e),this.data={OperType:""},this.CommCode="IBOperaManage",this.SceneCode="QuyRulesByCondID",this.BusiDataKey="",this.TransServiceCode="mg-afaservices-om/operationsControlModequy"},l=t("k4m6"),u={data:function(){return{loading:!1,conditionFormData:{condtionModeId:"",condtionDesc:"",fieldType:"0",universalField:"",tranField:"",operationalCharacter:"",valuesRange1:"",preciseComeVal1:"",comeVal1:"",valuesRange2:"",comeVal2:""},conditionFormRules:{condtionDesc:[{required:!0,message:"请输入条件说明",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"change"}],universalField:[{required:!0,message:"请选择通用字段",trigger:"change"}],tranField:[{required:!0,message:"请选择交易字段",trigger:"change"}],operationalCharacter:[{required:!0,message:"请选择操作符",trigger:"change"}],valuesRange1:[{required:!0,message:"请选择范围1",trigger:"change"}],preciseComeVal1:[{required:!0,message:"请输入值",trigger:"blur"}],comeVal1:[{required:!0,message:"请输入值",trigger:"blur"}],valuesRange2:[{required:!0,message:"请选择范围2",trigger:"change"}],comeVal2:[{required:!0,message:"请输入值",trigger:"blur"}]},fieldTypeList:[{name:"通用字段",value:"0"},{name:"交易字段",value:"1"}],universalFieldList:[],tranFieldList:[],operationalCharacterList:[{name:"==-等于",value:"=="},{name:"!=-不等于",value:"!="},{name:"in-包含(以','分割)",value:"in"},{name:"not in-不包含(以','分割)",value:"not in"},{name:"empty-为空",value:"empty"},{name:"not empty-不为空",value:"not empty"},{name:"range-范围",value:"range"}],valuesRangeList:[{name:">",value:">"},{name:">=",value:">="},{name:"<",value:"<"},{name:"<=",value:"<="}],universalFieldShow:!0,tranFieldShow:!1,valuesRange1Show:!1,valuesRangeShow:!1,valuesRangeShow1:!1}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},methods:{openConditionDialog:function(){this.pubLoadCond(),"add"==this.option.type&&(this.conditionFormData.condtionModeId=this.option.rowdata.MODE_NO)},pubLoadCond:function(){var e=this,a=new s;a.data.OperType="PubKeyword",a.data.start="0",a.data.length="5000000",Object(i.a)(a).then(function(a){for(var t=a.RspInfo.pageList,i=0;i<t.length;i++){var o={};o.name=t[i].Items.split("|")[3],o.value=t[i].Items.split("|")[0],e.universalFieldList.push(o)}}).catch(function(a){e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})},closeConditionDialog:function(){this.universalFieldList=[],this.$refs.conditionFormData.resetFields(),this.$refs.conditionFormData.clearValidate(),this.conditionFormData.fieldType="0",this.universalFieldShow=!0,this.tranFieldShow=!1,this.valuesRange1Show=!1,this.valuesRangeShow=!1,this.valuesRangeShow1=!1},operationalCharacterChange:function(){"range"==this.conditionFormData.operationalCharacter?(this.conditionFormData.preciseComeVal1="",this.valuesRangeShow=!1,this.valuesRange1Show=!0,this.valuesRangeShow1=!0):(this.valuesRangeShow=!0,this.valuesRange1Show=!1,this.valuesRangeShow1=!1,this.conditionFormData.valuesRange1="",this.conditionFormData.valuesRange2="",this.conditionFormData.comeVal1="",this.conditionFormData.comeVal2="")},fieldTypeChange:function(){"0"==this.conditionFormData.fieldType?(this.universalFieldShow=!0,this.tranFieldShow=!1):(this.universalFieldShow=!1,this.tranFieldShow=!0)},submitCondition:function(){var e=this;this.$refs.conditionFormData.validate(function(a){if(a){e.loading=!0;var t=new l.a;t.data.REQTYPE="add"==e.option.type?"A":"U",t.data.OPRTN_COND_NO=e.conditionFormData.condtionModeId,t.data.DICTRY_NM="0"==e.conditionFormData.fieldType?e.conditionFormData.universalField:e.conditionFormData.tranField,"range"==e.conditionFormData.operationalCharacter?(t.data.OPER_SYM_1=e.conditionFormData.valuesRange1,t.data.CMPR_VAL=e.conditionFormData.comeVal1,t.data.OPER_SYM_2=e.conditionFormData.valuesRange2,t.data.VALUE2=e.conditionFormData.comeVal2,t.data.CMPR_VAL_DATA_DICTRY_FLG="0"):(t.data.OPER_SYM_1=e.conditionFormData.operationalCharacter,t.data.CMPR_VAL=e.conditionFormData.preciseComeVal1,t.data.CMPR_VAL_DATA_DICTRY_FLG="1"),t.data.PUB_DICTRY_FLG=e.conditionFormData.fieldType,t.data.TRAN_CD="",t.data.COND_DESCR=e.conditionFormData.condtionDesc,t.data.OPER_TELR_NO=e.$store.getters.UserNum,t.data.OPER_DT=o.a.getDateTime("date"),t.data.OPER_RSN="V端新增",Object(i.a)(t).then(function(a){e.loading=!1,e.isShow=!1,e.$emit("refreshTable",a.RspInfo.Auth[0],e.option.type)}).catch(function(a){e.loading=!1,e.isShow=!1,console.log(a),e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})}})}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-dialog",{attrs:{title:"授权条件",visible:e.isShow,width:"800px",center:"","append-to-body":""},on:{hide:e.closeConditionDialog,"update:visible":function(a){e.isShow=a},show:e.openConditionDialog}},[t("aui-form",{ref:"conditionFormData",attrs:{size:"mini",model:e.conditionFormData,rules:e.conditionFormRules,"label-width":"120px","label-position":"right"}},[t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"模式ID",prop:"condtionModeId"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.conditionFormData.condtionModeId,callback:function(a){e.$set(e.conditionFormData,"condtionModeId",a)},expression:"conditionFormData.condtionModeId"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"条件说明",prop:"condtionDesc"}},[t("aui-input",{model:{value:e.conditionFormData.condtionDesc,callback:function(a){e.$set(e.conditionFormData,"condtionDesc",a)},expression:"conditionFormData.condtionDesc"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"字段类型",prop:"fieldType"}},[t("aui-select",{attrs:{placeholder:"请选择字段类型",clearable:""},on:{change:e.fieldTypeChange},model:{value:e.conditionFormData.fieldType,callback:function(a){e.$set(e.conditionFormData,"fieldType",a)},expression:"conditionFormData.fieldType"}},e._l(e.fieldTypeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[e.universalFieldShow?t("aui-form-item",{attrs:{label:"通用字段",prop:"universalField"}},[t("aui-select",{attrs:{placeholder:"请选择通用字段",clearable:"",filterable:""},model:{value:e.conditionFormData.universalField,callback:function(a){e.$set(e.conditionFormData,"universalField",a)},expression:"conditionFormData.universalField"}},e._l(e.universalFieldList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},[e.tranFieldShow?t("aui-form-item",{attrs:{label:"交易字段",prop:"tranField"}},[t("aui-select",{attrs:{placeholder:"请选择交易字段",clearable:""},model:{value:e.conditionFormData.tranField,callback:function(a){e.$set(e.conditionFormData,"tranField",a)},expression:"conditionFormData.tranField"}},e._l(e.tranFieldList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"操作符",prop:"operationalCharacter"}},[t("aui-select",{attrs:{placeholder:"请选择操作符",clearable:""},on:{change:e.operationalCharacterChange},model:{value:e.conditionFormData.operationalCharacter,callback:function(a){e.$set(e.conditionFormData,"operationalCharacter",a)},expression:"conditionFormData.operationalCharacter"}},e._l(e.operationalCharacterList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[e.valuesRange1Show?t("aui-form-item",{attrs:{label:"取值范围1",prop:"valuesRange1"}},[t("aui-select",{attrs:{placeholder:"请选择取值范围",clearable:""},model:{value:e.conditionFormData.valuesRange1,callback:function(a){e.$set(e.conditionFormData,"valuesRange1",a)},expression:"conditionFormData.valuesRange1"}},e._l(e.valuesRangeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},[e.valuesRangeShow?t("aui-form-item",{attrs:{label:"精确值",prop:"preciseComeVal1"}},[t("aui-input",{attrs:{placeholder:"请输入精确值"},model:{value:e.conditionFormData.preciseComeVal1,callback:function(a){e.$set(e.conditionFormData,"preciseComeVal1",a)},expression:"conditionFormData.preciseComeVal1"}})],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},[e.valuesRangeShow1?t("aui-form-item",{attrs:{label:"值1",prop:"comeVal1"}},[t("aui-input",{attrs:{placeholder:"请输入值"},model:{value:e.conditionFormData.comeVal1,callback:function(a){e.$set(e.conditionFormData,"comeVal1",a)},expression:"conditionFormData.comeVal1"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[e.valuesRange1Show?t("aui-form-item",{attrs:{label:"取值范围2",prop:"valuesRange2"}},[t("aui-select",{attrs:{placeholder:"请选择取值范围",clearable:""},model:{value:e.conditionFormData.valuesRange2,callback:function(a){e.$set(e.conditionFormData,"valuesRange2",a)},expression:"conditionFormData.valuesRange2"}},e._l(e.valuesRangeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1):e._e()],1),e._v(" "),t("aui-col",{attrs:{span:12}},[e.valuesRangeShow1?t("aui-form-item",{attrs:{label:"值2",prop:"comeVal2"}},[t("aui-input",{attrs:{placeholder:"请输入值"},model:{value:e.conditionFormData.comeVal2,callback:function(a){e.$set(e.conditionFormData,"comeVal2",a)},expression:"conditionFormData.comeVal2"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.isShow=!1}}},[e._v("取消")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitCondition}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]};var d=t("/Xao")(u,c,!1,function(e){t("e8YH")},"data-v-d5e5d6c4",null);a.a=d.exports},VcKm:function(e,a,t){"use strict";var i=t("AA3o"),o=t.n(i);a.a=function e(){o()(this,e),this.data={REQTYPE:""},this.CommCode="IBOperaManage",this.SceneCode="AuthMode",this.TransServiceCode="mg-afaservices-om/operationsControlmode"}},e8YH:function(e,a,t){var i=t("/Zr0");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("f41340cc",i,!0)},k4m6:function(e,a,t){"use strict";var i=t("AA3o"),o=t.n(i);a.a=function e(){o()(this,e),this.data={REQTYPE:""},this.CommCode="IBOperaManage",this.SceneCode="AuthInfo",this.TransServiceCode="mg-afaservices-om/operationsControlmode"}},r78N:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},tFhA:function(e,a,t){var i=t("40TP");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("1b7d3430",i,!0)},vGQW:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("syAl"),o=t("0oES"),n=t("0VOF"),r=t("qfSh"),s=(t("A8CQ"),t("AA3o")),l=t.n(s),u=function e(){l()(this,e),this.data={OperType:"Q",RType:""},this.BusiDataKey="",this.TransServiceCode="ib-dbcomm/dbComm"},c=t("3cXf"),d=t.n(c),p=t("pADA"),h=t("fCv1"),m=t("yq/x"),g=t("VNlJ"),f=function e(){l()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="queryBrnoByLegal",this.TransServiceCode="ib-dbcomm/dbComm"},v=(t("VcKm"),t("k4m6")),D=function e(){l()(this,e),this.data={REQTYPE:""},this.CommCode="IBOperaManage",this.SceneCode="AuthRuleCond",this.TransServiceCode="mg-afaservices-om/operationsControlmode"},b=function e(){l()(this,e),this.data={REQTYPE:""},this.CommCode="IBOperaManage",this.SceneCode="SearchAuthRuleCond",this.TransServiceCode="mg-afaservices-om/operationsControlmode"},_=t("6Zus"),y=t("3S5Q"),C={name:"maintainModeCondDialog",mixins:[],validators:{},props:{visiable:{type:Boolean,default:!1}},components:{maintainModeCond:y.default},data:function(){return{}},computed:{},watch:{},methods:{confirm:function(){var e=this.$refs.maintainModeCond.getCondModeData();this.$emit("confirm",e),this.$emit("update:visiable",!1)},cancle:function(){var e=this.$refs.maintainModeCond.getCondModeData();this.$emit("cancle",e),this.$emit("update:visiable",!1)},hide:function(){this.$refs.maintainModeCond.resetData()}},mounted:function(){},beforeDestroy:function(){}},w={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("aui-dialog",{staticClass:"maintainModeCond",attrs:{title:"模式","close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"show-close":!1,visible:e.visiable,width:"80%"},on:{"update:visible":function(a){e.visiable=a},hide:e.hide}},[t("maintain-mode-cond",{ref:"maintainModeCond",attrs:{isDialog:!0}}),e._v(" "),t("aui-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[t("aui-col",{attrs:{span:2}},[t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确认")])],1),e._v(" "),t("aui-col",{attrs:{span:2}},[t("aui-button",{attrs:{size:"mini"},on:{click:e.cancle}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var R={name:"create-rules",components:{maintainModeCondDialog:t("/Xao")(C,w,!1,function(e){t("AQn5")},"data-v-f6143e78",null).exports},data:function(){return{maintainModeCondDialogVisiable:!1,dialogList:{authModeDialog:m.a,authConditionDialog:g.a},authModeDialogOptions:{isShow:!1},authConditionDialogOptions:{isShow:!1},ruleNumShow:!1,newFormData:{ruleNum:"",RType:"",holidaySign:"N",applyChannel:"TE",applyLegal:"",branchNum:"",tranCode:"",effectiveSign:"1",ruleDes:""},tempShow:!1,choseData:[],dataTemp:[],ruleFormRules:{RType:[{required:!0,message:"请选择规则类型",trigger:"change"}],applyLegal:[{required:!0,message:"请选择适用法人",trigger:"change"}],branchNum:[{required:!0,message:"请选择适用机构",trigger:"blur"}],tranCode:[{required:!0,message:"请选择适用交易",trigger:"change"}],effectiveSign:[{required:!0,message:"请选择生效标志",trigger:"change"}],ruleDes:[{required:!0,message:"请输入规则说明",trigger:"blur"},{validator:Object(h.h)(100),trigger:"blur"}]},RuleTypeList:[{name:"授权",value:"AU"}],holidaySignList:[{name:"工作日",value:"W"},{name:"假日",value:"H"},{name:"不考虑",value:"N"}],effectiveSignList:[{name:"生效",value:"1"},{name:"不生效",value:"0"}],pubFieldList:[{name:"金额",value:"TX_AMT"},{name:"转现标志",value:"CASH_TRAN_FLG"},{name:"币种",value:"CUR_CD"}],tranFieldList:[],modeTableData:[],conditionTableData:[],mappgingTableData:[],mappgingTableDataDefault:[{PUB_DICTRY_NM:"TX_AMT",DICTRY_DESCR:"金额",PRIV_DICTRY_NM:"",PULDW_MAPG_DICTRY_NM:"金额"},{PUB_DICTRY_NM:"CASH_TRAN_FLG",DICTRY_DESCR:"现转标志",PRIV_DICTRY_NM:"",PULDW_MAPG_DICTRY_NM:"现转标志"},{PUB_DICTRY_NM:"CUR_CD",DICTRY_DESCR:"币种",PRIV_DICTRY_NM:"",PULDW_MAPG_DICTRY_NM:"币种"}]}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},methods:{selectModeConfirm:function(e){var a=this,t=e.modeTableData.filter(function(e){return!a.modeTableData.find(function(a){return a.MODE_NO==e.MODE_NO})});this.modeTableData=this.modeTableData.concat(t)},queryAuthInfo:function(){var e=this,a=new b;a.data.RULE_NO=this.option.currentRow.RULEID,a.data.TRAN_CD=this.option.currentRow.TRADESCOPE,Object(o.a)(a).then(function(a){e.setData(a.RspInfo)}).catch(function(a){console.log(a),e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})},setData:function(e){this.newFormData.ruleNum=e.AuthRule[0].RULE_NO,this.newFormData.RType=e.AuthRule[0].RULE_TYP_CD,this.newFormData.holidaySign=e.AuthRule[0].HOLI_FLG,this.newFormData.applyLegal=e.AuthRule[0].SUIT_LPR_SCP,this.newFormData.branchNum=e.AuthRule[0].SUIT_ORG_SCP,this.newFormData.tranCode=e.AuthRule[0].SUIT_TX_SCP,this.newFormData.effectiveSign=e.AuthRule[0].EFFT_FLG,this.newFormData.ruleDes=e.AuthRule[0].RULE_COMNT,this.modeTableData=e.AuthMode,e.KeyWords&&(this.mappgingTableData=e.KeyWords)},closeFlow:function(){this.ruleNumShow=!1,this.$refs.newFormData.resetFields(),this.$refs.newFormData.clearValidate(),this.newFormData.applyChannel="TE",this.newFormData.effectiveSign="1",this.modeTableData=[],this.conditionTableData=[],this.mappgingTableData=[]},openCreate:function(){this.mappgingTableData=JSON.parse(d()(this.mappgingTableDataDefault)),"add"!=this.option.opType&&(this.ruleNumShow=!0,this.queryAuthInfo())},dataFormat:function(e,a){return"1"==e[a.property]?"1-本地授权":"2"==e[a.property]?"2-远程授权":"3"==e[a.property]?"3-异终端授权":void 0},openChoseBranch:function(){var e=this;this.dataTemp=[],this.choseData=[],this.newFormData.branchNum="";var a=new f;a.data.lprno=this.newFormData.applyLegal,a.data.CurtPage="1",a.data.PageSize="50000000",a.data.StartRows="",Object(o.a)(a).then(function(a){e.dataTemp=a.RspInfo.Result||[]}).catch(function(a){console.log(a),e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})},setBranch:function(){var e=this;if(""==this.newFormData.applyLegal)return!1;"0000"==this.newFormData.applyLegal?this.newFormData.branchNum="*":this.$aui.confirm.show("该规则是否适用于所选法人下的所有机构!","提示",{confirmButtonText:"否",cancelButtonText:"是",type:"warning"}).then(function(){e.dataTemp=[],e.choseData=[],e.tempShow=!0}).catch(function(){e.newFormData.branchNum="*"})},subBranch:function(){if("0"!=this.choseData.length){this.tempShow=!1;for(var e="",a=0;a<this.choseData.length;a++)e=""!=e?e+","+this.choseData[a]:this.choseData[0];this.$set(this.newFormData,"branchNum",e)}else this.$aui.message.show({type:"warning",message:"请选择适用机构!"})},closeChoseBranch:function(){this.dataTemp=[]},addMode:function(){this.authModeDialogOptions.isShow=!0,this.authModeDialogOptions.type="add"},editMode:function(e,a){this.authModeDialogOptions.isShow=!0,this.authModeDialogOptions.type="edit",this.authModeDialogOptions.rowdata=a},delMode:function(e,a){this.modeTableData.splice(e,1),0==this.modeTableData.length&&(this.conditionTableData=[])},selectMode:function(){this.maintainModeCondDialogVisiable=!0},rowClick:function(e,a,t,i){var n=this,r=new _.a;r.data.REQTYPE="Cond",r.data.MODE_NO=e.MODE_NO,Object(o.a)(r).then(function(e){n.conditionTableData=e.RspInfo.AuthCond||[]}).catch(function(e){n.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})},returnModeInfo:function(e,a){if("edit"==a){var t=this.modeTableData.findIndex(function(a){return a.MODE_NO==e.MODE_NO});this.modeTableData.splice(t,1,e)}else this.modeTableData.push(e)},addCondition:function(e){this.authConditionDialogOptions.isShow=!0,this.authConditionDialogOptions.type="add",this.authConditionDialogOptions.rowdata=e},delCondition:function(e,a){var t=this;this.$aui.confirm.show("是否确认删除该模式!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=new v.a;i.data.REQTYPE="D",i.data.OPRTN_COND_NO=a.OPRTN_COND_NO,i.data.DICTRY_NM=a.DICTRY_NM,i.data.OPER_SYM_1=a.OPER_SYM_1,i.data.TRAN_CD=a.TRAN_CD,Object(o.a)(i).then(function(a){t.conditionTableData.splice(e,1)}).catch(function(e){console.log(e),t.$aui.message.show({type:"error",message:"错误信息："+e.SYS_HEAD.ReturnMessage})})}).catch(function(){})},returnConditionInfo:function(e,a){if("edit"==a){var t=this.conditionTableData.findIndex(function(a){return a.OPRTN_COND_NO==e.OPRTN_COND_NO});this.conditionTableData.splice(t,1,e)}else this.conditionTableData.push(e)},submitRule:function(){var e=this;this.$refs.newFormData.validate(function(a){if(a){var t=new D;t.data.REQTYPE="add"==e.option.opType?"A":"U",t.data.RULE_NO=e.newFormData.ruleNum,t.data.RULE_TYP_CD=e.newFormData.RType,t.data.HOLI_FLG=e.newFormData.holidaySign,t.data.RULE_TRI_POSITION="1",t.data.SUIT_CHNL_SCP=e.newFormData.applyChannel,t.data.SUIT_LPR_SCP=e.newFormData.applyLegal,t.data.SUIT_ORG_SCP=e.newFormData.branchNum,t.data.SUIT_TX_SCP=e.newFormData.tranCode,t.data.RULE_COMNT=e.newFormData.ruleDes,t.data.EFFT_FLG=e.newFormData.effectiveSign,t.data.OPER_TELR_NO=e.$store.getters.UserNum,t.data.OPER_DT=p.a.getDateTime("date"),t.data.OPER_RSN="V端"+e.option.title,t.data.modeList=e.modeTableData;var i=e.mappgingTableData.filter(function(a){return!e.mappgingTableData.find(function(e){return""==e.PRIV_DICTRY_NM})});t.data.keywordsList=i,console.log(i),Object(o.a)(t).then(function(a){e.isShow=!1,e.$aui.message.show({type:"success",message:e.option.title+"成功！"}),e.$emit("refreshTable")}).catch(function(a){e.$aui.message.show({type:"error",message:e.option.title+"失败："+a.SYS_HEAD.ReturnMessage}),console.log(a)})}else e.$aui.message.show({type:"warning",message:"请输入合法的规则信息！"})})}}},T={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("aui-dialog",{attrs:{title:e.option.title,visible:e.isShow,width:"80%",center:""},on:{hide:e.closeFlow,"update:visible":function(a){e.isShow=a},show:e.openCreate}},[t("aui-card",{staticStyle:{"margin-top":"10px"},attrs:{header:"授权规则信息"}},[t("aui-form",{ref:"newFormData",attrs:{size:"mini",model:e.newFormData,rules:e.ruleFormRules,"label-width":"120px","label-position":"right"}},[t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[e.ruleNumShow?t("aui-form-item",{attrs:{label:"规则编号",prop:"ruleNum"}},[t("aui-input",{attrs:{disabled:""},model:{value:e.newFormData.ruleNum,callback:function(a){e.$set(e.newFormData,"ruleNum",a)},expression:"newFormData.ruleNum"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"规则类型",prop:"RType"}},[t("aui-select",{attrs:{placeholder:"请选择规则类型",disabled:e.option.isDisabled},model:{value:e.newFormData.RType,callback:function(a){e.$set(e.newFormData,"RType",a)},expression:"newFormData.RType"}},e._l(e.RuleTypeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"适用渠道",prop:"applyChannel"}},[t("aui-select",{attrs:{placeholder:"请选择适用渠道",disabled:""},model:{value:e.newFormData.applyChannel,callback:function(a){e.$set(e.newFormData,"applyChannel",a)},expression:"newFormData.applyChannel"}},e._l(e.option.applyChannelList,function(e){return t("aui-option",{key:e.AppNum,attrs:{label:e.AppNum+"-"+e.AppName,value:e.AppNum}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"适用法人",prop:"applyLegal"}},[t("aui-select",{attrs:{placeholder:"请选择适用法人",clearable:"",filterable:"",disabled:e.option.isDisabled},on:{change:e.setBranch},model:{value:e.newFormData.applyLegal,callback:function(a){e.$set(e.newFormData,"applyLegal",a)},expression:"newFormData.applyLegal"}},e._l(e.option.applyLegalList,function(e){return t("aui-option",{key:e.LegalPersonNum,attrs:{label:e.LegalPersonNum+"-"+e.LegalPersonName,value:e.LegalPersonNum}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"适用机构",prop:"branchNum"}},[t("aui-input",{attrs:{placeholder:"请输入适用机构",disabled:""},model:{value:e.newFormData.branchNum,callback:function(a){e.$set(e.newFormData,"branchNum",a)},expression:"newFormData.branchNum"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"适用交易",prop:"tranCode"}},[t("aui-select",{attrs:{placeholder:"请选择适用交易",filterable:"",clearable:"",disabled:e.option.isDisabled},model:{value:e.newFormData.tranCode,callback:function(a){e.$set(e.newFormData,"tranCode",a)},expression:"newFormData.tranCode"}},e._l(e.option.tranCodeList,function(e){return t("aui-option",{key:e.MENU_NO,attrs:{label:e.MENU_NO+"-"+e.MENU_NM+"("+e.BIZ_MENU_NO+")",value:e.MENU_NO}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"生效标志",prop:"effectiveSign"}},[t("aui-select",{attrs:{placeholder:"请选择生效标志",disabled:e.option.isDisabled},model:{value:e.newFormData.effectiveSign,callback:function(a){e.$set(e.newFormData,"effectiveSign",a)},expression:"newFormData.effectiveSign"}},e._l(e.effectiveSignList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"规则说明",prop:"ruleDes"}},[t("aui-input",{attrs:{placeholder:"请输入规则说明",disabled:e.option.isDisabled},model:{value:e.newFormData.ruleDes,callback:function(a){e.$set(e.newFormData,"ruleDes",a)},expression:"newFormData.ruleDes"}})],1)],1)],1)],1)],1),e._v(" "),t("aui-card",{attrs:{header:"授权模式信息"}},[e.option.isDisabled?e._e():t("aui-row",[t("aui-col",{attrs:{lg:4,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:e.addMode}},[e._v("新增模式")])],1),e._v(" "),t("aui-col",{attrs:{lg:4,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:e.selectMode}},[e._v("选择已有模式")])],1)],1),e._v(" "),t("aui-table",{ref:"modeTableData",staticStyle:{width:"100%"},attrs:{data:e.modeTableData},on:{"row-click":e.rowClick}},[t("aui-table-column",{attrs:{property:"MODE_NO",label:"模式编号"}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_TYP_CD",label:"授权类型",formatter:e.dataFormat}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_LVL_CD",label:"授权级别"}}),e._v(" "),t("aui-table-column",{attrs:{property:"AUTH_DESCR",label:"授权原因","show-overflow-tooltip":""}}),e._v(" "),t("aui-table-column",{attrs:{property:"REMRK_1",label:"模式说明"}}),e._v(" "),e.option.isDisabled?e._e():t("aui-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.editMode(a.$index,a.row)}}},[e._v("修改")]),e._v(" "),t("aui-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.delMode(a.$index,a.row)}}},[e._v("删除")]),e._v(" "),t("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addCondition(a.row)}}},[e._v("新增条件")])]}}])})],1)],1),e._v(" "),t("aui-card",{attrs:{header:"授权条件信息"}},[t("aui-table",{ref:"conditionTableData",staticStyle:{width:"100%"},attrs:{data:e.conditionTableData}},[t("aui-table-column",{attrs:{property:"OPRTN_COND_NO",label:"条件编号"}}),e._v(" "),t("aui-table-column",{attrs:{property:"DICTRY_NM",label:"字典名称"}}),e._v(" "),t("aui-table-column",{attrs:{property:"OPER_SYM_1",label:"运算符1"}}),e._v(" "),t("aui-table-column",{attrs:{property:"CMPR_VAL",label:"比较值1"}}),e._v(" "),t("aui-table-column",{attrs:{property:"OPER_SYM_2",label:"运算符2"}}),e._v(" "),t("aui-table-column",{attrs:{property:"VALUE2",label:"比较值2"}})],1)],1),e._v(" "),t("aui-card",{attrs:{header:"字段映射信息"}},[t("aui-table",{ref:"mappgingTableData",staticStyle:{width:"100%"},attrs:{data:e.mappgingTableData}},[t("aui-table-column",{attrs:{label:"公共字段"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-select",{attrs:{placeholder:"请选择公共字段",disabled:""},model:{value:a.row.PUB_DICTRY_NM,callback:function(t){e.$set(a.row,"PUB_DICTRY_NM",t)},expression:"scope.row.PUB_DICTRY_NM"}},e._l(e.pubFieldList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))]}}])}),e._v(" "),t("aui-table-column",{attrs:{label:"交易字段"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-select",{attrs:{placeholder:"请选择交易字段",disabled:e.option.isDisabled,clearable:""},model:{value:a.row.PRIV_DICTRY_NM,callback:function(t){e.$set(a.row,"PRIV_DICTRY_NM",t)},expression:"scope.row.PRIV_DICTRY_NM"}},e._l(e.pubFieldList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))]}}])}),e._v(" "),t("aui-table-column",{attrs:{label:"字段映射说明"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("aui-input",{attrs:{placeholder:"字段映射说明",disabled:e.option.isDisabled},model:{value:a.row.PULDW_MAPG_DICTRY_NM,callback:function(t){e.$set(a.row,"PULDW_MAPG_DICTRY_NM",t)},expression:"scope.row.PULDW_MAPG_DICTRY_NM"}})]}}])})],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.isShow=!1}}},[e._v(e._s("detail"==e.option.opType?"关闭":"取消"))]),e._v(" "),e.option.isDisabled?e._e():t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitRule}},[e._v("确认")])],1)],1),e._v(" "),t("aui-dialog",{attrs:{title:"选择适用机构",visible:e.tempShow,"close-on-click-modal":!0},on:{hide:e.closeChoseBranch,"update:visible":function(a){e.tempShow=a},show:e.openChoseBranch}},[t("aui-card",[t("aui-transfer",{attrs:{data:e.dataTemp,titles:["机构","已选择机构"],filterable:""},model:{value:e.choseData,callback:function(a){e.choseData=a},expression:"choseData"}})],1),e._v(" "),t("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.subBranch}},[e._v("确认")]),e._v(" "),t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.tempShow=!1}}},[e._v("取消")])],1)],1),e._v(" "),t("keep-alive",[t(e.dialogList.authModeDialog,{tag:"component",attrs:{option:e.authModeDialogOptions},on:{refreshTable:e.returnModeInfo}})],1),e._v(" "),t("keep-alive",[t(e.dialogList.authConditionDialog,{tag:"component",attrs:{option:e.authConditionDialogOptions},on:{refreshTable:e.returnConditionInfo}})],1),e._v(" "),t("maintainModeCondDialog",{attrs:{visiable:e.maintainModeCondDialogVisiable},on:{"update:visiable":function(a){e.maintainModeCondDialogVisiable=a},confirm:e.selectModeConfirm}})],1)},staticRenderFns:[]};var S=t("/Xao")(R,T,!1,function(e){t("w7t0")},"data-v-8b737236",null).exports,F=t("tzsN"),O=t("lC5x"),N=t.n(O),M=t("J0Oq"),L=t.n(M),k={name:"selectTree",data:function(){return{sameOrgItems:[],treeData:null,keySearch:"",selectedStr:""}},props:{checkedIds:[Array,String],props:{type:Object,default:function(){return{id:"orgno",label:"cname",children:"children",isLeaf:"leaf"}}},singleCheck:[String,Boolean],placeholder:String,disabled:Boolean,isStrictly:{type:Boolean,default:!0}},methods:{arrToString:function(){var e=[];this.$refs.tree.getCheckedNodes().map(function(a){e.push(a[this.props.label])}.bind(this)),this.selectedStr=e.join(",")},checkChange:function(){},checkBoxHandle:function(e,a){var t=this;this.$nextTick(function(){1!=t.singleCheck&&"true"!=t.singleCheck||t.$refs.tree.getCheckedKeys().length&&t.$refs.tree.setCheckedNodes([e]),t.$emit("checkKeys",t.$refs.tree.getCheckedKeys()),t.$emit("select-check",t.$refs.tree.getCheckedNodes())})},filterNode:function(e,a){var t=this.props.id;return!e||(-1!==a[this.props.label].indexOf(e)||!!a[t]&&-1!==a[t].indexOf(e))},closePanel:function(){this.keySearch=""},findData:function(e,a){for(var t=0;t<e.length;t++){var i=e[t];if(i.orgno===a){var o=i.children.map(function(e){return{attr:e.attr,children:[],cname:e.cname,effedate:e.effedate,orglevel:e.orglevel,orgnm:e.orgnm,orgno:e.orgno,superno:e.superno}});this.sameOrgItems.push(o)}else this.findData(i.children||[],a)}},loadNode1:function(e,a){var t=this;return L()(N.a.mark(function i(){var o,n,r;return N.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t.treeData){i.next=3;break}return i.next=3,t.queryBranchNum();case 3:if(0!==e.level){i.next=10;break}return o=(o=t.treeData.filter(function(e){return"0"==e.superno})).map(function(e){var a=t.treeData.find(function(a){return a.superno==e.orgno});return{attr:e.attr,cname:e.cname,effedate:e.effedate,orglevel:e.orglevel,orgnm:e.orgnm,orgno:e.orgno,superno:e.superno,leaf:!Boolean(a)}}),i.abrupt("return",a(o));case 10:return n=e.data.orgno,r=(r=t.treeData.filter(function(e){return e.superno==n})).map(function(e){var a=t.treeData.find(function(a){return a.superno==e.orgno});return{attr:e.attr,cname:e.cname,effedate:e.effedate,orglevel:e.orglevel,orgnm:e.orgnm,orgno:e.orgno,superno:e.superno,leaf:!Boolean(a)}}),i.abrupt("return",a(r));case 14:case"end":return i.stop()}},i,t)}))()},queryBranchNum:function(){var e=this;return L()(N.a.mark(function a(){var t;return N.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(t=new n.a).data.orgno=e.$store.getters.BranchNum,a.next=4,Object(o.a)(t).then(function(a){e.treeData=a.RspInfo.Result}).catch(function(a){e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)});case 4:a.sent;case 5:case"end":return a.stop()}},a,e)}))()}},model:{prop:"checkedIds",event:"checkKeys"},watch:{keySearch:function(e){this.$refs.tree.filter(e)},treeData:function(){this.arrToString()},checkedIds:function(){"string"==typeof this.checkedIds?this.$refs.tree.setCheckedKeys([this.checkedIds]):this.$refs.tree.setCheckedKeys(this.checkedIds),this.arrToString()},isStrictly:function(){return this.isStrictly},deep:!0},mounted:function(){this.arrToString(),window.tree=this},updated:function(){this.arrToString()}},E={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("aui-popover",{attrs:{placement:"bottom-start",disabled:e.disabled,"min-width":"",trigger:"click"},on:{hide:e.closePanel}},[t("div",{staticStyle:{"min-width":"150px","min-height":"200px","max-height":"300px",overflow:"auto"}},[t("aui-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.keySearch,callback:function(a){e.keySearch=a},expression:"keySearch"}}),e._v(" "),t("aui-tree",{ref:"tree",attrs:{"node-key":e.props.id,"show-checkbox":"","expand-on-click-node":!1,props:e.props,load:e.loadNode1,lazy:!0},on:{check:e.checkBoxHandle,"check-change":e.checkChange}})],1),e._v(" "),t("aui-input",{attrs:{slot:"reference",placeholder:e.placeholder||"请选择",disabled:e.disabled,trigger:"focus",readonly:""},slot:"reference",model:{value:e.selectedStr,callback:function(a){e.selectedStr=a},expression:"selectedStr"}})],1)},staticRenderFns:[]};var A=t("/Xao")(k,E,!1,function(e){t("A8Vt")},"data-v-2c713048",null).exports,x=t("+ilI"),P=function e(){l()(this,e),this.data={BusiOper:"Q"},this.BusiDataKey="queryTETradeCode",this.TransServiceCode="ib-dbcomm/dbComm"},I={components:{selectTree:F.a,selectTreeExt:A},data:function(){return{STATUS:{0:"0-不生效",1:"1-生效"},holidaySignList:[{name:"工作日",value:"W"},{name:"假日",value:"H"},{name:"不考虑",value:"N"}],HOLIDAYFLAG:{W:"W-工作日",H:"H-假日",N:"N-不考虑"},applyChannelList:[],applyLegalList:[],branchNum:[],brnoList:[],tranCodeList:[],RuleTypeList:[{name:"授权",value:"AU"}],rules:{},total:0,loading:!1,tableData:[],isDisabledDel:!1,currentPage:1,pageSize:i.a.get("PageSize"),queryForm:{branchNum:[],holidaySign:"",applyChannel:"",applyLegal:"",tranCode:"",RType:""},currentRow:[],dialogOptions:{isShow:!1},dialogList:{rulesMaintenanceDialog:S},dialogOptionsupdate:{isShow:!1,currentRow:[]}}},created:function(){this.queryForm.RType="AU",this.initChannel(),this.initLegalPerson(),this.queryBranchNum(),this.initTradeList()},methods:{initChannel:function(){var e=this;this.loading=!0;var a=new r.a;a.data.UserNum=this.$store.getters.UserNum,Object(o.a)(a).then(function(a){e.loading=!1,e.applyChannelList=a.RspInfo.Result}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage})})},initLegalPerson:function(){var e=this,a=new x.a;Object(o.a)(a).then(function(a){e.applyLegalList=a.RspInfo.Result}).catch(function(e){})},queryBranchNum:function(){var e=this;this.loading=!0;var a=new n.a;a.data.orgno=this.$store.getters.BranchNum,Object(o.a)(a).then(function(a){e.loading=!1,e.branchNum=a.RspInfo.Result||[],e.brnoList=a.RspInfo.Result||[],e.permission=p.a.objArray2Hash(e.branchNum,"orgno"),e.brnoMap=a.RspInfo.orgMap||{},e.branchNum=p.a.formatTreeData(e.branchNum,"orgno","superno")}).catch(function(a){e.loading=!1,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),console.error("查询错误",a)})},initTradeList:function(){var e=this,a=new P;a.data.CurtPage="1",a.data.PageSize="50000000",a.data.StartRows="",Object(o.a)(a).then(function(a){e.tranCodeList=a.RspInfo.Result||[]}).catch(function(e){console.log(e)})},clearForm:function(){this.$refs.queryForm.resetFields()},dataFormat:function(e,a){if("STATUS"==a.property)return this.STATUS[e[a.property]];if("LEGALSCOPE"==a.property)for(var t=0;t<this.applyLegalList.length;t++)if(e[a.property]==this.applyLegalList[t].LegalPersonNum)return this.applyLegalList[t].LegalPersonNum+"-"+this.applyLegalList[t].LegalPersonName;if("RULETYPE"==a.property)for(var i=0;i<this.RuleTypeList.length;i++)if(e[a.property]==this.RuleTypeList[i].value)return this.RuleTypeList[i].value+"-"+this.RuleTypeList[i].name;if("HOLIDAYFLAG"==a.property)return this.HOLIDAYFLAG[e[a.property]];if("CHANNELSCOPE"==a.property)for(var o=0;o<this.applyChannelList.length;o++)if(e[a.property]==this.applyChannelList[o].AppNum)return this.applyChannelList[o].AppNum+"-"+this.applyChannelList[o].AppName;return"BRNOSCOPE"==a.property?e[a.property].includes("*")?"*-所有机构":e[a.property]+"-"+this.brnoMap[e[a.property]]:void 0},query:function(){var e=this;this.loading=!0;var a=new u;a.BusiDataKey="T011206_quy",a.data.OperType="Q",a.data.Flg=this.queryForm.holidaySign,a.data.Src=this.queryForm.applyChannel,a.data.RngC=this.queryForm.applyLegal,a.data.BrahNumC=0==this.queryForm.branchNum.length?"*":this.queryForm.branchNum[0],a.data.RngC2=this.queryForm.tranCode,a.data.Tp=this.queryForm.RType,a.data.CurtPage=this.currentPage,a.data.PageSize=this.pageSize,a.data.StartRows=(this.currentPage-1)*this.pageSize,Object(o.a)(a).then(function(a){e.loading=!1,e.tableData=a.RspInfo.Result||[],e.total=a.RspInfo.totalNum}).catch(function(a){e.tableData=[],e.total=0,e.$aui.message.show({type:"warning",message:a.SYS_HEAD.ReturnMessage}),e.loading=!1,console.log(a)})},delData:function(){var e=this;this.$aui.confirm.show("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.Del()}).catch(function(){e.$aui.message.show({type:"info",message:"已取消删除"})})},Del:function(){var e=this;this.loading=!0;var a=new D;a.data.REQTYPE="D",a.data.RULE_NO=this.currentRow[0].RULEID,Object(o.a)(a).then(function(a){e.loading=!1,e.$aui.message.show({type:"success",message:"删除成功!"}),e.query()}).catch(function(a){e.$aui.message.show({type:"warning",message:"删除失败!"}),e.loading=!1})},selectList:function(e){this.currentRow=e,1==e.length?this.isDisabledDel=!0:e.length>1?this.$refs.tableData.toggleRowSelection(e[0]):this.isDisabledDel=!1},addData:function(){this.dialogOptions.isShow=!0,this.dialogOptions.opType="add",this.dialogOptions.title="新增授权规则",this.dialogOptions.isDisabled=!1,this.dialogOptions.currentRow=this.currentRow[0],this.dialogOptions.applyChannelList=this.applyChannelList,this.dialogOptions.applyLegalList=this.applyLegalList,this.dialogOptions.tranCodeList=this.tranCodeList},updateData:function(){this.dialogOptions.isShow=!0,this.dialogOptions.opType="mod",this.dialogOptions.title="修改授权规则",this.dialogOptions.isDisabled=!1,this.dialogOptions.currentRow=this.currentRow[0],this.dialogOptions.applyChannelList=this.applyChannelList,this.dialogOptions.applyLegalList=this.applyLegalList,this.dialogOptions.tranCodeList=this.tranCodeList},detailInfo:function(){this.dialogOptions.isShow=!0,this.dialogOptions.opType="detail",this.dialogOptions.title="授权规则详情",this.dialogOptions.isDisabled=!0,this.dialogOptions.currentRow=this.currentRow[0],this.dialogOptions.applyChannelList=this.applyChannelList,this.dialogOptions.applyLegalList=this.applyLegalList,this.dialogOptions.tranCodeList=this.tranCodeList},handleCurrentChange:function(e){this.currentPage=e,this.query()}}},$={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"by-trade-type",attrs:{"element-loading-text":"加载中。。。"}},[t("div",[t("aui-card",{staticClass:"type-info-box-card"},[t("aui-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules,size:"mini","label-position":"top"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"节假日标志",prop:"holidaySign"}},[t("aui-select",{attrs:{placeholder:"请选择节假日标志"},model:{value:e.queryForm.holidaySign,callback:function(a){e.$set(e.queryForm,"holidaySign",a)},expression:"queryForm.holidaySign"}},e._l(e.holidaySignList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"适用渠道",prop:"applyChannel"}},[t("aui-select",{attrs:{placeholder:"请选择适用渠道"},model:{value:e.queryForm.applyChannel,callback:function(a){e.$set(e.queryForm,"applyChannel",a)},expression:"queryForm.applyChannel"}},e._l(e.applyChannelList,function(e){return t("aui-option",{key:e.AppNum,attrs:{label:e.AppNum+"-"+e.AppName,value:e.AppNum}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"适用法人",prop:"applyLegal"}},[t("aui-select",{attrs:{placeholder:"请选择适用法人",filterable:""},model:{value:e.queryForm.applyLegal,callback:function(a){e.$set(e.queryForm,"applyLegal",a)},expression:"queryForm.applyLegal"}},e._l(e.applyLegalList,function(e){return t("aui-option",{key:e.LegalPersonNum,attrs:{label:e.LegalPersonNum+"-"+e.LegalPersonName,value:e.LegalPersonNum}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"适用机构ext",prop:"branchNumExt"}},[t("select-tree-ext",{attrs:{"single-check":!0,placeholder:"请选择机构ext"},model:{value:e.queryForm.branchNumExt,callback:function(a){e.$set(e.queryForm,"branchNumExt",a)},expression:"queryForm.branchNumExt"}})],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"适用交易",prop:"tranCode"}},[t("aui-select",{attrs:{placeholder:"请输入适用交易",filterable:"",clearable:""},model:{value:e.queryForm.tranCode,callback:function(a){e.$set(e.queryForm,"tranCode",a)},expression:"queryForm.tranCode"}},e._l(e.tranCodeList,function(e){return t("aui-option",{key:e.MENU_NO,attrs:{label:e.MENU_NO+"-"+e.MENU_NM+"("+e.BIZ_MENU_NO+")",value:e.MENU_NO}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"规则类型",prop:"RType"}},[t("aui-select",{attrs:{placeholder:"请选择规则类型"},model:{value:e.queryForm.RType,callback:function(a){e.$set(e.queryForm,"RType",a)},expression:"queryForm.RType"}},e._l(e.RuleTypeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:e.clearForm}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("aui-card",{staticClass:"type-info-bottom"},[t("aui-row",[t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus",disabled:0!=e.currentRow.length},on:{click:e.addData}},[e._v("新增")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:1!=e.currentRow.length},on:{click:e.updateData}},[e._v("修改")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:1!=e.currentRow.length},on:{click:e.delData}},[e._v("删除")])],1),e._v(" "),t("aui-col",{attrs:{lg:2,md:3}},[t("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-document",disabled:1!=e.currentRow.length},on:{click:e.detailInfo}},[e._v("详情")])],1)],1),e._v(" "),t("aui-table",{ref:"tableData",staticClass:"tableMarginTop",attrs:{data:e.tableData,border:"","max-height":"400",width:"100%","header-row-class-name":"tableHeaderClass","highlight-current-row":""},on:{"selection-change":e.selectList}},[t("aui-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"RULETYPE",label:"规则类型",formatter:e.dataFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"HOLIDAYFLAG",label:"节假日标志",formatter:e.dataFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"CHANNELSCOPE",label:"适用渠道",formatter:e.dataFormat}}),e._v(" "),t("aui-table-column",{attrs:{prop:"LEGALSCOPE",formatter:e.dataFormat,label:"适用法人"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"BRNOSCOPE",formatter:e.dataFormat,label:"适用机构"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"TRADESCOPE",label:"适用交易"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"STATUS",formatter:e.dataFormat,label:"生效标志"}}),e._v(" "),t("aui-table-column",{attrs:{prop:"PURPOSE",label:"规则说明"}})],1),e._v(" "),t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("aui-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),t("keep-alive",[t(e.dialogList.rulesMaintenanceDialog,{tag:"component",attrs:{option:e.dialogOptions},on:{refreshTable:e.query}})],1)],1)},staticRenderFns:[]};var Y=t("/Xao")(I,$,!1,function(e){t("GhLi")},"data-v-696b4ea6",null);a.default=Y.exports},vZSM:function(e,a,t){(e.exports=t("BkJT")(!1)).push([e.i,"",""])},w7t0:function(e,a,t){var i=t("/9B3");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("8bSs")("1f810d0b",i,!0)},"yq/x":function(e,a,t){"use strict";var i=t("0oES"),o=t("fCv1"),n=t("VcKm"),r={data:function(){return{loading:!1,authModeIdShow:!1,modeFormData:{authModeId:"",authorizeType:"",authorizeLvl:"",authorizeReason:"",authorizeRemark:""},modeFormRules:{authorizeType:[{required:!0,message:"请选择授权类型",trigger:"change"}],authorizeLvl:[{required:!0,message:"请选择授权级别",trigger:"change"}],authorizeReason:[{required:!0,message:"请输入授权原因",trigger:"blur"},{validator:Object(o.h)(100),trigger:"blur"}],authorizeRemark:[{required:!0,message:"请输入模式说明",trigger:"blur"},{validator:Object(o.h)(100),trigger:"blur"}]},AuthorizeTypeList:[{name:"本地授权",value:"1"},{name:"远程授权",value:"2"},{name:"异终端授权",value:"3"}],AuthorizeLvlList:[{name:"一级授权",value:"1"},{name:"二级授权",value:"2"},{name:"三级授权",value:"3"},{name:"四级授权",value:"4"},{name:"五级授权",value:"5"},{name:"六级授权",value:"6"},{name:"七级授权",value:"7"},{name:"八级授权",value:"8"},{name:"九级授权",value:"9"}]}},props:{option:Object},computed:{isShow:{get:function(){return this.option.isShow},set:function(e){this.option.isShow=e}}},methods:{closeModeDialog:function(){this.authModeIdShow=!1,this.$refs.modeFormData.resetFields(),this.$refs.modeFormData.clearValidate()},openModeDialog:function(){"edit"==this.option.type&&(this.authModeIdShow=!0,this.modeFormData.authModeId=this.option.rowdata.MODE_NO,this.modeFormData.authorizeType=this.option.rowdata.AUTH_TYP_CD,this.modeFormData.authorizeLvl=this.option.rowdata.AUTH_LVL_CD,this.modeFormData.authorizeReason=this.option.rowdata.AUTH_DESCR,this.modeFormData.authorizeRemark=this.option.rowdata.REMRK_1)},submitMode:function(){var e=this;this.$refs.modeFormData.validate(function(a){if(a){e.loading=!0;var t=new n.a;"edit"==e.option.type?(t.data.REQTYPE="U",t.data.MODE_NO=e.modeFormData.authModeId):t.data.REQTYPE="A",t.data.AUTH_TYP_CD=e.modeFormData.authorizeType,t.data.AUTH_LVL_CD=e.modeFormData.authorizeLvl,t.data.AUTH_DESCR=e.modeFormData.authorizeReason,t.data.REMRK_1=e.modeFormData.authorizeRemark,Object(i.a)(t).then(function(a){e.loading=!1,e.isShow=!1,e.$emit("refreshTable",a.RspInfo.Auth[0],e.option.type)}).catch(function(a){e.loading=!1,console.log(a),e.$aui.message.show({type:"error",message:"错误信息："+a.SYS_HEAD.ReturnMessage})})}})}}},s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[t("aui-dialog",{attrs:{title:"授权模式",visible:e.isShow,width:"800px",center:"","append-to-body":""},on:{hide:e.closeModeDialog,"update:visible":function(a){e.isShow=a},show:e.openModeDialog}},[t("aui-form",{ref:"modeFormData",attrs:{size:"mini",model:e.modeFormData,rules:e.modeFormRules,"label-width":"120px","label-position":"right"}},[t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[e.authModeIdShow?t("aui-form-item",{attrs:{label:"模式ID",prop:"authModeId"}},[t("aui-input",{attrs:{placeholder:"请输入授权原因",disabled:""},model:{value:e.modeFormData.authModeId,callback:function(a){e.$set(e.modeFormData,"authModeId",a)},expression:"modeFormData.authModeId"}})],1):e._e()],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"授权类型",prop:"authorizeType"}},[t("aui-select",{attrs:{placeholder:"请选择授权类型",clearable:""},model:{value:e.modeFormData.authorizeType,callback:function(a){e.$set(e.modeFormData,"authorizeType",a)},expression:"modeFormData.authorizeType"}},e._l(e.AuthorizeTypeList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.value+"-"+e.name,value:e.value}})}))],1)],1),e._v(" "),t("aui-col",{attrs:{span:12}},[t("aui-form-item",{attrs:{label:"授权级别",prop:"authorizeLvl"}},[t("aui-select",{attrs:{placeholder:"请选择授权级别",clearable:""},model:{value:e.modeFormData.authorizeLvl,callback:function(a){e.$set(e.modeFormData,"authorizeLvl",a)},expression:"modeFormData.authorizeLvl"}},e._l(e.AuthorizeLvlList,function(e){return t("aui-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"授权原因",prop:"authorizeReason"}},[t("aui-input",{attrs:{placeholder:"请输入授权原因"},model:{value:e.modeFormData.authorizeReason,callback:function(a){e.$set(e.modeFormData,"authorizeReason",a)},expression:"modeFormData.authorizeReason"}})],1)],1)],1),e._v(" "),t("aui-row",{attrs:{gutter:20}},[t("aui-col",{attrs:{span:24}},[t("aui-form-item",{attrs:{label:"模式说明",prop:"authorizeRemark"}},[t("aui-input",{attrs:{placeholder:"请输入模式说明"},model:{value:e.modeFormData.authorizeRemark,callback:function(a){e.$set(e.modeFormData,"authorizeRemark",a)},expression:"modeFormData.authorizeRemark"}})],1)],1)],1),e._v(" "),t("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[t("aui-button",{attrs:{size:"mini"},on:{click:function(a){e.isShow=!1}}},[e._v("取消")]),e._v(" "),t("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitMode}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]};var l=t("/Xao")(r,s,!1,function(e){t("7E7O")},"data-v-373e66ca",null);a.a=l.exports}});