webpackJsonp([106],{"5ICo":function(e,t,a){var i=a("kNsU");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("52c61eb4",i,!0)},BkBC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("0oES"),s=a("qfSh"),n=a("AA3o"),r=a.n(n),o=function e(){r()(this,e),this.data={AppNum:"",LegalPersonNum:""},this.CommCode="IBDeviceInfoManage",this.SceneCode="TranAndDvcPersassdQuy",this.TransServiceCode="mg-afaservices-dev/tranAndDvcPersassdQuy"},c=function e(){r()(this,e),this.data={AppNum:"",PostList:""},this.CommCode="IBDeviceManagement",this.SceneCode="DevAppPrivsCom",this.TransServiceCode="mg-afaservices-dev/devAppPrivscom"},d={data:function(){return{appQueryList:[],permissionList:[],devUseMgrQueryForm:{AppNum:void 0},loading:!1,checkList:[],isDisabled:!0,rules:{AppNum:[{required:!0,message:"请选择应用编号",trigger:"change"}]}}},created:function(){this.appQueryInit()},methods:{appQueryInit:function(){var e=this,t=new s.a;t.data.UserNum=this.$store.getters.UserNum,Object(i.a)(t).then(function(t){e.appQueryList=t.RspInfo.Result}).catch(function(e){console.error("查询错误",e)})},clearForm:function(e){this.$refs[""+e].resetFields()},devPermissionBind:function(){var e=this;this.loading=!0;var t=new c,a=this.$refs.tree.getCheckedKeys()||[];t.data.AppNum=this.devUseMgrQueryForm.AppNum;var s=[];a.forEach(function(e){s.push({PriclegeId:e})}),t.data.PostList=s,Object(i.a)(t).then(function(t){setTimeout(function(){e.loading=!1},1e3),e.$aui.message.show({type:"success",message:"保存成功"})}).catch(function(t){e.$aui.message.show({type:"warning",message:t.SYS_HEAD.ReturnMessage}),console.error("查询错误",t)})},appPermissionQuery:function(){var e=this;this.$refs.devUseMgrQueryForm.validate(function(t){if(t){e.loading=!0;var a=new o;a.data.AppNum=e.devUseMgrQueryForm.AppNum,a.data.LegalPersonNum=e.$store.getters.LegalPersonNum,Object(i.a)(a).then(function(t){if(e.loading=!1,t.RspInfo.TranGroupInfo){e.permissionList=t.RspInfo.TranGroupInfo||[];var a=[];(t.RspInfo.DevAppPrivsInfo||[]).forEach(function(e){a.push(e.PRIVLEGEID)}),e.checkList=a,e.isDisabled=!1}else e.$aui.message.show({type:"warning",message:"该应用下没有交易组"}),e.permissionList=[],e.checkList=[],e.isDisabled=!0}).catch(function(t){e.permissionList=[],e.checkList=[],e.isDisabled=!0,e.loading=!1,console.error("查询错误",t)})}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dev-brand-manage",attrs:{"element-loading-text":"正在提交中","element-loading-spinner":"aui-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("aui-card",[a("aui-form",{ref:"devUseMgrQueryForm",attrs:{rules:e.rules,model:e.devUseMgrQueryForm,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{lg:4,md:6}},[a("aui-form-item",{attrs:{label:"应用编号",prop:"AppNum"}},[a("aui-select",{attrs:{placeholder:"请选择设备型号"},model:{value:e.devUseMgrQueryForm.AppNum,callback:function(t){e.$set(e.devUseMgrQueryForm,"AppNum",t)},expression:"devUseMgrQueryForm.AppNum"}},e._l(e.appQueryList,function(e){return a("aui-option",{key:e.AppNum,attrs:{label:e.AppNum+"-"+e.AppName,value:e.AppNum}})}))],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.appPermissionQuery}},[e._v("查询")])],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[a("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(t){e.clearForm("devUseMgrQueryForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设备权限关联")]),e._v(" "),a("aui-button",{staticStyle:{float:"right"},attrs:{size:"mini",disabled:e.isDisabled,type:"primary"},on:{click:e.devPermissionBind}},[e._v("提交")])],1),e._v(" "),a("aui-row",{staticStyle:{"min-height":"300px",overflow:"auto"}},[a("aui-tree",{ref:"tree",attrs:{data:e.permissionList,props:{id:"TRANGROUPID",label:"TRANGROUPNAME"},"show-checkbox":"","node-key":"TRANGROUPID","highlight-current":"","default-checked-keys":e.checkList}})],1)],1)],1)},staticRenderFns:[]};var p=a("/Xao")(d,u,!1,function(e){a("5ICo")},"data-v-7c6ed599",null);t.default=p.exports},kNsU:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.cardStyle[data-v-7c6ed599] {\n  margin: 5px 0;\n}\n.listEdit[data-v-7c6ed599] {\n  text-align: right;\n}\n.listEdit a[data-v-7c6ed599] {\n    margin: 5px;\n}\n.demo-table-expand .aui-form-item[data-v-7c6ed599] {\n  margin-bottom: 5px;\n}\n.editClass input.el-input__inner[data-v-7c6ed599] {\n  border: none;\n  background: rgba(0, 0, 0, 0) !important;\n}\n.fade-enter-active[data-v-7c6ed599],\n.fade-leave-active[data-v-7c6ed599] {\n  -webkit-transition: opacity 0.6s;\n  transition: opacity 0.6s;\n}\n.fade-enter[data-v-7c6ed599],\n.fade-leave-to[data-v-7c6ed599] {\n  opacity: 0;\n}\n.heightlight[data-v-7c6ed599] {\n  -webkit-box-shadow: 0 2px 12px 0 rgba(177, 208, 244, 0.6);\n          box-shadow: 0 2px 12px 0 rgba(177, 208, 244, 0.6);\n}\n",""])}});