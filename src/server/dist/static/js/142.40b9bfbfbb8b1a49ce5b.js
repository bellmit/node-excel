webpackJsonp([142],{"/IBv":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("pADA"),r=t("0oES"),i=t("syAl"),o=t("AA3o"),l=t.n(o),s=function n(){l()(this,n),this.data={versionCode:"",deviceNum:"",adStatus:""},this.TransServiceCode="mg-afaservices-vsn/releaseHistory"},u=t("Luip"),c={data:function(){return{pageSize:i.a.get("PageSize"),tableTotal:0,formInline:{versionCode:"",adStatus:"",deviceNum:"",deviceModel:""},currentPage:1,loading:!1,tableData:[],verBaseInfo:[],adStatusSpinner:[{label:"已发送通知",value:"0"},{label:"C端已受理",value:"1"},{label:"C端更新策略已下载",value:"2"},{label:"版本升级成功",value:"3"},{label:"版本升级失败",value:"4"}],adStatustype:i.a.get("adStatustype")}},created:function(){this.queryInfoList(),this.initSpinnerList()},methods:{initSpinnerList:function(){var n=this,e=new u.a;Object(r.a)(e).then(function(e){n.verBaseInfo=e.RspInfo.verDropBoxList||[]}).catch(function(n){console.error("查询错误",n)})},Format:function(n,e){return this.adStatustype[n[e.property]]},dtFormat:function(n,e){return a.a.timeFormat(n[e.property])},handleSizeChange:function(n){this.queryInfoList()},handleCurrentChange:function(n){this.queryInfoList()},queryInfoList:function(){var n=this;this.loading=!0;var e=new s;e.data.versionCode=this.formInline.versionCode,e.data.adStatus=this.formInline.adStatus,e.data.deviceNum=this.formInline.deviceNum,e.queryrownum=this.pageSize,e.querypageno=this.currentPage,Object(r.a)(e).then(function(e){n.loading=!1,n.tableData=e.RspInfo.verUpdateLogInfoList||[],n.tableTotal=Number(e.RspInfo.QueryAllDataCount||n.tableData.length)}).catch(function(e){n.$aui.message.show({message:e.SYS_HEAD.ReturnMessage,type:"error"}),n.loading=!1,console.log("异常信息：",e)})},clearForm:function(n){this.$refs[n].resetFields()}}},d={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[t("aui-card",{staticStyle:{"margin-bottom":"10px"}},[t("aui-form",{ref:"formInline",attrs:{model:n.formInline,"label-position":"top",size:"mini"}},[t("aui-row",{attrs:{gutter:10}},[t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"版本编号",prop:"versionCode"}},[t("aui-select",{attrs:{placeholder:"请选择版本编号查询"},model:{value:n.formInline.versionCode,callback:function(e){n.$set(n.formInline,"versionCode",e)},expression:"formInline.versionCode"}},n._l(n.verBaseInfo,function(n){return t("aui-option",{key:n.adID,attrs:{label:n.VERSIONCODE,value:n.VERSIONCODE}})}))],1)],1),n._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"设备编号",prop:"deviceNum"}},[t("aui-input",{attrs:{placeholder:"请输入设备编号"},model:{value:n.formInline.deviceNum,callback:function(e){n.$set(n.formInline,"deviceNum",e)},expression:"formInline.deviceNum"}})],1)],1),n._v(" "),t("aui-col",{attrs:{md:6,lg:4}},[t("aui-form-item",{attrs:{label:"版本操作结果",prop:"adStatus"}},[t("aui-select",{attrs:{placeholder:"请选择版本操作结果"},model:{value:n.formInline.adStatus,callback:function(e){n.$set(n.formInline,"adStatus",e)},expression:"formInline.adStatus"}},n._l(n.adStatusSpinner,function(n){return t("aui-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1)],1),n._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[t("aui-form-item",[t("aui-button",{attrs:{type:"primary",icon:"aui-icon-search"},on:{click:n.queryInfoList}},[n._v("查询")])],1)],1),n._v(" "),t("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[t("aui-form-item",[t("aui-button",{attrs:{type:"warning",icon:"aui-icon-refresh"},on:{click:function(e){n.clearForm("formInline")}}},[n._v("重置")])],1)],1)],1)],1)],1),n._v(" "),t("aui-card",[t("aui-table",{attrs:{data:n.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[t("aui-table-column",{attrs:{fixed:"",prop:"devNum",label:"设备编号",width:"100"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"versionCode",label:"版本编号",width:"150"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verUpdateCreateTime",formatter:n.dtFormat,label:"初始发布时间",width:"180"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"verUpdateUpdateTime",formatter:n.dtFormat,label:"更新汇报时间",width:"180"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"adDescription",label:"版本描述",width:"150"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"adStatus",formatter:n.Format,label:"版本操作结果",width:"150"}}),n._v(" "),t("aui-table-column",{attrs:{prop:"remark",label:"备注","min-width":"150"}})],1),n._v(" "),t("aui-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":n.currentPage,"page-sizes":[10,20,50,100],"page-size":n.pageSize,background:"",layout:"total, prev, pager, next, jumper",total:n.tableTotal},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange,"update:currentPage":function(e){n.currentPage=e}}})],1)],1)},staticRenderFns:[]};var m=t("/Xao")(c,d,!1,function(n){t("eXS0")},null,null);e.default=m.exports},eXS0:function(n,e,t){var a=t("rfRs");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("8bSs")("3fc25a0e",a,!0)},rfRs:function(n,e,t){(n.exports=t("BkJT")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});