webpackJsonp([148],{CT65:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("syAl");var r=e("tzsN"),n=e("0oES"),o=e("pADA"),i=e("0VOF"),s=e("AA3o"),l=e.n(s),u=function a(){l()(this,a),this.data={},this.BusiDataKey="QueryAdToDev",this.TransServiceCode="ib-dbcomm/dbComm"},c={data:function(){return{brnoList:[],brnoName:{},brnoMap:{},total:0,form:{branchId:[]},branchNum:[],brno:[],currentPage:1,pageSize:10,loading:!1,tableData:[],rules:{branchId:[{required:!0,message:"请选择机构",trigger:"blur"}]}}},components:{selectTree:r.a},methods:{clearForm:function(a){this.tableData=[],this.total=0,this.$refs.form.resetFields()},handleSizeChange:function(a){},handleCurrentChange:function(a){this.queryTabel()},onSubmit:function(){this.queryTabel()},queryTabel:function(){var a=this;this.$refs.form.validate(function(t){if(t){a.loading=!0;var e=new u;e.data.OperType="Q",e.data.CurtPage=a.currentPage,e.data.PageSize=a.pageSize,e.data.StartRows=(a.currentPage-1)*a.pageSize,e.BusiDataKey="QueryAdToDev",e.data.branId=a.form.branchId,Object(n.a)(e).then(function(t){for(var e in a.loading=!1,a.tableData=t.RspInfo.Result||[],a.tableData){var r=a.tableData[e],n=r.createDate.substring(4,0)+"-"+r.createDate.substring(4,6)+"-"+r.createDate.substring(6,8)+"  "+(r.createTime.substring(2,0)+":"+r.createTime.substring(2,4)+":"+r.createTime.substring(4,6));a.tableData[e].nowTime=n}a.total=t.RspInfo.totalNum}).catch(function(t){a.$aui.message.show({type:"warning",message:"请求失败，错误码:"+t.SYS_HEAD.ReturnCode+"，错误信息："+t.SYS_HEAD.ReturnMessage})})}})}},created:function(){var a=this;this.loading=!0;var t=new i.a;t.data.orgno=this.$store.getters.BranchNum,Object(n.a)(t).then(function(t){a.loading=!1,a.branchNum=t.RspInfo.Result||[],a.brnoMap=t.RspInfo.orgMap||{},a.brnoList=o.a.formatTreeData(a.branchNum,"orgno","superno"),a.form.branchId=a.brnoList[0].orgno,a.queryTabel()}).catch(function(t){a.loading=!1,console.error("错误信息",t)})},dataFormat:function(a,t){if("devBrnoName"==t.property)return a[t.property]+"-"+this.brnoMap[a[t.property]]}},b={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[e("aui-card",{staticStyle:{"margin-bottom":"10px"}},[e("aui-form",{ref:"form",attrs:{model:a.form,"label-position":"top",rules:a.rules,size:"mini"}},[e("aui-row",{attrs:{gutter:10}},[e("aui-col",{attrs:{md:6,lg:4}},[e("aui-form-item",{attrs:{label:"机构",prop:"branchId"}},[e("aui-select",{attrs:{filterable:"",placeholder:"请选择机构"},model:{value:a.form.branchId,callback:function(t){a.$set(a.form,"branchId",t)},expression:"form.branchId"}},a._l(a.brnoList,function(a){return e("aui-option",{key:a.value,attrs:{label:a.cname,value:a.orgno,disabled:a.disabled}})}))],1)],1),a._v(" "),e("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[e("aui-form-item",[e("aui-button",{attrs:{type:"primary",icon:"aui-icon-search"},on:{click:a.onSubmit}},[a._v("查询")])],1)],1),a._v(" "),e("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:3,lg:2}},[e("aui-form-item",[e("aui-button",{attrs:{type:"warning",icon:"aui-icon-search"},on:{click:function(t){a.clearForm("form")}}},[a._v("重置")])],1)],1)],1)],1)],1),a._v(" "),e("aui-card",[e("aui-table",{attrs:{data:a.tableData,"header-row-class-name":"tableHeaderClass",border:""}},[e("aui-table-column",{attrs:{fixed:"",prop:"deviceNum",label:"设备编号"}}),a._v(" "),e("aui-table-column",{attrs:{prop:"devBrnoName",label:"所在机构"}}),a._v(" "),e("aui-table-column",{attrs:{prop:"tempIdName",label:"节目名称"}}),a._v(" "),e("aui-table-column",{attrs:{prop:"createUser",label:"发布人员"}}),a._v(" "),e("aui-table-column",{attrs:{prop:"nowTime",label:"发布时间"}})],1),a._v(" "),e("aui-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":a.currentPage,layout:"total, prev, pager, next, jumper",total:a.total},on:{"current-change":a.handleCurrentChange,"update:currentPage":function(t){a.currentPage=t}}})],1)],1)},staticRenderFns:[]};var d=e("/Xao")(c,b,!1,function(a){e("Gblb")},null,null);t.default=d.exports},Gblb:function(a,t,e){var r=e("pOTd");"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);e("8bSs")("701c6130",r,!0)},pOTd:function(a,t,e){(a.exports=e("BkJT")(!1)).push([a.i,"\n.aui-card {\n  overflow: inherit;\n}\n",""])}});