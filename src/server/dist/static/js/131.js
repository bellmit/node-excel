webpackJsonp([131],{"10mt":function(a,e,r){var t=r("9JZL");"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);r("8bSs")("84f89e8c",t,!0)},"9JZL":function(a,e,r){(a.exports=r("BkJT")(!1)).push([a.i,"\n.cardStyle {\n  margin: 5px 0;\n}\n.listEdit {\n  text-align: right;\n}\n.listEdit a {\n    margin: 5px;\n}\n.demo-table-expand .aui-form-item {\n  margin-bottom: 0;\n}\n",""])},ACZb:function(a,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r("3cXf"),n=r.n(t),i=r("0oES"),o=r("syAl"),c=r("AA3o"),s=r.n(c),l=function a(){s()(this,a),this.data={BranchNum:"",BranchName:"",BranchAbbr:"",BranchAttr:"",BranchLevel:"",FinaPermit:"",GpsCoor_Long:"",GpsCoor_Lati:"",BranchAddr:"",BranchPersonInCharge:"",PersonInChargeContactPhone:"",DateOpen:"",EffeDate:"",ExpiDate:"",BranchIpCheckMark:"",TrafficInfo:"",SupeBranchNum:"",ZoneNum:"",LegalPersonNum:"",BranchState:"1"},this.CommCode="IBUserPermissionsManagement",this.SceneCode="MechanismCreate",this.TransServiceCode="mg-afaservices-upm/mechanismCreate"},u=function a(){s()(this,a),this.data={BranchNum:"",BranchName:"",BranchAbbr:"",BranchAttr:"",BranchLevel:"",FinaPermit:"",GpsCoor_Long:"",GpsCoor_Lati:"",BranchAddr:"",BranchPersonInCharge:"",PersonInChargeContactPhone:"",DateOpen:"",EffeDate:"",ExpiDate:"",BranchIpCheckMark:"",TrafficInfo:"",SupeBranchNum:"",ZoneNum:"",LegalPersonNum:"",OrgPrincName:"",BgnBiznTm:"",EndBizbTm:"",OrgFullCd:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="MechanismUpdate",this.TransServiceCode="mg-afaservices-upm/mechanismUpdate"},b=r("0VOF"),h=r("fCv1"),p={props:{createData:Object},data:function(){return{brnoList:[],brnoListFather:[],brnoLevel:[],checkMark:[{value:"0",label:"0-不检查"},{value:"1",label:"1-检查"}],brnoRunStateList:[{value:"0",label:"关机（自动）"},{value:"1",label:"营业"},{value:"2",label:"待扎帐"},{value:"3",label:"已扎帐"},{value:"4",label:"撤销"},{value:"5",label:"删除"},{value:"6",label:"暂退"},{value:"7",label:"可开机"},{value:"8",label:"关机（手动）"}],loading:!1,brnoProp:[],branch:{branchcontactname:"",branchcontactphone:"",branchnum:"",branchcode:"",branchname:"",branchabbr:"",branchattr:"",branchlevel:"",finapermit:"",gpscoor_lati:"",gpscoor_long:"",branchaddr:"",branchpersonincharge:"",personinchargecontactphone:"",bgnbizntm:"",endbizbtm:"",dateopen:"",effedate:"",expidate:"",branchipcheckmark:"",trafficinfo:"",supebranchnum:"",zonenum:"",legalpersonnum:"",branchrunstus:""},rules1:{legalpersonnum:[{required:!0,message:"法人行号必填！",trigger:"change"}],zonenum:[{required:!0,message:"分行号必填！",trigger:"change"}],supebranchnum:[{required:!0,message:"上级机构号必填！",trigger:"change"}]},rules:{branchnum:[{required:!0,message:"机构号必填！",trigger:"change"}],branchname:[{required:!0,message:"机构名称必填！",trigger:"blur"}],branchabbr:[{required:!1,message:"机构简称必填！",trigger:"blur"}],branchattr:[{required:!0,message:"机构属性必填！",trigger:"blur"}],branchlevel:[{required:!0,message:"机构级别必填！",trigger:"change"}],branchpersonincharge:[{require:!1,validator:Object(h.h)(60),trigger:"blur"}],personinchargecontactphone:[{require:!1,validator:Object(h.h)(20),trigger:"blur"}],branchcontactname:[{require:!1,validator:Object(h.h)(30),trigger:"blur"}],branchcontactphone:[{require:!1,validator:Object(h.h)(20),trigger:"blur"}],effedate:[{required:!0,message:"生效时间不能为空",trigger:"change"}],expidate:[{required:!0,message:"生效时间不能为空",trigger:"change"}],bgnbizntm:[{required:!0,message:"机构营业开始时间不能为空",trigger:"change"},{trigger:"change",validator:this.startTimeVali}],endbizbtm:[{required:!0,message:"机构营业结束时间不能为空",trigger:"change"},{trigger:"change",validator:this.endTimeVali}],finapermit:[{require:!1,validator:Object(h.h)(15),trigger:"blur"}],gpscoor_long:[{require:!1,validator:Object(h.h)(11),trigger:"blur"}],gpscoor_lati:[{require:!1,validator:Object(h.h)(11),trigger:"blur"}],trafficinfo:[{require:!1,validator:Object(h.h)(180),trigger:"blur"}],branchaddr:[{require:!1,validator:Object(h.h)(100),trigger:"blur"}],branchipcheckmark:[{required:!0,message:"机构IP检查标志不能为空",trigger:"change"}]}}},created:function(){this.brnoProp=o.a.get("brnoProp"),this.brnoLevel=o.a.get("brnoLevel")},methods:{initList:function(){var a=this;this.loading=!0;var e=new b.a;e.data.orgno=this.$store.getters.BranchNum,Object(i.a)(e).then(function(e){a.loading=!1,a.brnoList=e.RspInfo.Result||[],a.brnoListFather=JSON.parse(n()(a.brnoList))}).catch(function(e){a.loading=!1,console.error("查询错误",e)})},startTimeVali:function(a,e,r){null!=this.branch.bgnbizntm&&e>this.branch.endbizbtm?r(new Error("开始时间不得大于结束时间")):r()},endTimeVali:function(a,e,r){null!=this.branch.endbizbtm&&e<this.branch.bgnbizntm?r(new Error("结束时间不得小于开始时间")):r()},openBranch:function(){"2"==this.createData.logo?(this.branch=JSON.parse(n()(this.createData.currentRow)),this.branch.branchpersonincharge=this.createData.currentRow.orgprincname,this.branch.branchcode=this.createData.currentRow.orgfullcd):this.branch={branchcontactname:"",branchcontactphone:"",branchnum:"",branchname:"",branchabbr:"",branchattr:"",branchlevel:"",finapermit:"",gpscoor_lati:"",gpscoor_long:"",branchaddr:"",branchpersonincharge:"",personinchargecontactphone:"",dateopen:"",effedate:"",expidate:"",branchipcheckmark:"",trafficinfo:"",supebranchnum:"",zonenum:"",legalpersonnum:"",bgnbizntm:"",endbizbtm:"",branchcode:"",branchrunstus:""},this.initList()},closeBranch:function(){this.$refs.branchform.clearValidate(),this.$refs.branchform.resetFields(),this.$refs.branchformFather.clearValidate(),this.$refs.branchformFather.resetFields()},addArea:function(){var a=this;this.$refs.branchform.validate(function(e){if(e){a.loading=!0;var r="1"==a.createData.logo?new l:new u;r.data.BranchContactName=a.branch.branchcontactname,r.data.BranchContactPhone=a.branch.branchcontactphone,r.data.BranchNum=a.branch.branchnum,r.data.BranchName=a.branch.branchname,r.data.BranchAbbr=a.branch.branchabbr,r.data.BranchAttr=a.branch.branchattr,r.data.BranchLevel=a.branch.branchlevel,r.data.FinaPermit=a.branch.finapermit,r.data.GpsCoor_Long=a.branch.gpscoor_long,r.data.GpsCoor_Lati=a.branch.gpscoor_lati,r.data.BranchAddr=a.branch.branchaddr,r.data.PersonInChargeContactPhone=a.branch.personinchargecontactphone,r.data.DateOpen=a.branch.dateopen,r.data.EffeDate=a.branch.effedate,r.data.ExpiDate=a.branch.expidate,r.data.BranchIpCheckMark=a.branch.branchipcheckmark,r.data.TrafficInfo=a.branch.trafficinfo,r.data.SupeBranchNum=a.branch.supebranchnum,r.data.ZoneNum=a.branch.zonenum,r.data.LegalPersonNum=a.branch.legalpersonnum,r.data.OrgPrincName=a.branch.branchpersonincharge,r.data.BgnBiznTm=a.branch.bgnbizntm,r.data.EndBizbTm=a.branch.endbizbtm,r.data.OrgFullCd=a.branch.branchcode,r.data.BranchRunStus=a.branch.branchrunstus,Object(i.a)(r).then(function(e){a.loading=!1;var r="1"==a.createData.logo?"创建":"修改";a.$aui.message.show({type:"success",message:"机构"+r+"成功!"}),a.createData.isShow=!1,a.$emit("refreshTable")}).catch(function(e){a.loading=!1,a.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage+"!"}),console.log(e)})}})}}},m={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",[r("aui-dialog",{attrs:{visible:a.createData.isShow,width:"800px",title:a.createData.title,"close-on-click-modal":!1},on:{"update:visible":function(e){a.$set(a.createData,"isShow",e)},hide:a.closeBranch,show:a.openBranch}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}]},[r("aui-card",{staticStyle:{overflow:"visible"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[a._v("上级机构")])]),a._v(" "),r("aui-form",{ref:"branchformFather",attrs:{model:a.branch,size:"mini",rules:a.rules1,"label-width":"90px","label-position":"right"}},[r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"法人行号:",prop:"legalpersonnum"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入法人行号"},model:{value:a.branch.legalpersonnum,callback:function(e){a.$set(a.branch,"legalpersonnum",e)},expression:"branch.legalpersonnum"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"分行号:",prop:"zonenum"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入分行号"},model:{value:a.branch.zonenum,callback:function(e){a.$set(a.branch,"zonenum",e)},expression:"branch.zonenum"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"上级机构号:",prop:"supebranchnum"}},[r("aui-select",{attrs:{disabled:a.createData.isDisabled,filterable:"",placeholder:"请选择上级机构号"},model:{value:a.branch.supebranchnum,callback:function(e){a.$set(a.branch,"supebranchnum",e)},expression:"branch.supebranchnum"}},a._l(a.brnoListFather,function(a){return r("aui-option",{key:a.value,attrs:{label:a.cname,value:a.orgno}})}))],1)],1)],1)],1)],1),a._v(" "),r("aui-card",{staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[a._v("机构信息")])]),a._v(" "),r("aui-form",{ref:"branchform",attrs:{model:a.branch,size:"mini",rules:a.rules,"label-width":"120px","label-position":"right"}},[r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构号:",prop:"branchnum"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入机构号"},model:{value:a.branch.branchnum,callback:function(e){a.$set(a.branch,"branchnum",e)},expression:"branch.branchnum"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构全码:",prop:"branchcode"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入机构全码"},model:{value:a.branch.branchcode,callback:function(e){a.$set(a.branch,"branchcode",e)},expression:"branch.branchcode"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构名称:",prop:"branchname"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入机构名称"},model:{value:a.branch.branchname,callback:function(e){a.$set(a.branch,"branchname",e)},expression:"branch.branchname"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构简称:",prop:"branchabbr"}},[r("aui-input",{attrs:{disabled:a.createData.isDisabled,placeholder:"请输入机构简称"},model:{value:a.branch.branchabbr,callback:function(e){a.$set(a.branch,"branchabbr",e)},expression:"branch.branchabbr"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构属性:",prop:"branchattr"}},[r("aui-select",{attrs:{placeholder:"请选择机构属性"},model:{value:a.branch.branchattr,callback:function(e){a.$set(a.branch,"branchattr",e)},expression:"branch.branchattr"}},a._l(a.brnoProp,function(a){return r("aui-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:a.disabled}})}))],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构级别:",prop:"branchlevel"}},[r("aui-select",{attrs:{placeholder:"请选择机构级别"},model:{value:a.branch.branchlevel,callback:function(e){a.$set(a.branch,"branchlevel",e)},expression:"branch.branchlevel"}},a._l(a.brnoLevel,function(a){return r("aui-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:a.disabled}})}))],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构负责人:",prop:"branchpersonincharge"}},[r("aui-input",{attrs:{placeholder:"请输入机构负责人"},model:{value:a.branch.branchpersonincharge,callback:function(e){a.$set(a.branch,"branchpersonincharge",e)},expression:"branch.branchpersonincharge"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"负责人电话:",prop:"personinchargecontactphone"}},[r("aui-input",{attrs:{placeholder:"请输入负责人电话"},model:{value:a.branch.personinchargecontactphone,callback:function(e){a.$set(a.branch,"personinchargecontactphone",e)},expression:"branch.personinchargecontactphone"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构联系人:",prop:"branchcontactname"}},[r("aui-input",{attrs:{placeholder:"请输入机构联系人姓名"},model:{value:a.branch.branchcontactname,callback:function(e){a.$set(a.branch,"branchcontactname",e)},expression:"branch.branchcontactname"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"联系人电话:",prop:"branchcontactphone"}},[r("aui-input",{attrs:{placeholder:"请输入机构联系人电话"},model:{value:a.branch.branchcontactphone,callback:function(e){a.$set(a.branch,"branchcontactphone",e)},expression:"branch.branchcontactphone"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构营业开始时间:",prop:"bgnbizntm"}},[r("aui-time-picker",{attrs:{"value-format":"HHmmss",placeholder:"机构营业开始时间"},model:{value:a.branch.bgnbizntm,callback:function(e){a.$set(a.branch,"bgnbizntm",e)},expression:"branch.bgnbizntm"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构营业结束时间:",prop:"endbizbtm"}},[r("aui-time-picker",{attrs:{"value-format":"HHmmss",placeholder:"机构营业结束时间"},model:{value:a.branch.endbizbtm,callback:function(e){a.$set(a.branch,"endbizbtm",e)},expression:"branch.endbizbtm"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"金融许可证:",prop:"finapermit"}},[r("aui-input",{attrs:{placeholder:"请输入金融许可证"},model:{value:a.branch.finapermit,callback:function(e){a.$set(a.branch,"finapermit",e)},expression:"branch.finapermit"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"经度:",prop:"gpscoor_long"}},[r("aui-input",{attrs:{placeholder:"请输入经度"},model:{value:a.branch.gpscoor_long,callback:function(e){a.$set(a.branch,"gpscoor_long",e)},expression:"branch.gpscoor_long"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"纬度:",prop:"gpscoor_lati"}},[r("aui-input",{attrs:{placeholder:"请输入纬度"},model:{value:a.branch.gpscoor_lati,callback:function(e){a.$set(a.branch,"gpscoor_lati",e)},expression:"branch.gpscoor_lati"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"开业日期:",prop:"dateopen"}},[r("aui-date-picker",{attrs:{disabled:a.createData.isDisabled,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:a.branch.dateopen,callback:function(e){a.$set(a.branch,"dateopen",e)},expression:"branch.dateopen"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"生效日期:",prop:"effedate"}},[r("aui-date-picker",{attrs:{disabled:a.createData.isDisabled,"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:a.branch.effedate,callback:function(e){a.$set(a.branch,"effedate",e)},expression:"branch.effedate"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"失效日期:",prop:"expidate"}},[r("aui-date-picker",{attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:a.branch.expidate,callback:function(e){a.$set(a.branch,"expidate",e)},expression:"branch.expidate"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:24}},[r("aui-form-item",{attrs:{label:"交通信息:",prop:"trafficinfo"}},[r("aui-input",{attrs:{placeholder:"请输入交通信息"},model:{value:a.branch.trafficinfo,callback:function(e){a.$set(a.branch,"trafficinfo",e)},expression:"branch.trafficinfo"}})],1)],1),a._v(" "),r("aui-col",{attrs:{span:24}},[r("aui-form-item",{attrs:{label:"地址:",prop:"branchaddr"}},[r("aui-input",{attrs:{placeholder:"请输入地址"},model:{value:a.branch.branchaddr,callback:function(e){a.$set(a.branch,"branchaddr",e)},expression:"branch.branchaddr"}})],1)],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构IP检查标志:",prop:"branchipcheckmark"}},[r("aui-select",{attrs:{placeholder:"请选择机构IP检查标志"},model:{value:a.branch.branchipcheckmark,callback:function(e){a.$set(a.branch,"branchipcheckmark",e)},expression:"branch.branchipcheckmark"}},a._l(a.checkMark,function(a){return r("aui-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:a.disabled}})}))],1)],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构运行状态",prop:"branchrunstus"}},[r("aui-select",{attrs:{placeholder:"请选择机构运行状态"},model:{value:a.branch.branchrunstus,callback:function(e){a.$set(a.branch,"branchrunstus",e)},expression:"branch.branchrunstus"}},a._l(a.brnoRunStateList,function(a){return r("aui-option",{key:a.value,attrs:{label:a.value+"-"+a.label,value:a.value}})}))],1)],1)],1)],1)],1),a._v(" "),r("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[r("aui-button",{attrs:{size:"mini"},on:{click:function(e){a.createData.isShow=!1}}},[a._v("取消")]),a._v(" "),r("aui-button",{attrs:{type:"primary",size:"mini"},on:{click:a.addArea}},[a._v("确认")])],1)],1)])],1)},staticRenderFns:[]},d=r("/Xao")(p,m,!1,null,null,null).exports,g=(r("pADA"),{props:{detailData:Object},data:function(){return{brnoList:[],brnoListFather:[],brnoLevel:[],checkMark:[{value:"0",label:"0-不检查"},{value:"1",label:"1-检查"}],brnoRunStateList:[{value:"0",label:"0-关机（自动）"},{value:"1",label:"1-营业"},{value:"2",label:"2-待扎帐"},{value:"3",label:"3-已扎帐"},{value:"4",label:"4-撤销"},{value:"5",label:"5-删除"},{value:"6",label:"6-暂退"},{value:"7",label:"7-可开机"},{value:"8",label:"8-关机（手动）"}],loading:!1,brnoProp:[],branch:{branchnum:"",branchcode:"",branchname:"",branchabbr:"",branchattr:"",branchlevel:"",finapermit:"",gpscoor_lati:"",gpscoor_long:"",branchaddr:"",branchpersonincharge:"",personinchargecontactphone:"",branchcontactname:"",branchcontactphone:"",bgnbizntm:"",endbizbtm:"",dateopen:"",effedate:"",expidate:"",branchipcheckmark:"",trafficinfo:"",supebranchnum:"",zonenum:"",legalpersonnum:"",branchrunstus:""}}},created:function(){this.brnoProp=o.a.get("brnoProp"),this.brnoLevel=o.a.get("brnoLevel")},methods:{formateData:function(a,e){var r="";return a.forEach(function(a){e==a.value&&(r=a.label)}),r},openBranch:function(){this.branch=JSON.parse(n()(this.detailData.currentRow)),this.branch.branchpersonincharge=this.detailData.currentRow.orgprincname,this.branch.branchcode=this.detailData.currentRow.orgfullcd}}}),f={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",[r("aui-dialog",{attrs:{visible:a.detailData.isShow,width:"800px",title:"查看详情","close-on-click-modal":!1},on:{"update:visible":function(e){a.$set(a.detailData,"isShow",e)},show:a.openBranch}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}]},[r("aui-card",{staticStyle:{overflow:"visible"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[a._v("上级机构")])]),a._v(" "),r("aui-form",{ref:"branchformFather",attrs:{model:a.branch,size:"mini","label-width":"90px","label-position":"right"}},[r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"法人行号:",prop:"legalpersonnum"}},[r("span",[a._v(a._s(a.branch.legalpersonnum))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"分行号:",prop:"zonenum"}},[r("span",[a._v(a._s(a.branch.zonenum))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"上级机构号:",prop:"supebranchnum"}},[r("span",[a._v(a._s(a.branch.supebranchnum))])])],1)],1)],1)],1),a._v(" "),r("aui-card",{staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[a._v("机构信息")])]),a._v(" "),r("aui-form",{ref:"branchform",attrs:{model:a.branch,size:"mini","label-width":"115px","label-position":"right"}},[r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构号:",prop:"branchnum"}},[r("span",[a._v(a._s(a.branch.branchnum))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构全码:",prop:"branchcode"}},[r("span",[a._v(a._s(a.branch.branchcode))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构名称:",prop:"branchname"}},[r("span",[a._v(a._s(a.branch.branchname))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构简称:",prop:"branchabbr"}},[r("span",[a._v(a._s(a.branch.branchabbr))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构属性:",prop:"branchattr"}},[r("span",[a._v(a._s(a.formateData(a.brnoProp,a.branch.branchattr)))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构级别:",prop:"branchlevel"}},[r("span",[a._v(a._s(a.formateData(a.brnoLevel,a.branch.branchlevel)))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构负责人:",prop:"branchpersonincharge"}},[r("span",[a._v(a._s(a.branch.branchpersonincharge))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"负责人电话:",prop:"personinchargecontactphone"}},[r("span",[a._v(a._s(a.branch.personinchargecontactphone))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构联系人:",prop:"branchcontactname"}},[r("span",[a._v(a._s(a.branch.branchcontactname))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构联系人电话:",prop:"branchcontactphone"}},[r("span",[a._v(a._s(a.branch.branchcontactphone))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构营业开始时间:"}},[r("span",[a._v(a._s(a.toolBox.timeFormat2Time(a.branch.bgnbizntm)))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构营业结束时间:"}},[r("span",[a._v(a._s(a.toolBox.timeFormat2Time(a.branch.endbizbtm)))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"金融许可证:",prop:"finapermit"}},[r("span",[a._v(a._s(a.branch.finapermit))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"经度:",prop:"gpscoor_long"}},[r("span",[a._v(a._s(a.branch.gpscoor_long))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"纬度:",prop:"gpscoor_lati"}},[r("span",[a._v(a._s(a.branch.gpscoor_lati))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"开业日期:",prop:"dateopen"}},[r("span",[a._v(a._s(a.toolBox.timeFormat2Date(a.branch.dateopen)))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"生效日期:",prop:"effedate"}},[r("span",[a._v(a._s(a.toolBox.timeFormat2Date(a.branch.effedate)))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"失效日期:",prop:"expidate"}},[r("span",[a._v(a._s(a.toolBox.timeFormat2Date(a.branch.expidate)))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:24}},[r("aui-form-item",{attrs:{label:"交通信息:",prop:"trafficinfo"}},[r("span",[a._v(a._s(a.branch.trafficinfo))])])],1),a._v(" "),r("aui-col",{attrs:{span:24}},[r("aui-form-item",{attrs:{label:"地址:",prop:"branchaddr"}},[r("span",[a._v(a._s(a.branch.branchaddr))])])],1)],1),a._v(" "),r("aui-row",{attrs:{gutter:20}},[r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构IP检查标志:",prop:"branchipcheckmark"}},[r("span",[a._v(a._s(a.formateData(a.checkMark,a.branch.branchipcheckmark)))])])],1),a._v(" "),r("aui-col",{attrs:{span:12}},[r("aui-form-item",{attrs:{label:"机构运行状态:",prop:"branchrunstus"}},[r("span",[a._v(a._s(a.formateData(a.brnoRunStateList,a.branch.branchrunstus)))])])],1)],1)],1)],1),a._v(" "),r("aui-row",{staticStyle:{margin:"20px 0","text-align":"right"}},[r("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){a.detailData.isShow=!1}}},[a._v("确认")])],1)],1)])],1)},staticRenderFns:[]},v=r("/Xao")(g,f,!1,null,null,null).exports,_=r("udOb"),w=function a(){s()(this,a),this.data={BranchNum:""},this.CommCode="IBUserPermissionsManagement",this.SceneCode="MechanismDelete",this.TransServiceCode="mg-afaservices-upm/mechanismDelete"},k={data:function(){return{brnoRunStateList:[{value:"0",label:"关机（自动）"},{value:"1",label:"营业"},{value:"2",label:"待扎帐"},{value:"3",label:"已扎帐"},{value:"4",label:"撤销"},{value:"5",label:"删除"},{value:"6",label:"暂退"},{value:"7",label:"可开机"},{value:"8",label:"关机（手动）"}],total:0,pageSize:void 0,enumBrnoProp:[],enumBrnoState:[],currentPage:1,tableDateList:[],brnoState:[],brnoProp:[],brnoList:[],queryForm:{brnoState:"",brnoProp:"",brnoName:"",brnoList:"",branchrunstus:""},currentRow:[],loading:!1,dialogList:{updateBranch:d,detailBranch:v},dialogOptions:{isShow:!1},dialogOptionsDetail:{isShow:!1},rules:{brnoList:[{require:!0,validator:Object(h.h)(4),trigger:"blur"},{require:!0,validator:h.j,trigger:"blur"}],brnoName:[{require:!0,validator:Object(h.h)(150),trigger:"blur"},{require:!0,validator:h.k,trigger:"blur"}]}}},created:function(){this.pageSize=o.a.get("PageSize"),this.brnoProp=o.a.get("brnoProp"),this.brnoState=o.a.get("brnoState"),this.enumBrnoProp=this.enumDate(this.brnoProp),this.enumBrnoState=this.enumDate(this.brnoState)},watch:{queryForm:{handler:function(a,e){this.currentPage=1},deep:!0}},methods:{detailBranch:function(){this.dialogOptionsDetail.isShow=!0,this.dialogOptionsDetail.currentRow=this.currentRow[0]},enumDate:function(a){var e=[];return a.forEach(function(a){e[a.value]=a.label}),e},propFormat:function(a,e){return this.enumBrnoProp[a[e.property]]},stateFormat:function(a,e){return this.enumBrnoState[a[e.property]]},runStateFormat:function(a,e){for(var r=0;r<this.brnoRunStateList.length;r++)if(this.brnoRunStateList[r].value==a[e.property])return this.brnoRunStateList[r].value+"-"+this.brnoRunStateList[r].label},handleCurrentChange:function(a){this.currentPage=a,this.tableQuery()},handleCurrentChangeTable:function(a){this.currentRow=a,a.length>1&&this.$refs.tableDateList.toggleRowSelection(a[0])},clearForm:function(a){this.$refs[""+a].resetFields()},refreshTable:function(){this.tableQuery()},tableQuery:function(){var a=this;this.loading=!0;var e=new _.a;e.data.BranchNum=this.queryForm.brnoList,e.data.BranchName=this.queryForm.brnoName,e.data.BranchAttr=this.queryForm.brnoProp,e.data.BranchState=this.queryForm.brnoState,e.data.BranchRunStus=this.queryForm.branchrunstus,e.data.start=(this.currentPage-1)*this.pageSize,e.data.length=this.pageSize,Object(i.a)(e).then(function(e){a.total=e.RspInfo.recordsTotal?e.RspInfo.recordsTotal:0,a.tableDateList=[],a.loading=!1,a.tableDateList=e.RspInfo.pageList}).catch(function(e){a.total=0,a.tableDateList=[],a.loading=!1,a.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage+"!"})})},sureDel:function(){var a=this;this.loading=!0;var e=new w;e.data.BranchNum=this.currentRow[0].branchnum,Object(i.a)(e).then(function(e){a.$aui.message.show({type:"success",message:"机构信息删除成功!"}),a.refreshTable(),a.loading=!1}).catch(function(e){a.loading=!1,a.$aui.message.show({type:"warning",message:e.SYS_HEAD.ReturnMessage+"!"})})},branchUpdate:function(){this.dialogOptions.isShow=!0,this.dialogOptions.currentRow=this.currentRow[0],this.dialogOptions.title="修改机构信息",this.dialogOptions.isDisabled=!0,this.dialogOptions.logo="2"},branchAdd:function(){this.dialogOptions.isShow=!0,this.dialogOptions.title="添加机构信息",this.dialogOptions.isDisabled=!1,this.dialogOptions.logo="1"},delBranch:function(){var a=this;this.$aui.confirm.show("此操作将永久删除该机构信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.sureDel()}).catch(function(){a.$aui.message.show({type:"info",message:"已取消删除"})})}}},x={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"branch-manage",attrs:{"element-loading-text":"加载中。。。"}},[r("aui-card",[r("aui-form",{ref:"queryForm",attrs:{model:a.queryForm,size:"mini","label-position":"top",rules:a.rules}},[r("aui-row",{attrs:{gutter:10}},[r("aui-col",{attrs:{lg:4,md:6}},[r("aui-form-item",{attrs:{label:"机构号",prop:"brnoList"}},[r("aui-input",{attrs:{placeholder:"请输入机构号"},model:{value:a.queryForm.brnoList,callback:function(e){a.$set(a.queryForm,"brnoList",e)},expression:"queryForm.brnoList"}})],1)],1),a._v(" "),r("aui-col",{attrs:{lg:4,md:6}},[r("aui-form-item",{attrs:{label:"机构中文名称",prop:"brnoName"}},[r("aui-input",{attrs:{placeholder:"请输入机构中文名称"},model:{value:a.queryForm.brnoName,callback:function(e){a.$set(a.queryForm,"brnoName",e)},expression:"queryForm.brnoName"}})],1)],1),a._v(" "),r("aui-col",{attrs:{lg:4,md:6}},[r("aui-form-item",{attrs:{label:"机构属性",prop:"brnoProp"}},[r("aui-select",{attrs:{placeholder:"请选择机构属性"},model:{value:a.queryForm.brnoProp,callback:function(e){a.$set(a.queryForm,"brnoProp",e)},expression:"queryForm.brnoProp"}},a._l(a.brnoProp,function(a){return r("aui-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:a.disabled}})}))],1)],1),a._v(" "),r("aui-col",{attrs:{lg:4,md:6}},[r("aui-form-item",{attrs:{label:"机构状态",prop:"brnoState"}},[r("aui-select",{attrs:{placeholder:"请选择机构状态"},model:{value:a.queryForm.brnoState,callback:function(e){a.$set(a.queryForm,"brnoState",e)},expression:"queryForm.brnoState"}},a._l(a.brnoState,function(a){return r("aui-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:a.disabled}})}))],1)],1),a._v(" "),r("aui-col",{attrs:{lg:4,md:6}},[r("aui-form-item",{attrs:{label:"机构运行状态",prop:"branchrunstus"}},[r("aui-select",{attrs:{placeholder:"请选择机构运行状态"},model:{value:a.queryForm.branchrunstus,callback:function(e){a.$set(a.queryForm,"branchrunstus",e)},expression:"queryForm.branchrunstus"}},a._l(a.brnoRunStateList,function(a){return r("aui-option",{key:a.value,attrs:{label:a.value+"-"+a.label,value:a.value}})}))],1)],1),a._v(" "),r("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[r("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:a.tableQuery}},[a._v("查询")])],1),a._v(" "),r("aui-col",{staticClass:"searchBtnMarginTop",attrs:{lg:2,md:3}},[r("aui-button",{attrs:{type:"warning",size:"mini",icon:"aui-icon-refresh"},on:{click:function(e){a.clearForm("queryForm")}}},[a._v("重置")])],1)],1)],1)],1),a._v(" "),r("aui-card",{staticStyle:{"margin-top":"10px"}},[r("aui-row",[r("aui-col",{attrs:{lg:2,md:3}},[a.btnPermission("Button_DevBrand_Add")?r("aui-button",{attrs:{type:"primary",size:"mini",disabled:1!=a.currentRow.length},on:{click:function(e){a.detailBranch()}}},[a._v("查看详情")]):a._e()],1)],1),a._v(" "),r("aui-table",{ref:"tableDateList",staticClass:"tableMarginTop",attrs:{data:a.tableDateList,border:"","max-height":"400",width:"100%","header-row-class-name":"tableHeaderClass","highlight-current-row":""},on:{"selection-change":a.handleCurrentChangeTable}},[r("aui-table-column",{attrs:{type:"selection",width:"40px"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchnum",label:"机构号",fixed:""}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchname",label:"机构名称"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchabbr",label:"机构简称"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchaddr",label:"地址"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchcontactphone",label:"联系人电话"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchcontactname",label:"联系人姓名"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchpersonincharge",label:"机构负责人"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"personinchargecontactphone",label:"负责人电话","min-width":"107px"}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchattr",label:"机构属性",formatter:a.propFormat}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchstate",label:"机构状态",formatter:a.stateFormat}}),a._v(" "),r("aui-table-column",{attrs:{prop:"branchrunstus",label:"机构运行状态",formatter:a.runStateFormat}})],1),a._v(" "),r("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[r("aui-pagination",{attrs:{background:"","current-page":a.currentPage,"page-size":a.pageSize,layout:"total, prev, pager, next, jumper",total:a.total},on:{"current-change":a.handleCurrentChange}})],1)],1),a._v(" "),r("keep-alive",[r(a.dialogList.updateBranch,{tag:"component",attrs:{createData:a.dialogOptions},on:{refreshTable:a.refreshTable}})],1),a._v(" "),r("keep-alive",[r(a.dialogList.detailBranch,{tag:"component",attrs:{detailData:a.dialogOptionsDetail}})],1)],1)},staticRenderFns:[]};var y=r("/Xao")(k,x,!1,function(a){r("10mt")},null,null);e.default=y.exports}});