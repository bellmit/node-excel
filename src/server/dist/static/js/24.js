webpackJsonp([24],{"4Rgv":function(e,t,a){var i=a("Je0E");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("e6f94a2c",i,!0)},"7CO1":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.photoWall[data-v-783d13d1] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row wrap;\n          flex-flow: row wrap;\n}\n.photoWall .photoWallItem[data-v-783d13d1] {\n    max-width: 220px;\n}\n.photoWall .photoWallItem img[data-v-783d13d1] {\n      cursor: pointer;\n      width: 100%;\n      border: 2px solid  transparent;\n}\n.photoWall .photoWallItem img.selected[data-v-783d13d1] {\n        border: 2px solid  #08f;\n}\n",""])},HiJW:function(e,t,a){var i=a("7CO1");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("826f27a4",i,!0)},Je0E:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},Xn6E:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("lC5x"),n=a.n(i),o=a("J0Oq"),r=a.n(o),s=a("0oES"),l=a("syAl"),c=a("3cXf"),d=a.n(c),u={created:function(){},beforeMount:function(){},mounted:function(){this.init()},data:function(){return{tempDataArr:{}}},watch:{selection:function(){this.refreshSelection()},tempDataArr:function(){},deep:!0},methods:{init:function(){this.tempDataArr=JSON.parse(d()(this.data));for(var e=0;e<this.tempDataArr.length;e++)this.tempDataArr[e].selectedFlag=!1;this.refreshSelection()},refreshSelection:function(){if(this.selection&&0!=this.selection.length)for(var e=0;e<this.selection.length;e++)for(var t=0;t<this.tempDataArr.length;t++)if(this.tempDataArr[t][this.idStr]==this.selection[e]){this.tempDataArr[t].selectedFlag=!0;break}},returnSelectedArr:function(){for(var e=[],t=0;t<this.tempDataArr.length;t++)1==this.tempDataArr[t].selectedFlag&&e.push(this.data[t]);return e},clickPanel:function(e,t){1==t.selectedFlag?(t.selectedFlag=!1,e.target.classList.remove("selected")):0==t.selectedFlag&&(t.selectedFlag=!0,e.target.classList.add("selected"));for(var a={},i=0;i<this.data.length;i++)if(this.data[i][this.idStr]==t[this.idStr]){a=this.data[i];break}var n=this.returnSelectedArr();this.$emit("clickPanel",a,n)}},props:["idStr","filePathStr","data","selection"]},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"photoWall"},e._l(e.tempDataArr,function(t,i){return a("div",{key:i+""+Math.random(),ref:"tempDataArr",refInFor:!0,staticClass:"photoWallItem",class:{selected:t.selectedFlag}},[a("img",{attrs:{src:t[e.filePathStr],alt:""},on:{click:function(a){e.clickPanel(a,t)}}})])}))},staticRenderFns:[]};var f=a("/Xao")(u,m,!1,function(e){a("HiJW")},"data-v-783d13d1",null).exports,p=a("AA3o"),h=a.n(p),g=function e(){h()(this,e),this.data={adtempname:"",adtempdesc:"",adidledefault:"",adidletimelimit:"",adtransdefault:"",adtranstimelimit:"",adlastupdatetime:"",adcreateuser:"",adcreatetime:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempInsert",this.TransServiceCode="mg-afaservices-cnt/adTempInsert"},v=a("djZp"),b={components:{pictureSelector:f},props:{option:Object},data:function(){return{pictureSelectorDialogVisible:!1,currentPage:1,pageSize:20,loading:!1,adPictures:[],form:{name:"",des:"",commonPlay:"",commonDefault:"",inTradePlay:"",inTradeDefault:""},rules:{name:[{max:30,message:"长度不超过30个字符",trigger:"blur"},{required:!0,message:"节目名称必输",trigger:"blur"}]}}},computed:{isShow:{get:function(){return this.option.addAdvertisingIsShow},set:function(e){this.option.addAdvertisingIsShow=e}}},methods:{closeCallback:function(){this.$refs.form.resetFields()},testHandel:function(){this.pictureSelectorDialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$aui.message.show({type:"warning",message:"请按条件输入"}),!1;t.queryAdd()})},queryAdd:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new g).data.adtempname=e.form.name,a.data.adtempdesc=e.form.des,a.data.adidledefault=e.form.commonDefault,a.data.adidletimelimit=e.form.commonPlay.join(","),a.data.adtransdefault=e.form.inTradeDefault,a.data.adcreateuser=e.$store.getters.UserNum,a.data.adtranstimelimit=e.form.inTradePlay.join(","),t.next=11,Object(s.a)(a);case 11:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?(e.$emit("succ"),e.isShow=!1,e.$aui.message.show({type:"success",message:"添加成功！"})):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 14:case"end":return t.stop()}},t,e)}))()},queryPhotoList:function(){var e=this;return r()(n.a.mark(function t(){var a,i,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new v.a).data.Brno=e.$store.getters.BranchNum,a.data.QueryPageNo=e.currentPage,a.data.QueryRowNum=e.pageSize,t.next=7,Object(s.a)(a);case 7:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?(o=i.RspInfo.resultSet,e.adPictures=o):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 10:case"end":return t.stop()}},t,e)}))()},selectHandel:function(e){},clickPanelHandel:function(e,t){console.log(t)}},beforeMount:function(){this.queryPhotoList()}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-dialog",{attrs:{title:"新增广告节目",visible:e.isShow,width:"750px","lock-scroll":!1},on:{"update:visible":function(t){e.isShow=t},hide:e.closeCallback}},[a("aui-card",[a("aui-form",{ref:"form",attrs:{model:e.form,size:"mini","label-width":"120px",rules:e.rules}},[a("aui-form-item",{attrs:{label:"广告节目名称",prop:"name"}},[a("aui-input",{attrs:{placeholder:"请输入广告名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("aui-form-item",{attrs:{label:"广告节目描述",prop:"des"}},[a("aui-input",{attrs:{placeholder:"请输入广告描述"},model:{value:e.form.des,callback:function(t){e.$set(e.form,"des",t)},expression:"form.des"}})],1),e._v(" "),a("aui-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("闲置时")])]),e._v(" "),a("aui-row",[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"选择广告",prop:"commonPlay"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择需要播放的图片"},on:{"visible-change":e.selectHandel},model:{value:e.form.commonPlay,callback:function(t){e.$set(e.form,"commonPlay",t)},expression:"form.commonPlay"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"默认广告",prop:"commonDefault"}},[a("aui-select",{attrs:{placeholder:"请选择默认播放的图片"},model:{value:e.form.commonDefault,callback:function(t){e.$set(e.form,"commonDefault",t)},expression:"form.commonDefault"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("交易时内嵌")])]),e._v(" "),a("aui-row",[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"选择广告",prop:"inTradePlay"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择需要播放的图片"},model:{value:e.form.inTradePlay,callback:function(t){e.$set(e.form,"inTradePlay",t)},expression:"form.inTradePlay"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"默认广告",prop:"inTradeDefault"}},[a("aui-select",{attrs:{placeholder:"请选择默认播放的图片"},model:{value:e.form.inTradeDefault,callback:function(t){e.$set(e.form,"inTradeDefault",t)},expression:"form.inTradeDefault"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1),e._v(" "),a("aui-dialog",{attrs:{title:"选择广告图片",visible:e.pictureSelectorDialogVisible,"lock-scroll":!1,width:"750px"},on:{"update:visible":function(t){e.pictureSelectorDialogVisible=t}}},[a("aui-card",[a("aui-row",[a("aui-col",[a("picture-selector",{attrs:{idStr:"adId",filePathStr:"filePath",data:e.adPictures,selection:[1]},on:{clickPanel:e.clickPanelHandel}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"small"},on:{click:function(t){e.pictureSelectorDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.xxx("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var w=a("/Xao")(b,S,!1,function(e){a("4Rgv")},"data-v-45e88141",null).exports,_=function e(){h()(this,e),this.data={adtempname:"",adtempdesc:"",adidledefault:"",adidletimelimit:"",adtransdefault:"",adtranstimelimit:"",adlastupdatetime:"",adtempId:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempUpdate",this.TransServiceCode="mg-afaservices-cnt/adTempUpdate"},D={props:{option:Object,editData:{},editId:""},watch:{editData:function(){var e=this.editData[0];this.form.name=e.TEMPNAME,this.form.des=e.TEMPDESC,this.form.commonDefault=e.IDLEDEFAULT;var t=e.IDLETIMELIMIT.split(",");this.form.commonPlay=t,this.form.inTradeDefault=e.TRANSDEFAULT;var a=e.TRANSTIMELIMIT.split(",");this.form.inTradePlay=a}},data:function(){return{loading:!1,adPictures:[],currentPage:1,pageSize:20,form:{name:"",des:"",commonPlay:[],commonDefault:"",inTradePlay:[],inTradeDefault:""},rules:{name:[{max:30,message:"长度不超过30个字符",trigger:"blur"},{required:!0,message:"模板名称必输",trigger:"blur"}],des:[{max:50,message:"长度不超过50个字符",trigger:"blur"}]}}},computed:{isShow:{get:function(){return this.option.updateAdvertisingIsShow},set:function(e){this.option.updateAdvertisingIsShow=e}}},methods:{changeHandel:function(){console.log(this.form.commonPlay)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$aui.message.show({type:"warning",message:"请按条件输入"}),!1;t.queryEdit()})},queryEdit:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new _).data.adtempId=e.editId,a.data.adtempname=e.form.name,a.data.adtempdesc=e.form.des,a.data.adidledefault=e.form.commonDefault,a.data.adidletimelimit=e.form.commonPlay.join(","),a.data.adtransdefault=e.form.inTradeDefault,a.data.adtranstimelimit=e.form.inTradePlay.join(","),t.next=11,Object(s.a)(a);case 11:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?(e.$emit("succ"),e.isShow=!1,e.$aui.message.show({type:"success",message:"修改成功！"})):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 14:case"end":return t.stop()}},t,e)}))()},queryPhotoList:function(){var e=this;return r()(n.a.mark(function t(){var a,i,o,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new v.a).data.Brno=e.$store.getters.BranchNum,a.data.QueryPageNo=e.currentPage,a.data.QueryRowNum=e.pageSize,t.next=7,Object(s.a)(a);case 7:if(i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode){for(r in o=i.RspInfo.resultSet)o[r].adId=parseInt(o[r].adId);e.adPictures=o}else e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 10:case"end":return t.stop()}},t,e)}))()}},beforeMount:function(){this.queryPhotoList()}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-dialog",{attrs:{title:"修改广告",visible:e.isShow,width:"750px","lock-scroll":!1},on:{"update:visible":function(t){e.isShow=t}}},[a("aui-card",[a("aui-form",{ref:"form",attrs:{model:e.form,size:"mini","label-width":"90px",rules:e.rules}},[a("aui-form-item",{attrs:{label:"广告名称",prop:"name"}},[a("aui-input",{attrs:{placeholder:"请输入广告名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("aui-form-item",{attrs:{label:"广告描述",prop:"des"}},[a("aui-input",{attrs:{placeholder:"请输入广告描述"},model:{value:e.form.des,callback:function(t){e.$set(e.form,"des",t)},expression:"form.des"}})],1),e._v(" "),a("aui-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("闲置时")])]),e._v(" "),a("aui-row",[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"时段内播放",prop:"commonPlay"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择需要播放的图片"},on:{change:e.changeHandel},model:{value:e.form.commonPlay,callback:function(t){e.$set(e.form,"commonPlay",t)},expression:"form.commonPlay"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"时段外默认",prop:"commonDefault"}},[a("aui-select",{attrs:{placeholder:"请选择默认播放的图片"},model:{value:e.form.commonDefault,callback:function(t){e.$set(e.form,"commonDefault",t)},expression:"form.commonDefault"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1)],1)],1),e._v(" "),a("aui-card",{staticStyle:{"margin-top":"10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("交易中")])]),e._v(" "),a("aui-row",[a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"时段内播放",prop:"inTradePlay"}},[a("aui-select",{attrs:{multiple:"",placeholder:"请选择需要播放的图片"},model:{value:e.form.inTradePlay,callback:function(t){e.$set(e.form,"inTradePlay",t)},expression:"form.inTradePlay"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1),e._v(" "),a("aui-col",{attrs:{span:12}},[a("aui-form-item",{attrs:{label:"时段外默认",prop:"inTradeDefault"}},[a("aui-select",{attrs:{placeholder:"请选择默认播放的图片"},model:{value:e.form.inTradeDefault,callback:function(t){e.$set(e.form,"inTradeDefault",t)},expression:"form.inTradeDefault"}},e._l(e.adPictures,function(t){return a("aui-option",{key:t.AdNo,attrs:{label:t.AdName,value:t.AdNo}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.AdNo+"-"+t.AdName))])])}))],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},A=a("/Xao")(D,y,!1,null,null,null).exports,x={props:{option:Object,showData:Object},data:function(){return{loading:!1,showArr:[],form:{ifInTrade:!0,ifDefault:!1}}},computed:{isShow:{get:function(){return this.option.advertisingDetailIsShow},set:function(e){this.option.advertisingDetailIsShow=e}}},methods:{itemSrc:function(e){return e},changeHandel:function(){this.putDataInArr()},putDataInArr:function(){var e="";e=this.form.ifInTrade?this.form.ifDefault?"TRANSDEFAULT":"TRANSTIMELIMIT":this.form.ifDefault?"IDLEDEFAULT":"IDLETIMELIMIT",this.showArr=[],this.showArr=JSON.parse(d()(this.showData[e])),console.log(this.showArr)}},watch:{showData:function(){this.putDataInArr()},"form.ifInTrade":function(){this.putDataInArr()},"form.ifDefault":function(){this.putDataInArr()},deep:!0}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中。。。"}},[a("aui-dialog",{attrs:{title:"广告详情",visible:e.isShow,width:"900px","lock-scroll":!1},on:{"update:visible":function(t){e.isShow=t}}},[a("aui-form",{attrs:{model:e.form,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:8,lg:6}},[a("aui-form-item",{attrs:{label:"是否在交易中"}},[a("aui-select",{attrs:{prop:"ifInTrade",placeholder:"请选择是否在交易当中"},model:{value:e.form.ifInTrade,callback:function(t){e.$set(e.form,"ifInTrade",t)},expression:"form.ifInTrade"}},[a("aui-option",{attrs:{label:"是",value:!0}}),e._v(" "),a("aui-option",{attrs:{label:"否",value:!1}})],1)],1)],1),e._v(" "),a("aui-col",{attrs:{md:8,lg:6}},[a("aui-form-item",{attrs:{label:"是否播放默认"}},[a("aui-select",{attrs:{prop:"ifDefault",placeholder:"请选择是否播放默认广告"},model:{value:e.form.ifDefault,callback:function(t){e.$set(e.form,"ifDefault",t)},expression:"form.ifDefault"}},[a("aui-option",{attrs:{label:"是",value:!0}}),e._v(" "),a("aui-option",{attrs:{label:"否",value:!1}})],1)],1)],1)],1)],1),e._v(" "),a("aui-carousel",{attrs:{"indicator-position":"outside"}},e._l(e.showArr,function(e){return a("aui-carousel-item",{key:e.id,staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:e.path,alt:""}})])})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]};var T=a("/Xao")(x,I,!1,function(e){a("vxt7")},"data-v-66534c04",null).exports,C=a("pADA"),k=a("tzsN"),R=(a("udOb"),function e(){h()(this,e),this.data={QueryRowNum:"",QueryPageNo:""},this.CommCode="IBContentManagement",this.SceneCode="AdManageQuery",this.TransServiceCode="mg-afaservices-cnt/adManageQuery"}),P=function e(){h()(this,e),this.data={adtempId:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempDelete",this.TransServiceCode="mg-afaservices-cnt/adTempDelete"},E=function e(){h()(this,e),this.data={adtempId:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempDel",this.TransServiceCode="mg-afaservices-cnt/adTempDel"},N=function e(){h()(this,e),this.data={adtempId:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempQuery",this.TransServiceCode="mg-afaservices-cnt/adTempQuery"},M=function e(){h()(this,e),this.data={adtempId:""},this.CommCode="IBContentManagement",this.SceneCode="AdManageView",this.TransServiceCode="mg-afaservices-cnt/adManageView"},$=function e(){h()(this,e),this.data={length:"",start:"",draw:"",AscrBranch:"",DeviceNum:"",DeviceModel:""},this.CommCode="IBDevinfoquery",this.SceneCode="DevInfoQuery",this.TransServiceCode="mg-devinfoquery/devInfoQuery",this.QueryRowNum="",this.QueryPageNo=""},H=function e(){h()(this,e),this.data={adtempId:"",publicType:"",publicTypeVal:""},this.CommCode="IBContentManagement",this.SceneCode="AdTempDevInsert",this.TransServiceCode="mg-afaservices-cnt/adTempDevInsert"},z=a("0VOF"),F={components:{selectTree:k.a},data:function(){return{deleteCheckPopStatu:!1,deleteCheckData:[],editSelectionId:"",brno:[],areaList:[],selection:[],releaseSelection:[],brnoList:[],total:0,currentPage:1,pageSize:l.a.get("PageSize"),loading:!1,dialogList:{addAdvertising:w,updateAdvertising:A,advertisingDetail:T},dialogOptions:{addAdvertisingIsShow:!1,updateAdvertisingIsShow:!1,advertisingDetailIsShow:!1},editData:{},showData:{},deviceRelease:!1,brnoRelease:!1,areaRelease:!1,deviceReleaseIds:"",deviceReleaseForm:{branchId:""},tableData:[],tableData2:[],brnoName:{}}},methods:{initList:function(){var e=this;this.loading=!0;var t=new z.a;t.data.orgno=this.$store.getters.BranchNum,Object(s.a)(t).then(function(t){e.loading=!1,e.brnoList=t.RspInfo.Result;for(var a=0;a<e.brnoList.length;a++)e.brnoName[e.brnoList[a].orgno]=e.brnoList[a].cname}).catch(function(t){e.loading=!1,console.error("错误信息",t)})},closeUser:function(){this.deviceReleaseForm.branchId="",this.tableData2=[]},releaseTableChangeHandel:function(e){console.log(e),this.releaseSelection=e},handleSizeChange:function(e){},handleCurrentChange:function(e){this.queryTable()},editBtnHandel:function(){this.queryEditShow(),this.dialogOptions.updateAdvertisingIsShow=!0},onSubmit:function(){console.log("submit!")},releaseSubmit:function(e){var t=this;return r()(n.a.mark(function a(){var i,o,r,l;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.loading=!0,(i=new H).data.adtempId=t.selection[0].ADTEMPID,"dev"!=e){a.next=15;break}if(0!=t.releaseSelection.length){a.next=8;break}return t.$aui.message.show({type:"warning",message:"请选择至少一个设备"}),t.loading=!1,a.abrupt("return");case 8:for(o=[],r=0;r<t.releaseSelection.length;r++)o.push(t.releaseSelection[r].devicenum);t.deviceRelease=!1,i.data.publicType="1",i.data.publicTypeVal=o.join(","),a.next=23;break;case 15:if("branch"!=e){a.next=23;break}if(0!=t.deviceReleaseForm.branchId.length){a.next=20;break}return t.$aui.message.show({type:"warning",message:"请选择至少一个机构"}),t.loading=!1,a.abrupt("return");case 20:t.brnoRelease=!1,i.data.publicType="2",i.data.publicTypeVal=t.deviceReleaseForm.branchId;case 23:return a.next=25,Object(s.a)(i);case 25:l=a.sent,t.loading=!1,"000000"==l.SYS_HEAD.ReturnCode?t.$aui.message.show({type:"success",message:"提交成功!"}):t.$aui.message.show({type:"warning",message:"请求失败，错误码:"+l.SYS_HEAD.ReturnCode+"，错误信息："+l.SYS_HEAD.ReturnMessage});case 28:case"end":return a.stop()}},a,t)}))()},dialogDetail:function(e,t){this.queryView(e,t)},handleCommand:function(e){"deviceRelease"==e&&(this.deviceRelease=!0),"brnoRelease"==e&&(this.brnoRelease=!0),"areaRelease"==e&&(this.areaRelease=!0)},handleSelectChange:function(e){this.selection=e},queryTable:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new R).data.QueryPageNo=e.currentPage,a.data.QueryRowNum=e.pageSize,t.next=6,Object(s.a)(a);case 6:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?(e.tableData=i.RspInfo.resultSet,e.total=i.RspInfo.total):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 9:case"end":return t.stop()}},t,e)}))()},influencedDelDev:function(){var e=this;return r()(n.a.mark(function t(){var a,i,o,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.loading=!0,a=new P,i=[],o=0;o<e.selection.length;o++)i.push(e.selection[o].ADTEMPID);return a.data.adtempId=i.join(","),t.next=7,Object(s.a)(a);case 7:if(r=t.sent,e.loading=!1,"000000"!=r.SYS_HEAD.ReturnCode){t.next=17;break}if(e.deleteCheckData=r.RspInfo.resultSet,0!=e.deleteCheckData.length){t.next=14;break}return e.deleteHandle(),t.abrupt("return");case 14:e.deleteCheckPopStatu=!0,t.next=18;break;case 17:e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 18:case"end":return t.stop()}},t,e)}))()},deleteHandle:function(){var e=this;this.$aui.confirm.show("您确定是否要删除，删除后将不能恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.queryDelete()}).catch(function(){})},queryDelete:function(){var e=this;return r()(n.a.mark(function t(){var a,i,o,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.loading=!0,a=new E,i=[],o=0;o<e.selection.length;o++)i.push(e.selection[o].ADTEMPID);return a.data.adtempId=i.join(","),t.next=7,Object(s.a)(a);case 7:r=t.sent,e.loading=!1,"000000"==r.SYS_HEAD.ReturnCode&&(e.queryTable(),e.deleteCheckPopStatu=!1,"0"==r.RspInfo.resultSet.alertMessage?e.$aui.message.show({type:"success",message:"删除成功"}):e.$aui.message.show({type:"warning",message:" 该模板已有设备发布，删除失败！"}));case 10:case"end":return t.stop()}},t,e)}))()},queryEditShow:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new N).data.adtempId=e.selection[0].ADTEMPID,t.next=5,Object(s.a)(a);case 5:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?(e.editData=i.RspInfo.resultSet,e.editSelectionId=e.selection[0].ADTEMPID):e.$aui.message.show({type:"warning",message:"请求失败，错误码:"+i.SYS_HEAD.ReturnCode+"，错误信息："+i.SYS_HEAD.ReturnMessage});case 8:case"end":return t.stop()}},t,e)}))()},queryView:function(e,t){var a=this;return r()(n.a.mark(function t(){var i,o,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.row.ADTEMPID,a.loading=!0,(o=new M).data.adtempId=i,t.next=6,Object(s.a)(o);case 6:r=t.sent,a.loading=!1,"000000"==r.SYS_HEAD.ReturnCode?(a.dialogOptions.advertisingDetailIsShow=!0,"string"==typeof r.RspInfo.resultSet?a.showData=JSON.parse(r.RspInfo.resultSet):a.showData=r.RspInfo.resultSet):a.$aui.message.show({type:"warning",message:"请求失败，错误码:"+r.SYS_HEAD.ReturnCode+"，错误信息："+r.SYS_HEAD.ReturnMessage});case 9:case"end":return t.stop()}},t,a)}))()},queryDev:function(){var e=this;return r()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,(a=new $).data.DeviceNum="",a.data.AscrBranch=e.deviceReleaseForm.branchId,a.data.DeviceModel="",a.data.start="0",a.data.length="9999",a.data.draw="2",t.next=10,Object(s.a)(a);case 10:i=t.sent,e.loading=!1,"000000"==i.SYS_HEAD.ReturnCode?e.tableData2=i.RspInfo.pageList:(e.tableData2=[],e.$aui.message.show({type:"warning",message:"错误信息："+i.SYS_HEAD.ReturnMessage}));case 13:case"end":return t.stop()}},t,e)}))()},timeFormat:function(e,t){return C.a.timeFormat(e[t.property])}},created:function(){this.initList(),this.queryTable()}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"},attrs:{"element-loading-text":"加载中。。。"}},[a("aui-card",[a("aui-row",[a("aui-col",{attrs:{md:3,lg:2}},[e.btnPermission("Button_ADTemp_Add")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-plus"},on:{click:function(t){e.dialogOptions.addAdvertisingIsShow=!0}}},[e._v("新增")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{md:3,lg:2}},[e.btnPermission("Button_ADTemp_Edit")?a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-edit",disabled:!(1==e.selection.length)},on:{click:e.editBtnHandel}},[e._v("修改")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{md:3,lg:2}},[e.btnPermission("Button_ADTemp_Delete")?a("aui-button",{attrs:{type:"danger",size:"mini",icon:"aui-icon-delete",disabled:!(1==e.selection.length)},on:{click:e.influencedDelDev}},[e._v("删除")]):e._e()],1),e._v(" "),a("aui-col",{attrs:{md:3,lg:2}},[a("aui-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[e.btnPermission("Button_ADTemp_Release")?a("aui-button",{attrs:{type:"primary",size:"mini",disabled:!(1==e.selection.length)}},[e._v("\n             发布"),a("i",{staticClass:"aui-icon-arrow-down aui-icon--right"})]):e._e(),e._v(" "),a("aui-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("aui-dropdown-item",{attrs:{command:"deviceRelease"}},[e._v("按设备发布")]),e._v(" "),a("aui-dropdown-item",{attrs:{command:"brnoRelease"}},[e._v("按机构发布")])],1)],1)],1)],1),e._v(" "),a("aui-table",{staticClass:"tableMarginTop",attrs:{data:e.tableData,"header-row-class-name":"tableHeaderClass",border:""},on:{"selection-change":e.handleSelectChange}},[a("aui-table-column",{attrs:{type:"selection",width:"40",fixed:""}}),e._v(" "),a("aui-table-column",{attrs:{prop:"ADTEMPID",label:"广告节目编号",width:"140"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"TEMPNAME",label:"广告节目名称",width:"140"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"TEMPDESC",label:"描述"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"CREATETIME",label:"创建时间",formatter:e.timeFormat}}),e._v(" "),a("aui-table-column",{attrs:{label:"广告预览",align:"center",fixed:"right",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("aui-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.dialogDetail(t,e.tableData)}}},[e._v("预览")])]}}])})],1),e._v(" "),a("aui-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",background:"",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a(e.dialogList.addAdvertising,{tag:"component",attrs:{option:e.dialogOptions},on:{succ:e.queryTable}}),e._v(" "),a(e.dialogList.updateAdvertising,{tag:"component",attrs:{option:e.dialogOptions,"edit-id":e.editSelectionId,"edit-data":e.editData},on:{succ:e.queryTable}}),e._v(" "),a(e.dialogList.advertisingDetail,{tag:"component",attrs:{option:e.dialogOptions,"show-data":e.showData}}),e._v(" "),a("aui-dialog",{attrs:{title:"按设备发布",visible:e.deviceRelease,width:"750px","lock-scroll":!1},on:{"update:visible":function(t){e.deviceRelease=t},hide:e.closeUser}},[a("aui-card",[a("aui-form",{attrs:{data:e.deviceReleaseForm,size:"mini","label-position":"top"}},[a("aui-row",{attrs:{gutter:10}},[a("aui-col",{attrs:{md:12,lg:8}},[a("aui-form",{attrs:{data:e.deviceReleaseForm,size:"mini","label-position":"top"}},[a("aui-form-item",{attrs:{label:"机构",prop:"branchId"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择机构"},model:{value:e.deviceReleaseForm.branchId,callback:function(t){e.$set(e.deviceReleaseForm,"branchId",t)},expression:"deviceReleaseForm.branchId"}},e._l(e.brnoList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.cname,value:e.orgno,disabled:e.disabled}})}))],1)],1)],1),e._v(" "),a("aui-col",{staticClass:"searchBtnMarginTop",attrs:{md:4,lg:3}},[a("aui-button",{attrs:{type:"primary",size:"mini",icon:"aui-icon-search"},on:{click:e.queryDev}},[e._v("查询")])],1)],1)],1),e._v(" "),a("aui-table",{staticClass:"tableMarginTop",attrs:{data:e.tableData2,"header-row-class-name":"tableHeaderClass",border:""},on:{"selection-change":e.releaseTableChangeHandel}},[a("aui-table-column",{attrs:{type:"selection",width:"40",fixed:""}}),e._v(" "),a("aui-table-column",{attrs:{property:"devicenum",label:"设备编号"}}),e._v(" "),a("aui-table-column",{attrs:{property:"devicetype",label:"设备类型"}}),e._v(" "),a("aui-table-column",{attrs:{property:"ascrbranch",label:"所在机构"}}),e._v(" "),a("aui-table-column",{attrs:{property:"devicemodel",label:"设备型号"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"mini"},on:{click:function(t){e.deviceRelease=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.releaseSubmit("dev")}}},[e._v("确 定")])],1)],1),e._v(" "),a("aui-dialog",{attrs:{title:"按机构发布",visible:e.brnoRelease,width:"600px","lock-scroll":!1},on:{"update:visible":function(t){e.brnoRelease=t}}},[a("aui-card",[a("aui-form",{attrs:{data:e.deviceReleaseForm,size:"mini","label-position":"top"}},[a("aui-form-item",{attrs:{label:"机构",prop:"branchId"}},[a("aui-select",{attrs:{filterable:"",placeholder:"请选择机构"},model:{value:e.deviceReleaseForm.branchId,callback:function(t){e.$set(e.deviceReleaseForm,"branchId",t)},expression:"deviceReleaseForm.branchId"}},e._l(e.brnoList,function(e){return a("aui-option",{key:e.value,attrs:{label:e.cname,value:e.orgno,disabled:e.disabled}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"mini"},on:{click:function(t){e.brnoRelease=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.releaseSubmit("branch")}}},[e._v("确 定")])],1)],1),e._v(" "),a("aui-dialog",{attrs:{visible:e.deleteCheckPopStatu,"lock-scroll":!1},on:{"update:visible":function(t){e.deleteCheckPopStatu=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e._v("\n       下列模板中因有广告图片正在使用当中 无法删除\n       "),a("aui-table",{staticStyle:{width:"100%"},attrs:{data:e.deleteCheckData,"max-height":"400"}},[a("aui-table-column",{attrs:{prop:"adtempId",label:"广告模板编号",width:"300"}}),e._v(" "),a("aui-table-column",{attrs:{prop:"adtempName",label:"广告名称"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("aui-button",{attrs:{size:"mini"},on:{click:function(t){e.deleteCheckPopStatu=!1}}},[e._v("取 消")]),e._v(" "),a("aui-button",{attrs:{size:"mini",type:"primary"},on:{click:e.deleteHandle}},[e._v("继续删除")])],1)])],1)},staticRenderFns:[]};var L=a("/Xao")(F,O,!1,function(e){a("zxeb")},null,null);t.default=L.exports},oyUO:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.el-carousel__item h3[data-v-66534c04] {\n  color: #475669;\n  font-size: 18px;\n  opacity: 0.75;\n  line-height: 300px;\n  margin: 0;\n}\n.el-carousel__item[data-v-66534c04]:nth-child(2n) {\n  background-color: #99a9bf;\n}\n.el-carousel__item[data-v-66534c04]:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n",""])},vBeO:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.aui-card {\n  overflow: inherit;\n}\n",""])},vxt7:function(e,t,a){var i=a("oyUO");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("36ae8530",i,!0)},zxeb:function(e,t,a){var i=a("vBeO");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("1a509c3c",i,!0)}});